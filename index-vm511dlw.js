var hC=Object.defineProperty;var fC=(n,t,e)=>t in n?hC(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ct=(n,t,e)=>fC(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function cS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ep={exports:{}},Rc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ex;function dC(){if(ex)return Rc;ex=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:l,ref:r!==void 0?r:null,props:o}}return Rc.Fragment=t,Rc.jsx=e,Rc.jsxs=e,Rc}var nx;function gC(){return nx||(nx=1,ep.exports=dC()),ep.exports}var S=gC(),np={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ix;function mC(){if(ix)return Rt;ix=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),b=Symbol.iterator;function E(F){return F===null||typeof F!="object"?null:(F=b&&F[b]||F["@@iterator"],typeof F=="function"?F:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,R={};function O(F,et,lt){this.props=F,this.context=et,this.refs=R,this.updater=lt||w}O.prototype.isReactComponent={},O.prototype.setState=function(F,et){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,et,"setState")},O.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function q(){}q.prototype=O.prototype;function j(F,et,lt){this.props=F,this.context=et,this.refs=R,this.updater=lt||w}var B=j.prototype=new q;B.constructor=j,A(B,O.prototype),B.isPureReactComponent=!0;var U=Array.isArray;function Y(){}var I={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function N(F,et,lt){var ut=lt.ref;return{$$typeof:n,type:F,key:et,ref:ut!==void 0?ut:null,props:lt}}function V(F,et){return N(F.type,et,F.props)}function k(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function z(F){var et={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(lt){return et[lt]})}var P=/\/+/g;function Ot(F,et){return typeof F=="object"&&F!==null&&F.key!=null?z(""+F.key):et.toString(36)}function At(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(Y,Y):(F.status="pending",F.then(function(et){F.status==="pending"&&(F.status="fulfilled",F.value=et)},function(et){F.status==="pending"&&(F.status="rejected",F.reason=et)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function $(F,et,lt,ut,bt){var Tt=typeof F;(Tt==="undefined"||Tt==="boolean")&&(F=null);var Gt=!1;if(F===null)Gt=!0;else switch(Tt){case"bigint":case"string":case"number":Gt=!0;break;case"object":switch(F.$$typeof){case n:case t:Gt=!0;break;case p:return Gt=F._init,$(Gt(F._payload),et,lt,ut,bt)}}if(Gt)return bt=bt(F),Gt=ut===""?"."+Ot(F,0):ut,U(bt)?(lt="",Gt!=null&&(lt=Gt.replace(P,"$&/")+"/"),$(bt,et,lt,"",function($r){return $r})):bt!=null&&(k(bt)&&(bt=V(bt,lt+(bt.key==null||F&&F.key===bt.key?"":(""+bt.key).replace(P,"$&/")+"/")+Gt)),et.push(bt)),1;Gt=0;var Be=ut===""?".":ut+":";if(U(F))for(var ge=0;ge<F.length;ge++)ut=F[ge],Tt=Be+Ot(ut,ge),Gt+=$(ut,et,lt,Tt,bt);else if(ge=E(F),typeof ge=="function")for(F=ge.call(F),ge=0;!(ut=F.next()).done;)ut=ut.value,Tt=Be+Ot(ut,ge++),Gt+=$(ut,et,lt,Tt,bt);else if(Tt==="object"){if(typeof F.then=="function")return $(At(F),et,lt,ut,bt);throw et=String(F),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.")}return Gt}function at(F,et,lt){if(F==null)return F;var ut=[],bt=0;return $(F,ut,"","",function(Tt){return et.call(lt,Tt,bt++)}),ut}function dt(F){if(F._status===-1){var et=F._result;et=et(),et.then(function(lt){(F._status===0||F._status===-1)&&(F._status=1,F._result=lt)},function(lt){(F._status===0||F._status===-1)&&(F._status=2,F._result=lt)}),F._status===-1&&(F._status=0,F._result=et)}if(F._status===1)return F._result.default;throw F._result}var xt=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var et=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(et))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Lt={map:at,forEach:function(F,et,lt){at(F,function(){et.apply(this,arguments)},lt)},count:function(F){var et=0;return at(F,function(){et++}),et},toArray:function(F){return at(F,function(et){return et})||[]},only:function(F){if(!k(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Rt.Activity=_,Rt.Children=Lt,Rt.Component=O,Rt.Fragment=e,Rt.Profiler=r,Rt.PureComponent=j,Rt.StrictMode=i,Rt.Suspense=f,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(F){return I.H.useMemoCache(F)}},Rt.cache=function(F){return function(){return F.apply(null,arguments)}},Rt.cacheSignal=function(){return null},Rt.cloneElement=function(F,et,lt){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var ut=A({},F.props),bt=F.key;if(et!=null)for(Tt in et.key!==void 0&&(bt=""+et.key),et)!D.call(et,Tt)||Tt==="key"||Tt==="__self"||Tt==="__source"||Tt==="ref"&&et.ref===void 0||(ut[Tt]=et[Tt]);var Tt=arguments.length-2;if(Tt===1)ut.children=lt;else if(1<Tt){for(var Gt=Array(Tt),Be=0;Be<Tt;Be++)Gt[Be]=arguments[Be+2];ut.children=Gt}return N(F.type,bt,ut)},Rt.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:o,_context:F},F},Rt.createElement=function(F,et,lt){var ut,bt={},Tt=null;if(et!=null)for(ut in et.key!==void 0&&(Tt=""+et.key),et)D.call(et,ut)&&ut!=="key"&&ut!=="__self"&&ut!=="__source"&&(bt[ut]=et[ut]);var Gt=arguments.length-2;if(Gt===1)bt.children=lt;else if(1<Gt){for(var Be=Array(Gt),ge=0;ge<Gt;ge++)Be[ge]=arguments[ge+2];bt.children=Be}if(F&&F.defaultProps)for(ut in Gt=F.defaultProps,Gt)bt[ut]===void 0&&(bt[ut]=Gt[ut]);return N(F,Tt,bt)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(F){return{$$typeof:u,render:F}},Rt.isValidElement=k,Rt.lazy=function(F){return{$$typeof:p,_payload:{_status:-1,_result:F},_init:dt}},Rt.memo=function(F,et){return{$$typeof:d,type:F,compare:et===void 0?null:et}},Rt.startTransition=function(F){var et=I.T,lt={};I.T=lt;try{var ut=F(),bt=I.S;bt!==null&&bt(lt,ut),typeof ut=="object"&&ut!==null&&typeof ut.then=="function"&&ut.then(Y,xt)}catch(Tt){xt(Tt)}finally{et!==null&&lt.types!==null&&(et.types=lt.types),I.T=et}},Rt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Rt.use=function(F){return I.H.use(F)},Rt.useActionState=function(F,et,lt){return I.H.useActionState(F,et,lt)},Rt.useCallback=function(F,et){return I.H.useCallback(F,et)},Rt.useContext=function(F){return I.H.useContext(F)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(F,et){return I.H.useDeferredValue(F,et)},Rt.useEffect=function(F,et){return I.H.useEffect(F,et)},Rt.useEffectEvent=function(F){return I.H.useEffectEvent(F)},Rt.useId=function(){return I.H.useId()},Rt.useImperativeHandle=function(F,et,lt){return I.H.useImperativeHandle(F,et,lt)},Rt.useInsertionEffect=function(F,et){return I.H.useInsertionEffect(F,et)},Rt.useLayoutEffect=function(F,et){return I.H.useLayoutEffect(F,et)},Rt.useMemo=function(F,et){return I.H.useMemo(F,et)},Rt.useOptimistic=function(F,et){return I.H.useOptimistic(F,et)},Rt.useReducer=function(F,et,lt){return I.H.useReducer(F,et,lt)},Rt.useRef=function(F){return I.H.useRef(F)},Rt.useState=function(F){return I.H.useState(F)},Rt.useSyncExternalStore=function(F,et,lt){return I.H.useSyncExternalStore(F,et,lt)},Rt.useTransition=function(){return I.H.useTransition()},Rt.version="19.2.0",Rt}var sx;function Ty(){return sx||(sx=1,np.exports=mC()),np.exports}var ht=Ty();const uS=cS(ht);var ip={exports:{}},Cc={},sp={exports:{}},rp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rx;function pC(){return rx||(rx=1,(function(n){function t($,at){var dt=$.length;$.push(at);t:for(;0<dt;){var xt=dt-1>>>1,Lt=$[xt];if(0<r(Lt,at))$[xt]=at,$[dt]=Lt,dt=xt;else break t}}function e($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var at=$[0],dt=$.pop();if(dt!==at){$[0]=dt;t:for(var xt=0,Lt=$.length,F=Lt>>>1;xt<F;){var et=2*(xt+1)-1,lt=$[et],ut=et+1,bt=$[ut];if(0>r(lt,dt))ut<Lt&&0>r(bt,lt)?($[xt]=bt,$[ut]=dt,xt=ut):($[xt]=lt,$[et]=dt,xt=et);else if(ut<Lt&&0>r(bt,dt))$[xt]=bt,$[ut]=dt,xt=ut;else break t}}return at}function r($,at){var dt=$.sortIndex-at.sortIndex;return dt!==0?dt:$.id-at.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var f=[],d=[],p=1,_=null,b=3,E=!1,w=!1,A=!1,R=!1,O=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function B($){for(var at=e(d);at!==null;){if(at.callback===null)i(d);else if(at.startTime<=$)i(d),at.sortIndex=at.expirationTime,t(f,at);else break;at=e(d)}}function U($){if(A=!1,B($),!w)if(e(f)!==null)w=!0,Y||(Y=!0,z());else{var at=e(d);at!==null&&At(U,at.startTime-$)}}var Y=!1,I=-1,D=5,N=-1;function V(){return R?!0:!(n.unstable_now()-N<D)}function k(){if(R=!1,Y){var $=n.unstable_now();N=$;var at=!0;try{t:{w=!1,A&&(A=!1,q(I),I=-1),E=!0;var dt=b;try{e:{for(B($),_=e(f);_!==null&&!(_.expirationTime>$&&V());){var xt=_.callback;if(typeof xt=="function"){_.callback=null,b=_.priorityLevel;var Lt=xt(_.expirationTime<=$);if($=n.unstable_now(),typeof Lt=="function"){_.callback=Lt,B($),at=!0;break e}_===e(f)&&i(f),B($)}else i(f);_=e(f)}if(_!==null)at=!0;else{var F=e(d);F!==null&&At(U,F.startTime-$),at=!1}}break t}finally{_=null,b=dt,E=!1}at=void 0}}finally{at?z():Y=!1}}}var z;if(typeof j=="function")z=function(){j(k)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Ot=P.port2;P.port1.onmessage=k,z=function(){Ot.postMessage(null)}}else z=function(){O(k,0)};function At($,at){I=O(function(){$(n.unstable_now())},at)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function($){switch(b){case 1:case 2:case 3:var at=3;break;default:at=b}var dt=b;b=at;try{return $()}finally{b=dt}},n.unstable_requestPaint=function(){R=!0},n.unstable_runWithPriority=function($,at){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var dt=b;b=$;try{return at()}finally{b=dt}},n.unstable_scheduleCallback=function($,at,dt){var xt=n.unstable_now();switch(typeof dt=="object"&&dt!==null?(dt=dt.delay,dt=typeof dt=="number"&&0<dt?xt+dt:xt):dt=xt,$){case 1:var Lt=-1;break;case 2:Lt=250;break;case 5:Lt=1073741823;break;case 4:Lt=1e4;break;default:Lt=5e3}return Lt=dt+Lt,$={id:p++,callback:at,priorityLevel:$,startTime:dt,expirationTime:Lt,sortIndex:-1},dt>xt?($.sortIndex=dt,t(d,$),e(f)===null&&$===e(d)&&(A?(q(I),I=-1):A=!0,At(U,dt-xt))):($.sortIndex=Lt,t(f,$),w||E||(w=!0,Y||(Y=!0,z()))),$},n.unstable_shouldYield=V,n.unstable_wrapCallback=function($){var at=b;return function(){var dt=b;b=at;try{return $.apply(this,arguments)}finally{b=dt}}}})(rp)),rp}var ax;function yC(){return ax||(ax=1,sp.exports=pC()),sp.exports}var ap={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ox;function _C(){if(ox)return cn;ox=1;var n=Ty();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,d,p){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:f,containerInfo:d,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cn.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return o(f,d,null,p)},cn.flushSync=function(f){var d=l.T,p=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=d,i.p=p,i.d.f()}},cn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},cn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},cn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,_=u(p,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,E=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:E}):p==="script"&&i.d.X(f,{crossOrigin:_,integrity:b,fetchPriority:E,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},cn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=u(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},cn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,_=u(p,d.crossOrigin);i.d.L(f,p,{crossOrigin:_,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},cn.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=u(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},cn.requestFormReset=function(f){i.d.r(f)},cn.unstable_batchedUpdates=function(f,d){return f(d)},cn.useFormState=function(f,d,p){return l.H.useFormState(f,d,p)},cn.useFormStatus=function(){return l.H.useHostTransitionStatus()},cn.version="19.2.0",cn}var lx;function bC(){if(lx)return ap.exports;lx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),ap.exports=_C(),ap.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cx;function vC(){if(cx)return Cc;cx=1;var n=yC(),t=Ty(),e=bC();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function u(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(i(188))}function d(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var c=s,h=a;;){var m=c.return;if(m===null)break;var y=m.alternate;if(y===null){if(h=m.return,h!==null){c=h;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===c)return f(m),s;if(y===h)return f(m),a;y=y.sibling}throw Error(i(188))}if(c.return!==h.return)c=m,h=y;else{for(var x=!1,C=m.child;C;){if(C===c){x=!0,c=m,h=y;break}if(C===h){x=!0,h=m,c=y;break}C=C.sibling}if(!x){for(C=y.child;C;){if(C===c){x=!0,c=y,h=m;break}if(C===h){x=!0,h=y,c=m;break}C=C.sibling}if(!x)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),j=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=k&&s[k]||s["@@iterator"],typeof s=="function"?s:null)}var P=Symbol.for("react.client.reference");function Ot(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===P?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case A:return"Fragment";case O:return"Profiler";case R:return"StrictMode";case U:return"Suspense";case Y:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case j:return s.displayName||"Context";case q:return(s._context.displayName||"Context")+".Consumer";case B:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case I:return a=s.displayName||null,a!==null?a:Ot(s.type)||"Memo";case D:a=s._payload,s=s._init;try{return Ot(s(a))}catch{}}return null}var At=Array.isArray,$=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt={pending:!1,data:null,method:null,action:null},xt=[],Lt=-1;function F(s){return{current:s}}function et(s){0>Lt||(s.current=xt[Lt],xt[Lt]=null,Lt--)}function lt(s,a){Lt++,xt[Lt]=s.current,s.current=a}var ut=F(null),bt=F(null),Tt=F(null),Gt=F(null);function Be(s,a){switch(lt(Tt,a),lt(bt,s),lt(ut,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Sv(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Sv(a),s=Av(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}et(ut),lt(ut,s)}function ge(){et(ut),et(bt),et(Tt)}function $r(s){s.memoizedState!==null&&lt(Gt,s);var a=ut.current,c=Av(a,s.type);a!==c&&(lt(bt,s),lt(ut,c))}function no(s){bt.current===s&&(et(ut),et(bt)),Gt.current===s&&(et(Gt),Ec._currentValue=dt)}var io,so;function Ai(s){if(io===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);io=a&&a[1]||"",so=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+io+s+so}var El=!1;function Jr(s,a){if(!s||El)return"";El=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(Z){var Q=Z}Reflect.construct(s,[],it)}else{try{it.call()}catch(Z){Q=Z}s.call(it.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(it=s())&&typeof it.catch=="function"&&it.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),x=y[0],C=y[1];if(x&&C){var L=x.split(`
`),W=C.split(`
`);for(m=h=0;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;for(;m<W.length&&!W[m].includes("DetermineComponentFrameRoot");)m++;if(h===L.length||m===W.length)for(h=L.length-1,m=W.length-1;1<=h&&0<=m&&L[h]!==W[m];)m--;for(;1<=h&&0<=m;h--,m--)if(L[h]!==W[m]){if(h!==1||m!==1)do if(h--,m--,0>m||L[h]!==W[m]){var tt=`
`+L[h].replace(" at new "," at ");return s.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",s.displayName)),tt}while(1<=h&&0<=m);break}}}finally{El=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Ai(c):""}function Sl(s,a){switch(s.tag){case 26:case 27:case 5:return Ai(s.type);case 16:return Ai("Lazy");case 13:return s.child!==a&&a!==null?Ai("Suspense Fallback"):Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 15:return Jr(s.type,!1);case 11:return Jr(s.type.render,!1);case 1:return Jr(s.type,!0);case 31:return Ai("Activity");default:return""}}function Al(s){try{var a="",c=null;do a+=Sl(s,c),c=s,s=s.return;while(s);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var De=Object.prototype.hasOwnProperty,Fe=n.unstable_scheduleCallback,qs=n.unstable_cancelCallback,ig=n.unstable_shouldYield,Vu=n.unstable_requestPaint,_n=n.unstable_now,Zr=n.unstable_getCurrentPriorityLevel,wl=n.unstable_ImmediatePriority,Rl=n.unstable_UserBlockingPriority,Gs=n.unstable_NormalPriority,sg=n.unstable_LowPriority,Lu=n.unstable_IdlePriority,ju=n.log,zu=n.unstable_setDisableYieldValue,li=null,Ze=null;function Gn(s){if(typeof ju=="function"&&zu(s),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(li,s)}catch{}}var Ee=Math.clz32?Math.clz32:Bu,Uu=Math.log,ro=Math.LN2;function Bu(s){return s>>>=0,s===0?32:31-(Uu(s)/ro|0)|0}var wi=256,ta=262144,Me=4194304;function Ri(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ci(s,a,c){var h=s.pendingLanes;if(h===0)return 0;var m=0,y=s.suspendedLanes,x=s.pingedLanes;s=s.warmLanes;var C=h&134217727;return C!==0?(h=C&~y,h!==0?m=Ri(h):(x&=C,x!==0?m=Ri(x):c||(c=C&~s,c!==0&&(m=Ri(c))))):(C=h&~y,C!==0?m=Ri(C):x!==0?m=Ri(x):c||(c=h&~s,c!==0&&(m=Ri(c)))),m===0?0:a!==0&&a!==m&&(a&y)===0&&(y=m&-m,c=a&-a,y>=c||y===32&&(c&4194048)!==0)?a:m}function ci(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function rg(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fu(){var s=Me;return Me<<=1,(Me&62914560)===0&&(Me=4194304),s}function Ii(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function ea(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ag(s,a,c,h,m,y){var x=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var C=s.entanglements,L=s.expirationTimes,W=s.hiddenUpdates;for(c=x&~c;0<c;){var tt=31-Ee(c),it=1<<tt;C[tt]=0,L[tt]=-1;var Q=W[tt];if(Q!==null)for(W[tt]=null,tt=0;tt<Q.length;tt++){var Z=Q[tt];Z!==null&&(Z.lane&=-536870913)}c&=~it}h!==0&&na(s,h,0),y!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=y&~(x&~a))}function na(s,a,c){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-Ee(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|c&261930}function Cl(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var h=31-Ee(c),m=1<<h;m&a|s[h]&a&&(s[h]|=a),c&=~m}}function Il(s,a){var c=a&-a;return c=(c&42)!==0?1:ia(c),(c&(s.suspendedLanes|a))!==0?0:c}function ia(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function rs(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Hu(){var s=at.p;return s!==0?s:(s=window.event,s===void 0?32:Xv(s.type))}function ui(s,a){var c=at.p;try{return at.p=s,a()}finally{at.p=c}}var hi=Math.random().toString(36).slice(2),Ne="__reactFiber$"+hi,Xe="__reactProps$"+hi,Di="__reactContainer$"+hi,ao="__reactEvents$"+hi,og="__reactListeners$"+hi,qu="__reactHandles$"+hi,Gu="__reactResources$"+hi,Mi="__reactMarker$"+hi;function oo(s){delete s[Ne],delete s[Xe],delete s[ao],delete s[og],delete s[qu]}function Ni(s){var a=s[Ne];if(a)return a;for(var c=s.parentNode;c;){if(a=c[Di]||c[Ne]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=Nv(s);s!==null;){if(c=s[Ne])return c;s=Nv(s)}return a}s=c,c=s.parentNode}return null}function Yn(s){if(s=s[Ne]||s[Di]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function kn(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function Oi(s){var a=s[Gu];return a||(a=s[Gu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Oe(s){s[Mi]=!0}var Dl=new Set,Ml={};function ki(s,a){Pi(s,a),Pi(s+"Capture",a)}function Pi(s,a){for(Ml[s]=a,s=0;s<a.length;s++)Dl.add(a[s])}var Nl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ol={},kl={};function Yu(s){return De.call(kl,s)?!0:De.call(Ol,s)?!1:Nl.test(s)?kl[s]=!0:(Ol[s]=!0,!1)}function lo(s,a,c){if(Yu(a))if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+c)}}function Pn(s,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+c)}}function ke(s,a,c,h){if(h===null)s.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(a,c,""+h)}}function We(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ys(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Pl(s,a,c){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var m=h.get,y=h.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(x){c=""+x,y.call(this,x)}}),Object.defineProperty(s,a,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(x){c=""+x},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function te(s){if(!s._valueTracker){var a=Ys(s)?"checked":"value";s._valueTracker=Pl(s,a,""+s[a])}}function sa(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),h="";return s&&(h=Ys(s)?s.checked?"true":"false":s.value),s=h,s!==c?(a.setValue(s),!0):!1}function Vi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ra=/[\n"\\]/g;function Tn(s){return s.replace(ra,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function co(s,a,c,h,m,y,x,C){s.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.type=x:s.removeAttribute("type"),a!=null?x==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+We(a)):s.value!==""+We(a)&&(s.value=""+We(a)):x!=="submit"&&x!=="reset"||s.removeAttribute("value"),a!=null?Vl(s,x,We(a)):c!=null?Vl(s,x,We(c)):h!=null&&s.removeAttribute("value"),m==null&&y!=null&&(s.defaultChecked=!!y),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.name=""+We(C):s.removeAttribute("name")}function Ku(s,a,c,h,m,y,x,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),a!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){te(s);return}c=c!=null?""+We(c):"",a=a!=null?""+We(a):c,C||a===s.value||(s.value=a),s.defaultValue=a}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=C?s.checked:!!h,s.defaultChecked=!!h,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(s.name=x),te(s)}function Vl(s,a,c){a==="number"&&Vi(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Ks(s,a,c,h){if(s=s.options,a){a={};for(var m=0;m<c.length;m++)a["$"+c[m]]=!0;for(c=0;c<s.length;c++)m=a.hasOwnProperty("$"+s[c].value),s[c].selected!==m&&(s[c].selected=m),m&&h&&(s[c].defaultSelected=!0)}else{for(c=""+We(c),a=null,m=0;m<s.length;m++){if(s[m].value===c){s[m].selected=!0,h&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function Xu(s,a,c){if(a!=null&&(a=""+We(a),a!==s.value&&(s.value=a),c==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=c!=null?""+We(c):""}function Xs(s,a,c,h){if(a==null){if(h!=null){if(c!=null)throw Error(i(92));if(At(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),a=c}c=We(a),s.defaultValue=c,h=s.textContent,h===c&&h!==""&&h!==null&&(s.value=h),te(s)}function En(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=a;return}}s.textContent=a}var Wu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ll(s,a,c){var h=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,c):typeof c!="number"||c===0||Wu.has(a)?a==="float"?s.cssFloat=c:s[a]=(""+c).trim():s[a]=c+"px"}function jl(s,a,c){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var m in a)h=a[m],a.hasOwnProperty(m)&&c[m]!==h&&Ll(s,m,h)}else for(var y in a)a.hasOwnProperty(y)&&Ll(s,y,a[y])}function uo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ws=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ho(s){return Ws.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function fi(){}var zl=null;function Kn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Qs=null,Li=null;function aa(s){var a=Yn(s);if(a&&(s=a.stateNode)){var c=s[Xe]||null;t:switch(s=a.stateNode,a.type){case"input":if(co(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Tn(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var h=c[a];if(h!==s&&h.form===s.form){var m=h[Xe]||null;if(!m)throw Error(i(90));co(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<c.length;a++)h=c[a],h.form===s.form&&sa(h)}break t;case"textarea":Xu(s,c.value,c.defaultValue);break t;case"select":a=c.value,a!=null&&Ks(s,!!c.multiple,a,!1)}}}var fo=!1;function $s(s,a,c){if(fo)return s(a,c);fo=!0;try{var h=s(a);return h}finally{if(fo=!1,(Qs!==null||Li!==null)&&(Hh(),Qs&&(a=Qs,s=Li,Li=Qs=null,aa(a),s)))for(a=0;a<s.length;a++)aa(s[a])}}function di(s,a){var c=s.stateNode;if(c===null)return null;var h=c[Xe]||null;if(h===null)return null;c=h[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break t;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(i(231,a,typeof c));return c}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oa=!1;if(Xn)try{var se={};Object.defineProperty(se,"passive",{get:function(){oa=!0}}),window.addEventListener("test",se,se),window.removeEventListener("test",se,se)}catch{oa=!1}var ji=null,Ul=null,la=null;function Bl(){if(la)return la;var s,a=Ul,c=a.length,h,m="value"in ji?ji.value:ji.textContent,y=m.length;for(s=0;s<c&&a[s]===m[s];s++);var x=c-s;for(h=1;h<=x&&a[c-h]===m[y-h];h++);return la=m.slice(s,1<h?1-h:void 0)}function ca(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function as(){return!0}function gi(){return!1}function tn(s){function a(c,h,m,y,x){this._reactName=c,this._targetInst=m,this.type=h,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(c=s[C],this[C]=c?c(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?as:gi,this.isPropagationStopped=gi,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=as)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=as)},persist:function(){},isPersistent:as}),a}var os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zi=tn(os),Js=_({},os,{view:0,detail:0}),Fl=tn(Js),Zs,go,Ui,mo=_({},Js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ui&&(Ui&&s.type==="mousemove"?(Zs=s.screenX-Ui.screenX,go=s.screenY-Ui.screenY):go=Zs=0,Ui=s),Zs)},movementY:function(s){return"movementY"in s?s.movementY:go}}),Hl=tn(mo),ua=_({},mo,{dataTransfer:0}),$u=tn(ua),Ju=_({},Js,{relatedTarget:0}),ha=tn(Ju),ql=_({},os,{animationName:0,elapsedTime:0,pseudoElement:0}),Zu=tn(ql),po=_({},os,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),th=tn(po),eh=_({},os,{data:0}),Bi=tn(eh),nh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ih={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rh(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=sh[s])?!!a[s]:!1}function tr(){return rh}var bn=_({},Js,{key:function(s){if(s.key){var a=nh[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=ca(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ih[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tr,charCode:function(s){return s.type==="keypress"?ca(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ca(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ah=tn(bn),oh=_({},mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ls=tn(oh),g=_({},Js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tr}),v=tn(g),T=_({},os,{propertyName:0,elapsedTime:0,pseudoElement:0}),M=tn(T),K=_({},mo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),J=tn(K),ot=_({},os,{newState:0,oldState:0}),Dt=tn(ot),Se=[9,13,27,32],Qt=Xn&&"CompositionEvent"in window,me=null;Xn&&"documentMode"in document&&(me=document.documentMode);var Wn=Xn&&"TextEvent"in window&&!me,Fi=Xn&&(!Qt||me&&8<me&&11>=me),mi=" ",pi=!1;function fa(s,a){switch(s){case"keyup":return Se.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var _o=!1;function P1(s,a){switch(s){case"compositionend":return yo(a);case"keypress":return a.which!==32?null:(pi=!0,mi);case"textInput":return s=a.data,s===mi&&pi?null:s;default:return null}}function V1(s,a){if(_o)return s==="compositionend"||!Qt&&fa(s,a)?(s=Bl(),la=Ul=ji=null,_o=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Fi&&a.locale!=="ko"?null:a.data;default:return null}}var L1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P_(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!L1[s.type]:a==="textarea"}function V_(s,a,c,h){Qs?Li?Li.push(h):Li=[h]:Qs=h,a=Qh(a,"onChange"),0<a.length&&(c=new zi("onChange","change",null,c,h),s.push({event:c,listeners:a}))}var Gl=null,Yl=null;function j1(s){_v(s,0)}function lh(s){var a=kn(s);if(sa(a))return s}function L_(s,a){if(s==="change")return a}var j_=!1;if(Xn){var lg;if(Xn){var cg="oninput"in document;if(!cg){var z_=document.createElement("div");z_.setAttribute("oninput","return;"),cg=typeof z_.oninput=="function"}lg=cg}else lg=!1;j_=lg&&(!document.documentMode||9<document.documentMode)}function U_(){Gl&&(Gl.detachEvent("onpropertychange",B_),Yl=Gl=null)}function B_(s){if(s.propertyName==="value"&&lh(Yl)){var a=[];V_(a,Yl,s,Kn(s)),$s(j1,a)}}function z1(s,a,c){s==="focusin"?(U_(),Gl=a,Yl=c,Gl.attachEvent("onpropertychange",B_)):s==="focusout"&&U_()}function U1(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return lh(Yl)}function B1(s,a){if(s==="click")return lh(a)}function F1(s,a){if(s==="input"||s==="change")return lh(a)}function H1(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Vn=typeof Object.is=="function"?Object.is:H1;function Kl(s,a){if(Vn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),h=Object.keys(a);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var m=c[h];if(!De.call(a,m)||!Vn(s[m],a[m]))return!1}return!0}function F_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function H_(s,a){var c=F_(s);s=0;for(var h;c;){if(c.nodeType===3){if(h=s+c.textContent.length,s<=a&&h>=a)return{node:c,offset:a-s};s=h}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=F_(c)}}function q_(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?q_(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function G_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Vi(s.document);a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)s=a.contentWindow;else break;a=Vi(s.document)}return a}function ug(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var q1=Xn&&"documentMode"in document&&11>=document.documentMode,bo=null,hg=null,Xl=null,fg=!1;function Y_(s,a,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;fg||bo==null||bo!==Vi(h)||(h=bo,"selectionStart"in h&&ug(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Xl&&Kl(Xl,h)||(Xl=h,h=Qh(hg,"onSelect"),0<h.length&&(a=new zi("onSelect","select",null,a,c),s.push({event:a,listeners:h}),a.target=bo)))}function da(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var vo={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionrun:da("Transition","TransitionRun"),transitionstart:da("Transition","TransitionStart"),transitioncancel:da("Transition","TransitionCancel"),transitionend:da("Transition","TransitionEnd")},dg={},K_={};Xn&&(K_=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function ga(s){if(dg[s])return dg[s];if(!vo[s])return s;var a=vo[s],c;for(c in a)if(a.hasOwnProperty(c)&&c in K_)return dg[s]=a[c];return s}var X_=ga("animationend"),W_=ga("animationiteration"),Q_=ga("animationstart"),G1=ga("transitionrun"),Y1=ga("transitionstart"),K1=ga("transitioncancel"),$_=ga("transitionend"),J_=new Map,gg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gg.push("scrollEnd");function yi(s,a){J_.set(s,a),ki(a,[s])}var ch=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Qn=[],xo=0,mg=0;function uh(){for(var s=xo,a=mg=xo=0;a<s;){var c=Qn[a];Qn[a++]=null;var h=Qn[a];Qn[a++]=null;var m=Qn[a];Qn[a++]=null;var y=Qn[a];if(Qn[a++]=null,h!==null&&m!==null){var x=h.pending;x===null?m.next=m:(m.next=x.next,x.next=m),h.pending=m}y!==0&&Z_(c,m,y)}}function hh(s,a,c,h){Qn[xo++]=s,Qn[xo++]=a,Qn[xo++]=c,Qn[xo++]=h,mg|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function pg(s,a,c,h){return hh(s,a,c,h),fh(s)}function ma(s,a){return hh(s,null,null,a),fh(s)}function Z_(s,a,c){s.lanes|=c;var h=s.alternate;h!==null&&(h.lanes|=c);for(var m=!1,y=s.return;y!==null;)y.childLanes|=c,h=y.alternate,h!==null&&(h.childLanes|=c),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(m=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,m&&a!==null&&(m=31-Ee(c),s=y.hiddenUpdates,h=s[m],h===null?s[m]=[a]:h.push(a),a.lane=c|536870912),y):null}function fh(s){if(50<pc)throw pc=0,Am=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var To={};function X1(s,a,c,h){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(s,a,c,h){return new X1(s,a,c,h)}function yg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function cs(s,a){var c=s.alternate;return c===null?(c=Ln(s.tag,a,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function t0(s,a){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,a=c.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function dh(s,a,c,h,m,y){var x=0;if(h=s,typeof s=="function")yg(s)&&(x=1);else if(typeof s=="string")x=ZR(s,c,ut.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case N:return s=Ln(31,c,a,m),s.elementType=N,s.lanes=y,s;case A:return pa(c.children,m,y,a);case R:x=8,m|=24;break;case O:return s=Ln(12,c,a,m|2),s.elementType=O,s.lanes=y,s;case U:return s=Ln(13,c,a,m),s.elementType=U,s.lanes=y,s;case Y:return s=Ln(19,c,a,m),s.elementType=Y,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:x=10;break t;case q:x=9;break t;case B:x=11;break t;case I:x=14;break t;case D:x=16,h=null;break t}x=29,c=Error(i(130,s===null?"null":typeof s,"")),h=null}return a=Ln(x,c,a,m),a.elementType=s,a.type=h,a.lanes=y,a}function pa(s,a,c,h){return s=Ln(7,s,h,a),s.lanes=c,s}function _g(s,a,c){return s=Ln(6,s,null,a),s.lanes=c,s}function e0(s){var a=Ln(18,null,null,0);return a.stateNode=s,a}function bg(s,a,c){return a=Ln(4,s.children!==null?s.children:[],s.key,a),a.lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var n0=new WeakMap;function $n(s,a){if(typeof s=="object"&&s!==null){var c=n0.get(s);return c!==void 0?c:(a={value:s,source:a,stack:Al(a)},n0.set(s,a),a)}return{value:s,source:a,stack:Al(a)}}var Eo=[],So=0,gh=null,Wl=0,Jn=[],Zn=0,er=null,Hi=1,qi="";function us(s,a){Eo[So++]=Wl,Eo[So++]=gh,gh=s,Wl=a}function i0(s,a,c){Jn[Zn++]=Hi,Jn[Zn++]=qi,Jn[Zn++]=er,er=s;var h=Hi;s=qi;var m=32-Ee(h)-1;h&=~(1<<m),c+=1;var y=32-Ee(a)+m;if(30<y){var x=m-m%5;y=(h&(1<<x)-1).toString(32),h>>=x,m-=x,Hi=1<<32-Ee(a)+m|c<<m|h,qi=y+s}else Hi=1<<y|c<<m|h,qi=s}function vg(s){s.return!==null&&(us(s,1),i0(s,1,0))}function xg(s){for(;s===gh;)gh=Eo[--So],Eo[So]=null,Wl=Eo[--So],Eo[So]=null;for(;s===er;)er=Jn[--Zn],Jn[Zn]=null,qi=Jn[--Zn],Jn[Zn]=null,Hi=Jn[--Zn],Jn[Zn]=null}function s0(s,a){Jn[Zn++]=Hi,Jn[Zn++]=qi,Jn[Zn++]=er,Hi=a.id,qi=a.overflow,er=s}var en=null,ue=null,qt=!1,nr=null,ti=!1,Tg=Error(i(519));function ir(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ql($n(a,s)),Tg}function r0(s){var a=s.stateNode,c=s.type,h=s.memoizedProps;switch(a[Ne]=s,a[Xe]=h,c){case"dialog":Pt("cancel",a),Pt("close",a);break;case"iframe":case"object":case"embed":Pt("load",a);break;case"video":case"audio":for(c=0;c<_c.length;c++)Pt(_c[c],a);break;case"source":Pt("error",a);break;case"img":case"image":case"link":Pt("error",a),Pt("load",a);break;case"details":Pt("toggle",a);break;case"input":Pt("invalid",a),Ku(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Pt("invalid",a);break;case"textarea":Pt("invalid",a),Xs(a,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||h.suppressHydrationWarning===!0||Tv(a.textContent,c)?(h.popover!=null&&(Pt("beforetoggle",a),Pt("toggle",a)),h.onScroll!=null&&Pt("scroll",a),h.onScrollEnd!=null&&Pt("scrollend",a),h.onClick!=null&&(a.onclick=fi),a=!0):a=!1,a||ir(s,!0)}function a0(s){for(en=s.return;en;)switch(en.tag){case 5:case 31:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:en=en.return}}function Ao(s){if(s!==en)return!1;if(!qt)return a0(s),qt=!0,!1;var a=s.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||Um(s.type,s.memoizedProps)),c=!c),c&&ue&&ir(s),a0(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ue=Mv(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ue=Mv(s)}else a===27?(a=ue,yr(s.type)?(s=Gm,Gm=null,ue=s):ue=a):ue=en?ni(s.stateNode.nextSibling):null;return!0}function ya(){ue=en=null,qt=!1}function Eg(){var s=nr;return s!==null&&(Rn===null?Rn=s:Rn.push.apply(Rn,s),nr=null),s}function Ql(s){nr===null?nr=[s]:nr.push(s)}var Sg=F(null),_a=null,hs=null;function sr(s,a,c){lt(Sg,a._currentValue),a._currentValue=c}function fs(s){s._currentValue=Sg.current,et(Sg)}function Ag(s,a,c){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===c)break;s=s.return}}function wg(s,a,c,h){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var y=m.dependencies;if(y!==null){var x=m.child;y=y.firstContext;t:for(;y!==null;){var C=y;y=m;for(var L=0;L<a.length;L++)if(C.context===a[L]){y.lanes|=c,C=y.alternate,C!==null&&(C.lanes|=c),Ag(y.return,c,s),h||(x=null);break t}y=C.next}}else if(m.tag===18){if(x=m.return,x===null)throw Error(i(341));x.lanes|=c,y=x.alternate,y!==null&&(y.lanes|=c),Ag(x,c,s),x=null}else x=m.child;if(x!==null)x.return=m;else for(x=m;x!==null;){if(x===s){x=null;break}if(m=x.sibling,m!==null){m.return=x.return,x=m;break}x=x.return}m=x}}function wo(s,a,c,h){s=null;for(var m=a,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var x=m.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var C=m.type;Vn(m.pendingProps.value,x.value)||(s!==null?s.push(C):s=[C])}}else if(m===Gt.current){if(x=m.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(Ec):s=[Ec])}m=m.return}s!==null&&wg(a,s,c,h),a.flags|=262144}function mh(s){for(s=s.firstContext;s!==null;){if(!Vn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ba(s){_a=s,hs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function nn(s){return o0(_a,s)}function ph(s,a){return _a===null&&ba(s),o0(s,a)}function o0(s,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},hs===null){if(s===null)throw Error(i(308));hs=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else hs=hs.next=a;return c}var W1=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(c,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(c){return c()})}},Q1=n.unstable_scheduleCallback,$1=n.unstable_NormalPriority,Pe={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rg(){return{controller:new W1,data:new Map,refCount:0}}function $l(s){s.refCount--,s.refCount===0&&Q1($1,function(){s.controller.abort()})}var Jl=null,Cg=0,Ro=0,Co=null;function J1(s,a){if(Jl===null){var c=Jl=[];Cg=0,Ro=Mm(),Co={status:"pending",value:void 0,then:function(h){c.push(h)}}}return Cg++,a.then(l0,l0),a}function l0(){if(--Cg===0&&Jl!==null){Co!==null&&(Co.status="fulfilled");var s=Jl;Jl=null,Ro=0,Co=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function Z1(s,a){var c=[],h={status:"pending",value:null,reason:null,then:function(m){c.push(m)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var m=0;m<c.length;m++)(0,c[m])(a)},function(m){for(h.status="rejected",h.reason=m,m=0;m<c.length;m++)(0,c[m])(void 0)}),h}var c0=$.S;$.S=function(s,a){Yb=_n(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&J1(s,a),c0!==null&&c0(s,a)};var va=F(null);function Ig(){var s=va.current;return s!==null?s:le.pooledCache}function yh(s,a){a===null?lt(va,va.current):lt(va,a.pool)}function u0(){var s=Ig();return s===null?null:{parent:Pe._currentValue,pool:s}}var Io=Error(i(460)),Dg=Error(i(474)),_h=Error(i(542)),bh={then:function(){}};function h0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function f0(s,a,c){switch(c=s[c],c===void 0?s.push(a):c!==a&&(a.then(fi,fi),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,g0(s),s;default:if(typeof a.status=="string")a.then(fi,fi);else{if(s=le,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=h}},function(h){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,g0(s),s}throw Ta=a,Io}}function xa(s){try{var a=s._init;return a(s._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Ta=c,Io):c}}var Ta=null;function d0(){if(Ta===null)throw Error(i(459));var s=Ta;return Ta=null,s}function g0(s){if(s===Io||s===_h)throw Error(i(483))}var Do=null,Zl=0;function vh(s){var a=Zl;return Zl+=1,Do===null&&(Do=[]),f0(Do,s,a)}function tc(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function xh(s,a){throw a.$$typeof===b?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function m0(s){function a(G,H){if(s){var X=G.deletions;X===null?(G.deletions=[H],G.flags|=16):X.push(H)}}function c(G,H){if(!s)return null;for(;H!==null;)a(G,H),H=H.sibling;return null}function h(G){for(var H=new Map;G!==null;)G.key!==null?H.set(G.key,G):H.set(G.index,G),G=G.sibling;return H}function m(G,H){return G=cs(G,H),G.index=0,G.sibling=null,G}function y(G,H,X){return G.index=X,s?(X=G.alternate,X!==null?(X=X.index,X<H?(G.flags|=67108866,H):X):(G.flags|=67108866,H)):(G.flags|=1048576,H)}function x(G){return s&&G.alternate===null&&(G.flags|=67108866),G}function C(G,H,X,nt){return H===null||H.tag!==6?(H=_g(X,G.mode,nt),H.return=G,H):(H=m(H,X),H.return=G,H)}function L(G,H,X,nt){var yt=X.type;return yt===A?tt(G,H,X.props.children,nt,X.key):H!==null&&(H.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===D&&xa(yt)===H.type)?(H=m(H,X.props),tc(H,X),H.return=G,H):(H=dh(X.type,X.key,X.props,null,G.mode,nt),tc(H,X),H.return=G,H)}function W(G,H,X,nt){return H===null||H.tag!==4||H.stateNode.containerInfo!==X.containerInfo||H.stateNode.implementation!==X.implementation?(H=bg(X,G.mode,nt),H.return=G,H):(H=m(H,X.children||[]),H.return=G,H)}function tt(G,H,X,nt,yt){return H===null||H.tag!==7?(H=pa(X,G.mode,nt,yt),H.return=G,H):(H=m(H,X),H.return=G,H)}function it(G,H,X){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=_g(""+H,G.mode,X),H.return=G,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case E:return X=dh(H.type,H.key,H.props,null,G.mode,X),tc(X,H),X.return=G,X;case w:return H=bg(H,G.mode,X),H.return=G,H;case D:return H=xa(H),it(G,H,X)}if(At(H)||z(H))return H=pa(H,G.mode,X,null),H.return=G,H;if(typeof H.then=="function")return it(G,vh(H),X);if(H.$$typeof===j)return it(G,ph(G,H),X);xh(G,H)}return null}function Q(G,H,X,nt){var yt=H!==null?H.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return yt!==null?null:C(G,H,""+X,nt);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case E:return X.key===yt?L(G,H,X,nt):null;case w:return X.key===yt?W(G,H,X,nt):null;case D:return X=xa(X),Q(G,H,X,nt)}if(At(X)||z(X))return yt!==null?null:tt(G,H,X,nt,null);if(typeof X.then=="function")return Q(G,H,vh(X),nt);if(X.$$typeof===j)return Q(G,H,ph(G,X),nt);xh(G,X)}return null}function Z(G,H,X,nt,yt){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return G=G.get(X)||null,C(H,G,""+nt,yt);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case E:return G=G.get(nt.key===null?X:nt.key)||null,L(H,G,nt,yt);case w:return G=G.get(nt.key===null?X:nt.key)||null,W(H,G,nt,yt);case D:return nt=xa(nt),Z(G,H,X,nt,yt)}if(At(nt)||z(nt))return G=G.get(X)||null,tt(H,G,nt,yt,null);if(typeof nt.then=="function")return Z(G,H,X,vh(nt),yt);if(nt.$$typeof===j)return Z(G,H,X,ph(H,nt),yt);xh(H,nt)}return null}function gt(G,H,X,nt){for(var yt=null,Kt=null,pt=H,Nt=H=0,zt=null;pt!==null&&Nt<X.length;Nt++){pt.index>Nt?(zt=pt,pt=null):zt=pt.sibling;var Xt=Q(G,pt,X[Nt],nt);if(Xt===null){pt===null&&(pt=zt);break}s&&pt&&Xt.alternate===null&&a(G,pt),H=y(Xt,H,Nt),Kt===null?yt=Xt:Kt.sibling=Xt,Kt=Xt,pt=zt}if(Nt===X.length)return c(G,pt),qt&&us(G,Nt),yt;if(pt===null){for(;Nt<X.length;Nt++)pt=it(G,X[Nt],nt),pt!==null&&(H=y(pt,H,Nt),Kt===null?yt=pt:Kt.sibling=pt,Kt=pt);return qt&&us(G,Nt),yt}for(pt=h(pt);Nt<X.length;Nt++)zt=Z(pt,G,Nt,X[Nt],nt),zt!==null&&(s&&zt.alternate!==null&&pt.delete(zt.key===null?Nt:zt.key),H=y(zt,H,Nt),Kt===null?yt=zt:Kt.sibling=zt,Kt=zt);return s&&pt.forEach(function(Tr){return a(G,Tr)}),qt&&us(G,Nt),yt}function vt(G,H,X,nt){if(X==null)throw Error(i(151));for(var yt=null,Kt=null,pt=H,Nt=H=0,zt=null,Xt=X.next();pt!==null&&!Xt.done;Nt++,Xt=X.next()){pt.index>Nt?(zt=pt,pt=null):zt=pt.sibling;var Tr=Q(G,pt,Xt.value,nt);if(Tr===null){pt===null&&(pt=zt);break}s&&pt&&Tr.alternate===null&&a(G,pt),H=y(Tr,H,Nt),Kt===null?yt=Tr:Kt.sibling=Tr,Kt=Tr,pt=zt}if(Xt.done)return c(G,pt),qt&&us(G,Nt),yt;if(pt===null){for(;!Xt.done;Nt++,Xt=X.next())Xt=it(G,Xt.value,nt),Xt!==null&&(H=y(Xt,H,Nt),Kt===null?yt=Xt:Kt.sibling=Xt,Kt=Xt);return qt&&us(G,Nt),yt}for(pt=h(pt);!Xt.done;Nt++,Xt=X.next())Xt=Z(pt,G,Nt,Xt.value,nt),Xt!==null&&(s&&Xt.alternate!==null&&pt.delete(Xt.key===null?Nt:Xt.key),H=y(Xt,H,Nt),Kt===null?yt=Xt:Kt.sibling=Xt,Kt=Xt);return s&&pt.forEach(function(uC){return a(G,uC)}),qt&&us(G,Nt),yt}function oe(G,H,X,nt){if(typeof X=="object"&&X!==null&&X.type===A&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case E:t:{for(var yt=X.key;H!==null;){if(H.key===yt){if(yt=X.type,yt===A){if(H.tag===7){c(G,H.sibling),nt=m(H,X.props.children),nt.return=G,G=nt;break t}}else if(H.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===D&&xa(yt)===H.type){c(G,H.sibling),nt=m(H,X.props),tc(nt,X),nt.return=G,G=nt;break t}c(G,H);break}else a(G,H);H=H.sibling}X.type===A?(nt=pa(X.props.children,G.mode,nt,X.key),nt.return=G,G=nt):(nt=dh(X.type,X.key,X.props,null,G.mode,nt),tc(nt,X),nt.return=G,G=nt)}return x(G);case w:t:{for(yt=X.key;H!==null;){if(H.key===yt)if(H.tag===4&&H.stateNode.containerInfo===X.containerInfo&&H.stateNode.implementation===X.implementation){c(G,H.sibling),nt=m(H,X.children||[]),nt.return=G,G=nt;break t}else{c(G,H);break}else a(G,H);H=H.sibling}nt=bg(X,G.mode,nt),nt.return=G,G=nt}return x(G);case D:return X=xa(X),oe(G,H,X,nt)}if(At(X))return gt(G,H,X,nt);if(z(X)){if(yt=z(X),typeof yt!="function")throw Error(i(150));return X=yt.call(X),vt(G,H,X,nt)}if(typeof X.then=="function")return oe(G,H,vh(X),nt);if(X.$$typeof===j)return oe(G,H,ph(G,X),nt);xh(G,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,H!==null&&H.tag===6?(c(G,H.sibling),nt=m(H,X),nt.return=G,G=nt):(c(G,H),nt=_g(X,G.mode,nt),nt.return=G,G=nt),x(G)):c(G,H)}return function(G,H,X,nt){try{Zl=0;var yt=oe(G,H,X,nt);return Do=null,yt}catch(pt){if(pt===Io||pt===_h)throw pt;var Kt=Ln(29,pt,null,G.mode);return Kt.lanes=nt,Kt.return=G,Kt}finally{}}}var Ea=m0(!0),p0=m0(!1),rr=!1;function Mg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ng(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ar(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function or(s,a,c){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,($t&2)!==0){var m=h.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),h.pending=a,a=fh(s),Z_(s,null,c),a}return hh(s,h,a,c),fh(s)}function ec(s,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,c|=h,a.lanes=c,Cl(s,c)}}function Og(s,a){var c=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var m=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var x={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?m=y=x:y=y.next=x,c=c.next}while(c!==null);y===null?m=y=a:y=y.next=a}else m=y=a;c={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}var kg=!1;function nc(){if(kg){var s=Co;if(s!==null)throw s}}function ic(s,a,c,h){kg=!1;var m=s.updateQueue;rr=!1;var y=m.firstBaseUpdate,x=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var L=C,W=L.next;L.next=null,x===null?y=W:x.next=W,x=L;var tt=s.alternate;tt!==null&&(tt=tt.updateQueue,C=tt.lastBaseUpdate,C!==x&&(C===null?tt.firstBaseUpdate=W:C.next=W,tt.lastBaseUpdate=L))}if(y!==null){var it=m.baseState;x=0,tt=W=L=null,C=y;do{var Q=C.lane&-536870913,Z=Q!==C.lane;if(Z?(jt&Q)===Q:(h&Q)===Q){Q!==0&&Q===Ro&&(kg=!0),tt!==null&&(tt=tt.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var gt=s,vt=C;Q=a;var oe=c;switch(vt.tag){case 1:if(gt=vt.payload,typeof gt=="function"){it=gt.call(oe,it,Q);break t}it=gt;break t;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=vt.payload,Q=typeof gt=="function"?gt.call(oe,it,Q):gt,Q==null)break t;it=_({},it,Q);break t;case 2:rr=!0}}Q=C.callback,Q!==null&&(s.flags|=64,Z&&(s.flags|=8192),Z=m.callbacks,Z===null?m.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:C.tag,payload:C.payload,callback:C.callback,next:null},tt===null?(W=tt=Z,L=it):tt=tt.next=Z,x|=Q;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,m.lastBaseUpdate=Z,m.shared.pending=null}}while(!0);tt===null&&(L=it),m.baseState=L,m.firstBaseUpdate=W,m.lastBaseUpdate=tt,y===null&&(m.shared.lanes=0),fr|=x,s.lanes=x,s.memoizedState=it}}function y0(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function _0(s,a){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)y0(c[s],a)}var Mo=F(null),Th=F(0);function b0(s,a){s=xs,lt(Th,s),lt(Mo,a),xs=s|a.baseLanes}function Pg(){lt(Th,xs),lt(Mo,Mo.current)}function Vg(){xs=Th.current,et(Mo),et(Th)}var jn=F(null),ei=null;function lr(s){var a=s.alternate;lt(Ae,Ae.current&1),lt(jn,s),ei===null&&(a===null||Mo.current!==null||a.memoizedState!==null)&&(ei=s)}function Lg(s){lt(Ae,Ae.current),lt(jn,s),ei===null&&(ei=s)}function v0(s){s.tag===22?(lt(Ae,Ae.current),lt(jn,s),ei===null&&(ei=s)):cr()}function cr(){lt(Ae,Ae.current),lt(jn,jn.current)}function zn(s){et(jn),ei===s&&(ei=null),et(Ae)}var Ae=F(0);function Eh(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Hm(c)||qm(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ds=0,Mt=null,re=null,Ve=null,Sh=!1,No=!1,Sa=!1,Ah=0,sc=0,Oo=null,tR=0;function ve(){throw Error(i(321))}function jg(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!Vn(s[c],a[c]))return!1;return!0}function zg(s,a,c,h,m,y){return ds=y,Mt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,$.H=s===null||s.memoizedState===null?ib:tm,Sa=!1,y=c(h,m),Sa=!1,No&&(y=T0(a,c,h,m)),x0(s),y}function x0(s){$.H=oc;var a=re!==null&&re.next!==null;if(ds=0,Ve=re=Mt=null,Sh=!1,sc=0,Oo=null,a)throw Error(i(300));s===null||Le||(s=s.dependencies,s!==null&&mh(s)&&(Le=!0))}function T0(s,a,c,h){Mt=s;var m=0;do{if(No&&(Oo=null),sc=0,No=!1,25<=m)throw Error(i(301));if(m+=1,Ve=re=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}$.H=sb,y=a(c,h)}while(No);return y}function eR(){var s=$.H,a=s.useState()[0];return a=typeof a.then=="function"?rc(a):a,s=s.useState()[0],(re!==null?re.memoizedState:null)!==s&&(Mt.flags|=1024),a}function Ug(){var s=Ah!==0;return Ah=0,s}function Bg(s,a,c){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~c}function Fg(s){if(Sh){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Sh=!1}ds=0,Ve=re=Mt=null,No=!1,sc=Ah=0,Oo=null}function vn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?Mt.memoizedState=Ve=s:Ve=Ve.next=s,Ve}function we(){if(re===null){var s=Mt.alternate;s=s!==null?s.memoizedState:null}else s=re.next;var a=Ve===null?Mt.memoizedState:Ve.next;if(a!==null)Ve=a,re=s;else{if(s===null)throw Mt.alternate===null?Error(i(467)):Error(i(310));re=s,s={memoizedState:re.memoizedState,baseState:re.baseState,baseQueue:re.baseQueue,queue:re.queue,next:null},Ve===null?Mt.memoizedState=Ve=s:Ve=Ve.next=s}return Ve}function wh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rc(s){var a=sc;return sc+=1,Oo===null&&(Oo=[]),s=f0(Oo,s,a),a=Mt,(Ve===null?a.memoizedState:Ve.next)===null&&(a=a.alternate,$.H=a===null||a.memoizedState===null?ib:tm),s}function Rh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return rc(s);if(s.$$typeof===j)return nn(s)}throw Error(i(438,String(s)))}function Hg(s){var a=null,c=Mt.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var h=Mt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=wh(),Mt.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(s),h=0;h<s;h++)c[h]=V;return a.index++,c}function gs(s,a){return typeof a=="function"?a(s):a}function Ch(s){var a=we();return qg(a,re,s)}function qg(s,a,c){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var m=s.baseQueue,y=h.pending;if(y!==null){if(m!==null){var x=m.next;m.next=y.next,y.next=x}a.baseQueue=m=y,h.pending=null}if(y=s.baseState,m===null)s.memoizedState=y;else{a=m.next;var C=x=null,L=null,W=a,tt=!1;do{var it=W.lane&-536870913;if(it!==W.lane?(jt&it)===it:(ds&it)===it){var Q=W.revertLane;if(Q===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),it===Ro&&(tt=!0);else if((ds&Q)===Q){W=W.next,Q===Ro&&(tt=!0);continue}else it={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(C=L=it,x=y):L=L.next=it,Mt.lanes|=Q,fr|=Q;it=W.action,Sa&&c(y,it),y=W.hasEagerState?W.eagerState:c(y,it)}else Q={lane:it,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(C=L=Q,x=y):L=L.next=Q,Mt.lanes|=it,fr|=it;W=W.next}while(W!==null&&W!==a);if(L===null?x=y:L.next=C,!Vn(y,s.memoizedState)&&(Le=!0,tt&&(c=Co,c!==null)))throw c;s.memoizedState=y,s.baseState=x,s.baseQueue=L,h.lastRenderedState=y}return m===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Gg(s){var a=we(),c=a.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=s;var h=c.dispatch,m=c.pending,y=a.memoizedState;if(m!==null){c.pending=null;var x=m=m.next;do y=s(y,x.action),x=x.next;while(x!==m);Vn(y,a.memoizedState)||(Le=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),c.lastRenderedState=y}return[y,h]}function E0(s,a,c){var h=Mt,m=we(),y=qt;if(y){if(c===void 0)throw Error(i(407));c=c()}else c=a();var x=!Vn((re||m).memoizedState,c);if(x&&(m.memoizedState=c,Le=!0),m=m.queue,Xg(w0.bind(null,h,m,s),[s]),m.getSnapshot!==a||x||Ve!==null&&Ve.memoizedState.tag&1){if(h.flags|=2048,ko(9,{destroy:void 0},A0.bind(null,h,m,c,a),null),le===null)throw Error(i(349));y||(ds&127)!==0||S0(h,a,c)}return c}function S0(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},a=Mt.updateQueue,a===null?(a=wh(),Mt.updateQueue=a,a.stores=[s]):(c=a.stores,c===null?a.stores=[s]:c.push(s))}function A0(s,a,c,h){a.value=c,a.getSnapshot=h,R0(a)&&C0(s)}function w0(s,a,c){return c(function(){R0(a)&&C0(s)})}function R0(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!Vn(s,c)}catch{return!0}}function C0(s){var a=ma(s,2);a!==null&&Cn(a,s,2)}function Yg(s){var a=vn();if(typeof s=="function"){var c=s;if(s=c(),Sa){Gn(!0);try{c()}finally{Gn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:s},a}function I0(s,a,c,h){return s.baseState=c,qg(s,re,typeof h=="function"?h:gs)}function nR(s,a,c,h,m){if(Mh(s))throw Error(i(485));if(s=a.action,s!==null){var y={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){y.listeners.push(x)}};$.T!==null?c(!0):y.isTransition=!1,h(y),c=a.pending,c===null?(y.next=a.pending=y,D0(a,y)):(y.next=c.next,a.pending=c.next=y)}}function D0(s,a){var c=a.action,h=a.payload,m=s.state;if(a.isTransition){var y=$.T,x={};$.T=x;try{var C=c(m,h),L=$.S;L!==null&&L(x,C),M0(s,a,C)}catch(W){Kg(s,a,W)}finally{y!==null&&x.types!==null&&(y.types=x.types),$.T=y}}else try{y=c(m,h),M0(s,a,y)}catch(W){Kg(s,a,W)}}function M0(s,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){N0(s,a,h)},function(h){return Kg(s,a,h)}):N0(s,a,c)}function N0(s,a,c){a.status="fulfilled",a.value=c,O0(a),s.state=c,a=s.pending,a!==null&&(c=a.next,c===a?s.pending=null:(c=c.next,a.next=c,D0(s,c)))}function Kg(s,a,c){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=c,O0(a),a=a.next;while(a!==h)}s.action=null}function O0(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function k0(s,a){return a}function P0(s,a){if(qt){var c=le.formState;if(c!==null){t:{var h=Mt;if(qt){if(ue){e:{for(var m=ue,y=ti;m.nodeType!==8;){if(!y){m=null;break e}if(m=ni(m.nextSibling),m===null){m=null;break e}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){ue=ni(m.nextSibling),h=m.data==="F!";break t}}ir(h)}h=!1}h&&(a=c[0])}}return c=vn(),c.memoizedState=c.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:k0,lastRenderedState:a},c.queue=h,c=tb.bind(null,Mt,h),h.dispatch=c,h=Yg(!1),y=Zg.bind(null,Mt,!1,h.queue),h=vn(),m={state:a,dispatch:null,action:s,pending:null},h.queue=m,c=nR.bind(null,Mt,m,y,c),m.dispatch=c,h.memoizedState=s,[a,c,!1]}function V0(s){var a=we();return L0(a,re,s)}function L0(s,a,c){if(a=qg(s,a,k0)[0],s=Ch(gs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=rc(a)}catch(x){throw x===Io?_h:x}else h=a;a=we();var m=a.queue,y=m.dispatch;return c!==a.memoizedState&&(Mt.flags|=2048,ko(9,{destroy:void 0},iR.bind(null,m,c),null)),[h,y,s]}function iR(s,a){s.action=a}function j0(s){var a=we(),c=re;if(c!==null)return L0(a,c,s);we(),a=a.memoizedState,c=we();var h=c.queue.dispatch;return c.memoizedState=s,[a,h,!1]}function ko(s,a,c,h){return s={tag:s,create:c,deps:h,inst:a,next:null},a=Mt.updateQueue,a===null&&(a=wh(),Mt.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=s.next=s:(h=c.next,c.next=s,s.next=h,a.lastEffect=s),s}function z0(){return we().memoizedState}function Ih(s,a,c,h){var m=vn();Mt.flags|=s,m.memoizedState=ko(1|a,{destroy:void 0},c,h===void 0?null:h)}function Dh(s,a,c,h){var m=we();h=h===void 0?null:h;var y=m.memoizedState.inst;re!==null&&h!==null&&jg(h,re.memoizedState.deps)?m.memoizedState=ko(a,y,c,h):(Mt.flags|=s,m.memoizedState=ko(1|a,y,c,h))}function U0(s,a){Ih(8390656,8,s,a)}function Xg(s,a){Dh(2048,8,s,a)}function sR(s){Mt.flags|=4;var a=Mt.updateQueue;if(a===null)a=wh(),Mt.updateQueue=a,a.events=[s];else{var c=a.events;c===null?a.events=[s]:c.push(s)}}function B0(s){var a=we().memoizedState;return sR({ref:a,nextImpl:s}),function(){if(($t&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function F0(s,a){return Dh(4,2,s,a)}function H0(s,a){return Dh(4,4,s,a)}function q0(s,a){if(typeof a=="function"){s=s();var c=a(s);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function G0(s,a,c){c=c!=null?c.concat([s]):null,Dh(4,4,q0.bind(null,a,s),c)}function Wg(){}function Y0(s,a){var c=we();a=a===void 0?null:a;var h=c.memoizedState;return a!==null&&jg(a,h[1])?h[0]:(c.memoizedState=[s,a],s)}function K0(s,a){var c=we();a=a===void 0?null:a;var h=c.memoizedState;if(a!==null&&jg(a,h[1]))return h[0];if(h=s(),Sa){Gn(!0);try{s()}finally{Gn(!1)}}return c.memoizedState=[h,a],h}function Qg(s,a,c){return c===void 0||(ds&1073741824)!==0&&(jt&261930)===0?s.memoizedState=a:(s.memoizedState=c,s=Xb(),Mt.lanes|=s,fr|=s,c)}function X0(s,a,c,h){return Vn(c,a)?c:Mo.current!==null?(s=Qg(s,c,h),Vn(s,a)||(Le=!0),s):(ds&42)===0||(ds&1073741824)!==0&&(jt&261930)===0?(Le=!0,s.memoizedState=c):(s=Xb(),Mt.lanes|=s,fr|=s,a)}function W0(s,a,c,h,m){var y=at.p;at.p=y!==0&&8>y?y:8;var x=$.T,C={};$.T=C,Zg(s,!1,a,c);try{var L=m(),W=$.S;if(W!==null&&W(C,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var tt=Z1(L,h);ac(s,a,tt,Fn(s))}else ac(s,a,h,Fn(s))}catch(it){ac(s,a,{then:function(){},status:"rejected",reason:it},Fn())}finally{at.p=y,x!==null&&C.types!==null&&(x.types=C.types),$.T=x}}function rR(){}function $g(s,a,c,h){if(s.tag!==5)throw Error(i(476));var m=Q0(s).queue;W0(s,m,a,dt,c===null?rR:function(){return $0(s),c(h)})}function Q0(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:dt,baseState:dt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:dt},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:c},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function $0(s){var a=Q0(s);a.next===null&&(a=s.alternate.memoizedState),ac(s,a.next.queue,{},Fn())}function Jg(){return nn(Ec)}function J0(){return we().memoizedState}function Z0(){return we().memoizedState}function aR(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var c=Fn();s=ar(c);var h=or(a,s,c);h!==null&&(Cn(h,a,c),ec(h,a,c)),a={cache:Rg()},s.payload=a;return}a=a.return}}function oR(s,a,c){var h=Fn();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Mh(s)?eb(a,c):(c=pg(s,a,c,h),c!==null&&(Cn(c,s,h),nb(c,a,h)))}function tb(s,a,c){var h=Fn();ac(s,a,c,h)}function ac(s,a,c,h){var m={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Mh(s))eb(a,m);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var x=a.lastRenderedState,C=y(x,c);if(m.hasEagerState=!0,m.eagerState=C,Vn(C,x))return hh(s,a,m,0),le===null&&uh(),!1}catch{}finally{}if(c=pg(s,a,m,h),c!==null)return Cn(c,s,h),nb(c,a,h),!0}return!1}function Zg(s,a,c,h){if(h={lane:2,revertLane:Mm(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Mh(s)){if(a)throw Error(i(479))}else a=pg(s,c,h,2),a!==null&&Cn(a,s,2)}function Mh(s){var a=s.alternate;return s===Mt||a!==null&&a===Mt}function eb(s,a){No=Sh=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function nb(s,a,c){if((c&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,c|=h,a.lanes=c,Cl(s,c)}}var oc={readContext:nn,use:Rh,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useLayoutEffect:ve,useInsertionEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useSyncExternalStore:ve,useId:ve,useHostTransitionStatus:ve,useFormState:ve,useActionState:ve,useOptimistic:ve,useMemoCache:ve,useCacheRefresh:ve};oc.useEffectEvent=ve;var ib={readContext:nn,use:Rh,useCallback:function(s,a){return vn().memoizedState=[s,a===void 0?null:a],s},useContext:nn,useEffect:U0,useImperativeHandle:function(s,a,c){c=c!=null?c.concat([s]):null,Ih(4194308,4,q0.bind(null,a,s),c)},useLayoutEffect:function(s,a){return Ih(4194308,4,s,a)},useInsertionEffect:function(s,a){Ih(4,2,s,a)},useMemo:function(s,a){var c=vn();a=a===void 0?null:a;var h=s();if(Sa){Gn(!0);try{s()}finally{Gn(!1)}}return c.memoizedState=[h,a],h},useReducer:function(s,a,c){var h=vn();if(c!==void 0){var m=c(a);if(Sa){Gn(!0);try{c(a)}finally{Gn(!1)}}}else m=a;return h.memoizedState=h.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},h.queue=s,s=s.dispatch=oR.bind(null,Mt,s),[h.memoizedState,s]},useRef:function(s){var a=vn();return s={current:s},a.memoizedState=s},useState:function(s){s=Yg(s);var a=s.queue,c=tb.bind(null,Mt,a);return a.dispatch=c,[s.memoizedState,c]},useDebugValue:Wg,useDeferredValue:function(s,a){var c=vn();return Qg(c,s,a)},useTransition:function(){var s=Yg(!1);return s=W0.bind(null,Mt,s.queue,!0,!1),vn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,c){var h=Mt,m=vn();if(qt){if(c===void 0)throw Error(i(407));c=c()}else{if(c=a(),le===null)throw Error(i(349));(jt&127)!==0||S0(h,a,c)}m.memoizedState=c;var y={value:c,getSnapshot:a};return m.queue=y,U0(w0.bind(null,h,y,s),[s]),h.flags|=2048,ko(9,{destroy:void 0},A0.bind(null,h,y,c,a),null),c},useId:function(){var s=vn(),a=le.identifierPrefix;if(qt){var c=qi,h=Hi;c=(h&~(1<<32-Ee(h)-1)).toString(32)+c,a="_"+a+"R_"+c,c=Ah++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=tR++,a="_"+a+"r_"+c.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:Jg,useFormState:P0,useActionState:P0,useOptimistic:function(s){var a=vn();a.memoizedState=a.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Zg.bind(null,Mt,!0,c),c.dispatch=a,[s,a]},useMemoCache:Hg,useCacheRefresh:function(){return vn().memoizedState=aR.bind(null,Mt)},useEffectEvent:function(s){var a=vn(),c={impl:s};return a.memoizedState=c,function(){if(($t&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},tm={readContext:nn,use:Rh,useCallback:Y0,useContext:nn,useEffect:Xg,useImperativeHandle:G0,useInsertionEffect:F0,useLayoutEffect:H0,useMemo:K0,useReducer:Ch,useRef:z0,useState:function(){return Ch(gs)},useDebugValue:Wg,useDeferredValue:function(s,a){var c=we();return X0(c,re.memoizedState,s,a)},useTransition:function(){var s=Ch(gs)[0],a=we().memoizedState;return[typeof s=="boolean"?s:rc(s),a]},useSyncExternalStore:E0,useId:J0,useHostTransitionStatus:Jg,useFormState:V0,useActionState:V0,useOptimistic:function(s,a){var c=we();return I0(c,re,s,a)},useMemoCache:Hg,useCacheRefresh:Z0};tm.useEffectEvent=B0;var sb={readContext:nn,use:Rh,useCallback:Y0,useContext:nn,useEffect:Xg,useImperativeHandle:G0,useInsertionEffect:F0,useLayoutEffect:H0,useMemo:K0,useReducer:Gg,useRef:z0,useState:function(){return Gg(gs)},useDebugValue:Wg,useDeferredValue:function(s,a){var c=we();return re===null?Qg(c,s,a):X0(c,re.memoizedState,s,a)},useTransition:function(){var s=Gg(gs)[0],a=we().memoizedState;return[typeof s=="boolean"?s:rc(s),a]},useSyncExternalStore:E0,useId:J0,useHostTransitionStatus:Jg,useFormState:j0,useActionState:j0,useOptimistic:function(s,a){var c=we();return re!==null?I0(c,re,s,a):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:Hg,useCacheRefresh:Z0};sb.useEffectEvent=B0;function em(s,a,c,h){a=s.memoizedState,c=c(h,a),c=c==null?a:_({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var nm={enqueueSetState:function(s,a,c){s=s._reactInternals;var h=Fn(),m=ar(h);m.payload=a,c!=null&&(m.callback=c),a=or(s,m,h),a!==null&&(Cn(a,s,h),ec(a,s,h))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var h=Fn(),m=ar(h);m.tag=1,m.payload=a,c!=null&&(m.callback=c),a=or(s,m,h),a!==null&&(Cn(a,s,h),ec(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=Fn(),h=ar(c);h.tag=2,a!=null&&(h.callback=a),a=or(s,h,c),a!==null&&(Cn(a,s,c),ec(a,s,c))}};function rb(s,a,c,h,m,y,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,y,x):a.prototype&&a.prototype.isPureReactComponent?!Kl(c,h)||!Kl(m,y):!0}function ab(s,a,c,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,h),a.state!==s&&nm.enqueueReplaceState(a,a.state,null)}function Aa(s,a){var c=a;if("ref"in a){c={};for(var h in a)h!=="ref"&&(c[h]=a[h])}if(s=s.defaultProps){c===a&&(c=_({},c));for(var m in s)c[m]===void 0&&(c[m]=s[m])}return c}function ob(s){ch(s)}function lb(s){console.error(s)}function cb(s){ch(s)}function Nh(s,a){try{var c=s.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function ub(s,a,c){try{var h=s.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function im(s,a,c){return c=ar(c),c.tag=3,c.payload={element:null},c.callback=function(){Nh(s,a)},c}function hb(s){return s=ar(s),s.tag=3,s}function fb(s,a,c,h){var m=c.type.getDerivedStateFromError;if(typeof m=="function"){var y=h.value;s.payload=function(){return m(y)},s.callback=function(){ub(a,c,h)}}var x=c.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(s.callback=function(){ub(a,c,h),typeof m!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var C=h.stack;this.componentDidCatch(h.value,{componentStack:C!==null?C:""})})}function lR(s,a,c,h,m){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=c.alternate,a!==null&&wo(a,c,m,!0),c=jn.current,c!==null){switch(c.tag){case 31:case 13:return ei===null?qh():c.alternate===null&&xe===0&&(xe=3),c.flags&=-257,c.flags|=65536,c.lanes=m,h===bh?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([h]):a.add(h),Cm(s,h,m)),!1;case 22:return c.flags|=65536,h===bh?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([h]):c.add(h)),Cm(s,h,m)),!1}throw Error(i(435,c.tag))}return Cm(s,h,m),qh(),!1}if(qt)return a=jn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,h!==Tg&&(s=Error(i(422),{cause:h}),Ql($n(s,c)))):(h!==Tg&&(a=Error(i(423),{cause:h}),Ql($n(a,c))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,h=$n(h,c),m=im(s.stateNode,h,m),Og(s,m),xe!==4&&(xe=2)),!1;var y=Error(i(520),{cause:h});if(y=$n(y,c),mc===null?mc=[y]:mc.push(y),xe!==4&&(xe=2),a===null)return!0;h=$n(h,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,s=m&-m,c.lanes|=s,s=im(c.stateNode,h,s),Og(c,s),!1;case 1:if(a=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(dr===null||!dr.has(y))))return c.flags|=65536,m&=-m,c.lanes|=m,m=hb(m),fb(m,s,c,h),Og(c,m),!1}c=c.return}while(c!==null);return!1}var sm=Error(i(461)),Le=!1;function sn(s,a,c,h){a.child=s===null?p0(a,null,c,h):Ea(a,s.child,c,h)}function db(s,a,c,h,m){c=c.render;var y=a.ref;if("ref"in h){var x={};for(var C in h)C!=="ref"&&(x[C]=h[C])}else x=h;return ba(a),h=zg(s,a,c,x,y,m),C=Ug(),s!==null&&!Le?(Bg(s,a,m),ms(s,a,m)):(qt&&C&&vg(a),a.flags|=1,sn(s,a,h,m),a.child)}function gb(s,a,c,h,m){if(s===null){var y=c.type;return typeof y=="function"&&!yg(y)&&y.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=y,mb(s,a,y,h,m)):(s=dh(c.type,null,h,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(y=s.child,!fm(s,m)){var x=y.memoizedProps;if(c=c.compare,c=c!==null?c:Kl,c(x,h)&&s.ref===a.ref)return ms(s,a,m)}return a.flags|=1,s=cs(y,h),s.ref=a.ref,s.return=a,a.child=s}function mb(s,a,c,h,m){if(s!==null){var y=s.memoizedProps;if(Kl(y,h)&&s.ref===a.ref)if(Le=!1,a.pendingProps=h=y,fm(s,m))(s.flags&131072)!==0&&(Le=!0);else return a.lanes=s.lanes,ms(s,a,m)}return rm(s,a,c,h,m)}function pb(s,a,c,h){var m=h.children,y=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,s!==null){for(h=a.child=s.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;h=m&~y}else h=0,a.child=null;return yb(s,a,y,c,h)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&yh(a,y!==null?y.cachePool:null),y!==null?b0(a,y):Pg(),v0(a);else return h=a.lanes=536870912,yb(s,a,y!==null?y.baseLanes|c:c,c,h)}else y!==null?(yh(a,y.cachePool),b0(a,y),cr(),a.memoizedState=null):(s!==null&&yh(a,null),Pg(),cr());return sn(s,a,m,c),a.child}function lc(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function yb(s,a,c,h,m){var y=Ig();return y=y===null?null:{parent:Pe._currentValue,pool:y},a.memoizedState={baseLanes:c,cachePool:y},s!==null&&yh(a,null),Pg(),v0(a),s!==null&&wo(s,a,h,!0),a.childLanes=m,null}function Oh(s,a){return a=Ph({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function _b(s,a,c){return Ea(a,s.child,null,c),s=Oh(a,a.pendingProps),s.flags|=2,zn(a),a.memoizedState=null,s}function cR(s,a,c){var h=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(qt){if(h.mode==="hidden")return s=Oh(a,h),a.lanes=536870912,lc(null,s);if(Lg(a),(s=ue)?(s=Dv(s,ti),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:er!==null?{id:Hi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},c=e0(s),c.return=a,a.child=c,en=a,ue=null)):s=null,s===null)throw ir(a);return a.lanes=536870912,null}return Oh(a,h)}var y=s.memoizedState;if(y!==null){var x=y.dehydrated;if(Lg(a),m)if(a.flags&256)a.flags&=-257,a=_b(s,a,c);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(Le||wo(s,a,c,!1),m=(c&s.childLanes)!==0,Le||m){if(h=le,h!==null&&(x=Il(h,c),x!==0&&x!==y.retryLane))throw y.retryLane=x,ma(s,x),Cn(h,s,x),sm;qh(),a=_b(s,a,c)}else s=y.treeContext,ue=ni(x.nextSibling),en=a,qt=!0,nr=null,ti=!1,s!==null&&s0(a,s),a=Oh(a,h),a.flags|=4096;return a}return s=cs(s.child,{mode:h.mode,children:h.children}),s.ref=a.ref,a.child=s,s.return=a,s}function kh(s,a){var c=a.ref;if(c===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(s===null||s.ref!==c)&&(a.flags|=4194816)}}function rm(s,a,c,h,m){return ba(a),c=zg(s,a,c,h,void 0,m),h=Ug(),s!==null&&!Le?(Bg(s,a,m),ms(s,a,m)):(qt&&h&&vg(a),a.flags|=1,sn(s,a,c,m),a.child)}function bb(s,a,c,h,m,y){return ba(a),a.updateQueue=null,c=T0(a,h,c,m),x0(s),h=Ug(),s!==null&&!Le?(Bg(s,a,y),ms(s,a,y)):(qt&&h&&vg(a),a.flags|=1,sn(s,a,c,y),a.child)}function vb(s,a,c,h,m){if(ba(a),a.stateNode===null){var y=To,x=c.contextType;typeof x=="object"&&x!==null&&(y=nn(x)),y=new c(h,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=nm,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=h,y.state=a.memoizedState,y.refs={},Mg(a),x=c.contextType,y.context=typeof x=="object"&&x!==null?nn(x):To,y.state=a.memoizedState,x=c.getDerivedStateFromProps,typeof x=="function"&&(em(a,c,x,h),y.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(x=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),x!==y.state&&nm.enqueueReplaceState(y,y.state,null),ic(a,h,y,m),nc(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){y=a.stateNode;var C=a.memoizedProps,L=Aa(c,C);y.props=L;var W=y.context,tt=c.contextType;x=To,typeof tt=="object"&&tt!==null&&(x=nn(tt));var it=c.getDerivedStateFromProps;tt=typeof it=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,tt||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||W!==x)&&ab(a,y,h,x),rr=!1;var Q=a.memoizedState;y.state=Q,ic(a,h,y,m),nc(),W=a.memoizedState,C||Q!==W||rr?(typeof it=="function"&&(em(a,c,it,h),W=a.memoizedState),(L=rr||rb(a,c,L,h,Q,W,x))?(tt||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=W),y.props=h,y.state=W,y.context=x,h=L):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{y=a.stateNode,Ng(s,a),x=a.memoizedProps,tt=Aa(c,x),y.props=tt,it=a.pendingProps,Q=y.context,W=c.contextType,L=To,typeof W=="object"&&W!==null&&(L=nn(W)),C=c.getDerivedStateFromProps,(W=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==it||Q!==L)&&ab(a,y,h,L),rr=!1,Q=a.memoizedState,y.state=Q,ic(a,h,y,m),nc();var Z=a.memoizedState;x!==it||Q!==Z||rr||s!==null&&s.dependencies!==null&&mh(s.dependencies)?(typeof C=="function"&&(em(a,c,C,h),Z=a.memoizedState),(tt=rr||rb(a,c,tt,h,Q,Z,L)||s!==null&&s.dependencies!==null&&mh(s.dependencies))?(W||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,Z,L),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,Z,L)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||x===s.memoizedProps&&Q===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&Q===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=Z),y.props=h,y.state=Z,y.context=L,h=tt):(typeof y.componentDidUpdate!="function"||x===s.memoizedProps&&Q===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===s.memoizedProps&&Q===s.memoizedState||(a.flags|=1024),h=!1)}return y=h,kh(s,a),h=(a.flags&128)!==0,y||h?(y=a.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,s!==null&&h?(a.child=Ea(a,s.child,null,m),a.child=Ea(a,null,c,m)):sn(s,a,c,m),a.memoizedState=y.state,s=a.child):s=ms(s,a,m),s}function xb(s,a,c,h){return ya(),a.flags|=256,sn(s,a,c,h),a.child}var am={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function om(s){return{baseLanes:s,cachePool:u0()}}function lm(s,a,c){return s=s!==null?s.childLanes&~c:0,a&&(s|=Bn),s}function Tb(s,a,c){var h=a.pendingProps,m=!1,y=(a.flags&128)!==0,x;if((x=y)||(x=s!==null&&s.memoizedState===null?!1:(Ae.current&2)!==0),x&&(m=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,s===null){if(qt){if(m?lr(a):cr(),(s=ue)?(s=Dv(s,ti),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:er!==null?{id:Hi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},c=e0(s),c.return=a,a.child=c,en=a,ue=null)):s=null,s===null)throw ir(a);return qm(s)?a.lanes=32:a.lanes=536870912,null}var C=h.children;return h=h.fallback,m?(cr(),m=a.mode,C=Ph({mode:"hidden",children:C},m),h=pa(h,m,c,null),C.return=a,h.return=a,C.sibling=h,a.child=C,h=a.child,h.memoizedState=om(c),h.childLanes=lm(s,x,c),a.memoizedState=am,lc(null,h)):(lr(a),cm(a,C))}var L=s.memoizedState;if(L!==null&&(C=L.dehydrated,C!==null)){if(y)a.flags&256?(lr(a),a.flags&=-257,a=um(s,a,c)):a.memoizedState!==null?(cr(),a.child=s.child,a.flags|=128,a=null):(cr(),C=h.fallback,m=a.mode,h=Ph({mode:"visible",children:h.children},m),C=pa(C,m,c,null),C.flags|=2,h.return=a,C.return=a,h.sibling=C,a.child=h,Ea(a,s.child,null,c),h=a.child,h.memoizedState=om(c),h.childLanes=lm(s,x,c),a.memoizedState=am,a=lc(null,h));else if(lr(a),qm(C)){if(x=C.nextSibling&&C.nextSibling.dataset,x)var W=x.dgst;x=W,h=Error(i(419)),h.stack="",h.digest=x,Ql({value:h,source:null,stack:null}),a=um(s,a,c)}else if(Le||wo(s,a,c,!1),x=(c&s.childLanes)!==0,Le||x){if(x=le,x!==null&&(h=Il(x,c),h!==0&&h!==L.retryLane))throw L.retryLane=h,ma(s,h),Cn(x,s,h),sm;Hm(C)||qh(),a=um(s,a,c)}else Hm(C)?(a.flags|=192,a.child=s.child,a=null):(s=L.treeContext,ue=ni(C.nextSibling),en=a,qt=!0,nr=null,ti=!1,s!==null&&s0(a,s),a=cm(a,h.children),a.flags|=4096);return a}return m?(cr(),C=h.fallback,m=a.mode,L=s.child,W=L.sibling,h=cs(L,{mode:"hidden",children:h.children}),h.subtreeFlags=L.subtreeFlags&65011712,W!==null?C=cs(W,C):(C=pa(C,m,c,null),C.flags|=2),C.return=a,h.return=a,h.sibling=C,a.child=h,lc(null,h),h=a.child,C=s.child.memoizedState,C===null?C=om(c):(m=C.cachePool,m!==null?(L=Pe._currentValue,m=m.parent!==L?{parent:L,pool:L}:m):m=u0(),C={baseLanes:C.baseLanes|c,cachePool:m}),h.memoizedState=C,h.childLanes=lm(s,x,c),a.memoizedState=am,lc(s.child,h)):(lr(a),c=s.child,s=c.sibling,c=cs(c,{mode:"visible",children:h.children}),c.return=a,c.sibling=null,s!==null&&(x=a.deletions,x===null?(a.deletions=[s],a.flags|=16):x.push(s)),a.child=c,a.memoizedState=null,c)}function cm(s,a){return a=Ph({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Ph(s,a){return s=Ln(22,s,null,a),s.lanes=0,s}function um(s,a,c){return Ea(a,s.child,null,c),s=cm(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Eb(s,a,c){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),Ag(s.return,a,c)}function hm(s,a,c,h,m,y){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:m,treeForkCount:y}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=h,x.tail=c,x.tailMode=m,x.treeForkCount=y)}function Sb(s,a,c){var h=a.pendingProps,m=h.revealOrder,y=h.tail;h=h.children;var x=Ae.current,C=(x&2)!==0;if(C?(x=x&1|2,a.flags|=128):x&=1,lt(Ae,x),sn(s,a,h,c),h=qt?Wl:0,!C&&s!==null&&(s.flags&128)!==0)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Eb(s,c,a);else if(s.tag===19)Eb(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(m){case"forwards":for(c=a.child,m=null;c!==null;)s=c.alternate,s!==null&&Eh(s)===null&&(m=c),c=c.sibling;c=m,c===null?(m=a.child,a.child=null):(m=c.sibling,c.sibling=null),hm(a,!1,m,c,y,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&Eh(s)===null){a.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}hm(a,!0,c,null,y,h);break;case"together":hm(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function ms(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),fr|=a.lanes,(c&a.childLanes)===0)if(s!==null){if(wo(s,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,c=cs(s,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,c=c.sibling=cs(s,s.pendingProps),c.return=a;c.sibling=null}return a.child}function fm(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&mh(s)))}function uR(s,a,c){switch(a.tag){case 3:Be(a,a.stateNode.containerInfo),sr(a,Pe,s.memoizedState.cache),ya();break;case 27:case 5:$r(a);break;case 4:Be(a,a.stateNode.containerInfo);break;case 10:sr(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Lg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(lr(a),a.flags|=128,null):(c&a.child.childLanes)!==0?Tb(s,a,c):(lr(a),s=ms(s,a,c),s!==null?s.sibling:null);lr(a);break;case 19:var m=(s.flags&128)!==0;if(h=(c&a.childLanes)!==0,h||(wo(s,a,c,!1),h=(c&a.childLanes)!==0),m){if(h)return Sb(s,a,c);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),lt(Ae,Ae.current),h)break;return null;case 22:return a.lanes=0,pb(s,a,c,a.pendingProps);case 24:sr(a,Pe,s.memoizedState.cache)}return ms(s,a,c)}function Ab(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps)Le=!0;else{if(!fm(s,c)&&(a.flags&128)===0)return Le=!1,uR(s,a,c);Le=(s.flags&131072)!==0}else Le=!1,qt&&(a.flags&1048576)!==0&&i0(a,Wl,a.index);switch(a.lanes=0,a.tag){case 16:t:{var h=a.pendingProps;if(s=xa(a.elementType),a.type=s,typeof s=="function")yg(s)?(h=Aa(s,h),a.tag=1,a=vb(null,a,s,h,c)):(a.tag=0,a=rm(null,a,s,h,c));else{if(s!=null){var m=s.$$typeof;if(m===B){a.tag=11,a=db(null,a,s,h,c);break t}else if(m===I){a.tag=14,a=gb(null,a,s,h,c);break t}}throw a=Ot(s)||s,Error(i(306,a,""))}}return a;case 0:return rm(s,a,a.type,a.pendingProps,c);case 1:return h=a.type,m=Aa(h,a.pendingProps),vb(s,a,h,m,c);case 3:t:{if(Be(a,a.stateNode.containerInfo),s===null)throw Error(i(387));h=a.pendingProps;var y=a.memoizedState;m=y.element,Ng(s,a),ic(a,h,null,c);var x=a.memoizedState;if(h=x.cache,sr(a,Pe,h),h!==y.cache&&wg(a,[Pe],c,!0),nc(),h=x.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=xb(s,a,h,c);break t}else if(h!==m){m=$n(Error(i(424)),a),Ql(m),a=xb(s,a,h,c);break t}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ue=ni(s.firstChild),en=a,qt=!0,nr=null,ti=!0,c=p0(a,null,h,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(ya(),h===m){a=ms(s,a,c);break t}sn(s,a,h,c)}a=a.child}return a;case 26:return kh(s,a),s===null?(c=Vv(a.type,null,a.pendingProps,null))?a.memoizedState=c:qt||(c=a.type,s=a.pendingProps,h=$h(Tt.current).createElement(c),h[Ne]=a,h[Xe]=s,rn(h,c,s),Oe(h),a.stateNode=h):a.memoizedState=Vv(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return $r(a),s===null&&qt&&(h=a.stateNode=Ov(a.type,a.pendingProps,Tt.current),en=a,ti=!0,m=ue,yr(a.type)?(Gm=m,ue=ni(h.firstChild)):ue=m),sn(s,a,a.pendingProps.children,c),kh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&qt&&((m=h=ue)&&(h=UR(h,a.type,a.pendingProps,ti),h!==null?(a.stateNode=h,en=a,ue=ni(h.firstChild),ti=!1,m=!0):m=!1),m||ir(a)),$r(a),m=a.type,y=a.pendingProps,x=s!==null?s.memoizedProps:null,h=y.children,Um(m,y)?h=null:x!==null&&Um(m,x)&&(a.flags|=32),a.memoizedState!==null&&(m=zg(s,a,eR,null,null,c),Ec._currentValue=m),kh(s,a),sn(s,a,h,c),a.child;case 6:return s===null&&qt&&((s=c=ue)&&(c=BR(c,a.pendingProps,ti),c!==null?(a.stateNode=c,en=a,ue=null,s=!0):s=!1),s||ir(a)),null;case 13:return Tb(s,a,c);case 4:return Be(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=Ea(a,null,h,c):sn(s,a,h,c),a.child;case 11:return db(s,a,a.type,a.pendingProps,c);case 7:return sn(s,a,a.pendingProps,c),a.child;case 8:return sn(s,a,a.pendingProps.children,c),a.child;case 12:return sn(s,a,a.pendingProps.children,c),a.child;case 10:return h=a.pendingProps,sr(a,a.type,h.value),sn(s,a,h.children,c),a.child;case 9:return m=a.type._context,h=a.pendingProps.children,ba(a),m=nn(m),h=h(m),a.flags|=1,sn(s,a,h,c),a.child;case 14:return gb(s,a,a.type,a.pendingProps,c);case 15:return mb(s,a,a.type,a.pendingProps,c);case 19:return Sb(s,a,c);case 31:return cR(s,a,c);case 22:return pb(s,a,c,a.pendingProps);case 24:return ba(a),h=nn(Pe),s===null?(m=Ig(),m===null&&(m=le,y=Rg(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=c),m=y),a.memoizedState={parent:h,cache:m},Mg(a),sr(a,Pe,m)):((s.lanes&c)!==0&&(Ng(s,a),ic(a,null,null,c),nc()),m=s.memoizedState,y=a.memoizedState,m.parent!==h?(m={parent:h,cache:h},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),sr(a,Pe,h)):(h=y.cache,sr(a,Pe,h),h!==m.cache&&wg(a,[Pe],c,!0))),sn(s,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function ps(s){s.flags|=4}function dm(s,a,c,h,m){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(m&335544128)===m)if(s.stateNode.complete)s.flags|=8192;else if(Jb())s.flags|=8192;else throw Ta=bh,Dg}else s.flags&=-16777217}function wb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Bv(a))if(Jb())s.flags|=8192;else throw Ta=bh,Dg}function Vh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Fu():536870912,s.lanes|=a,jo|=a)}function cc(s,a){if(!qt)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function he(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,h=0;if(a)for(var m=s.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=h,s.childLanes=c,a}function hR(s,a,c){var h=a.pendingProps;switch(xg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(a),null;case 1:return he(a),null;case 3:return c=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),fs(Pe),ge(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Ao(a)?ps(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Eg())),he(a),null;case 26:var m=a.type,y=a.memoizedState;return s===null?(ps(a),y!==null?(he(a),wb(a,y)):(he(a),dm(a,m,null,h,c))):y?y!==s.memoizedState?(ps(a),he(a),wb(a,y)):(he(a),a.flags&=-16777217):(s=s.memoizedProps,s!==h&&ps(a),he(a),dm(a,m,s,h,c)),null;case 27:if(no(a),c=Tt.current,m=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&ps(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return he(a),null}s=ut.current,Ao(a)?r0(a):(s=Ov(m,h,c),a.stateNode=s,ps(a))}return he(a),null;case 5:if(no(a),m=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&ps(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return he(a),null}if(y=ut.current,Ao(a))r0(a);else{var x=$h(Tt.current);switch(y){case 1:y=x.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=x.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=x.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=x.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=x.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof h.is=="string"?x.createElement("select",{is:h.is}):x.createElement("select"),h.multiple?y.multiple=!0:h.size&&(y.size=h.size);break;default:y=typeof h.is=="string"?x.createElement(m,{is:h.is}):x.createElement(m)}}y[Ne]=a,y[Xe]=h;t:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)y.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break t;for(;x.sibling===null;){if(x.return===null||x.return===a)break t;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=y;t:switch(rn(y,m,h),m){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}h&&ps(a)}}return he(a),dm(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,c),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&ps(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(s=Tt.current,Ao(a)){if(s=a.stateNode,c=a.memoizedProps,h=null,m=en,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}s[Ne]=a,s=!!(s.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||Tv(s.nodeValue,c)),s||ir(a,!0)}else s=$h(s).createTextNode(h),s[Ne]=a,a.stateNode=s}return he(a),null;case 31:if(c=a.memoizedState,s===null||s.memoizedState!==null){if(h=Ao(a),c!==null){if(s===null){if(!h)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Ne]=a}else ya(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;he(a),s=!1}else c=Eg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=c),s=!0;if(!s)return a.flags&256?(zn(a),a):(zn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return he(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=Ao(a),h!==null&&h.dehydrated!==null){if(s===null){if(!m)throw Error(i(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Ne]=a}else ya(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;he(a),m=!1}else m=Eg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(zn(a),a):(zn(a),null)}return zn(a),(a.flags&128)!==0?(a.lanes=c,a):(c=h!==null,s=s!==null&&s.memoizedState!==null,c&&(h=a.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool),y=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==m&&(h.flags|=2048)),c!==s&&c&&(a.child.flags|=8192),Vh(a,a.updateQueue),he(a),null);case 4:return ge(),s===null&&Pm(a.stateNode.containerInfo),he(a),null;case 10:return fs(a.type),he(a),null;case 19:if(et(Ae),h=a.memoizedState,h===null)return he(a),null;if(m=(a.flags&128)!==0,y=h.rendering,y===null)if(m)cc(h,!1);else{if(xe!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(y=Eh(s),y!==null){for(a.flags|=128,cc(h,!1),s=y.updateQueue,a.updateQueue=s,Vh(a,s),a.subtreeFlags=0,s=c,c=a.child;c!==null;)t0(c,s),c=c.sibling;return lt(Ae,Ae.current&1|2),qt&&us(a,h.treeForkCount),a.child}s=s.sibling}h.tail!==null&&_n()>Bh&&(a.flags|=128,m=!0,cc(h,!1),a.lanes=4194304)}else{if(!m)if(s=Eh(y),s!==null){if(a.flags|=128,m=!0,s=s.updateQueue,a.updateQueue=s,Vh(a,s),cc(h,!0),h.tail===null&&h.tailMode==="hidden"&&!y.alternate&&!qt)return he(a),null}else 2*_n()-h.renderingStartTime>Bh&&c!==536870912&&(a.flags|=128,m=!0,cc(h,!1),a.lanes=4194304);h.isBackwards?(y.sibling=a.child,a.child=y):(s=h.last,s!==null?s.sibling=y:a.child=y,h.last=y)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=_n(),s.sibling=null,c=Ae.current,lt(Ae,m?c&1|2:c&1),qt&&us(a,h.treeForkCount),s):(he(a),null);case 22:case 23:return zn(a),Vg(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(c&536870912)!==0&&(a.flags&128)===0&&(he(a),a.subtreeFlags&6&&(a.flags|=8192)):he(a),c=a.updateQueue,c!==null&&Vh(a,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==c&&(a.flags|=2048),s!==null&&et(va),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),fs(Pe),he(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function fR(s,a){switch(xg(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return fs(Pe),ge(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return no(a),null;case 31:if(a.memoizedState!==null){if(zn(a),a.alternate===null)throw Error(i(340));ya()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(zn(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));ya()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return et(Ae),null;case 4:return ge(),null;case 10:return fs(a.type),null;case 22:case 23:return zn(a),Vg(),s!==null&&et(va),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return fs(Pe),null;case 25:return null;default:return null}}function Rb(s,a){switch(xg(a),a.tag){case 3:fs(Pe),ge();break;case 26:case 27:case 5:no(a);break;case 4:ge();break;case 31:a.memoizedState!==null&&zn(a);break;case 13:zn(a);break;case 19:et(Ae);break;case 10:fs(a.type);break;case 22:case 23:zn(a),Vg(),s!==null&&et(va);break;case 24:fs(Pe)}}function uc(s,a){try{var c=a.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var m=h.next;c=m;do{if((c.tag&s)===s){h=void 0;var y=c.create,x=c.inst;h=y(),x.destroy=h}c=c.next}while(c!==m)}}catch(C){ne(a,a.return,C)}}function ur(s,a,c){try{var h=a.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var y=m.next;h=y;do{if((h.tag&s)===s){var x=h.inst,C=x.destroy;if(C!==void 0){x.destroy=void 0,m=a;var L=c,W=C;try{W()}catch(tt){ne(m,L,tt)}}}h=h.next}while(h!==y)}}catch(tt){ne(a,a.return,tt)}}function Cb(s){var a=s.updateQueue;if(a!==null){var c=s.stateNode;try{_0(a,c)}catch(h){ne(s,s.return,h)}}}function Ib(s,a,c){c.props=Aa(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(h){ne(s,a,h)}}function hc(s,a){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof c=="function"?s.refCleanup=c(h):c.current=h}}catch(m){ne(s,a,m)}}function Gi(s,a){var c=s.ref,h=s.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(m){ne(s,a,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(m){ne(s,a,m)}else c.current=null}function Db(s){var a=s.type,c=s.memoizedProps,h=s.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break t;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(m){ne(s,s.return,m)}}function gm(s,a,c){try{var h=s.stateNode;kR(h,s.type,c,a),h[Xe]=a}catch(m){ne(s,s.return,m)}}function Mb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&yr(s.type)||s.tag===4}function mm(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||Mb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&yr(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function pm(s,a,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(s),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=fi));else if(h!==4&&(h===27&&yr(s.type)&&(c=s.stateNode,a=null),s=s.child,s!==null))for(pm(s,a,c),s=s.sibling;s!==null;)pm(s,a,c),s=s.sibling}function Lh(s,a,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(h!==4&&(h===27&&yr(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(Lh(s,a,c),s=s.sibling;s!==null;)Lh(s,a,c),s=s.sibling}function Nb(s){var a=s.stateNode,c=s.memoizedProps;try{for(var h=s.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);rn(a,h,c),a[Ne]=s,a[Xe]=c}catch(y){ne(s,s.return,y)}}var ys=!1,je=!1,ym=!1,Ob=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function dR(s,a){if(s=s.containerInfo,jm=rf,s=G_(s),ug(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else t:{c=(c=s.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var m=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break t}var x=0,C=-1,L=-1,W=0,tt=0,it=s,Q=null;e:for(;;){for(var Z;it!==c||m!==0&&it.nodeType!==3||(C=x+m),it!==y||h!==0&&it.nodeType!==3||(L=x+h),it.nodeType===3&&(x+=it.nodeValue.length),(Z=it.firstChild)!==null;)Q=it,it=Z;for(;;){if(it===s)break e;if(Q===c&&++W===m&&(C=x),Q===y&&++tt===h&&(L=x),(Z=it.nextSibling)!==null)break;it=Q,Q=it.parentNode}it=Z}c=C===-1||L===-1?null:{start:C,end:L}}else c=null}c=c||{start:0,end:0}}else c=null;for(zm={focusedElem:s,selectionRange:c},rf=!1,Qe=a;Qe!==null;)if(a=Qe,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Qe=s;else for(;Qe!==null;){switch(a=Qe,y=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(c=0;c<s.length;c++)m=s[c],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,c=a,m=y.memoizedProps,y=y.memoizedState,h=c.stateNode;try{var gt=Aa(c.type,m);s=h.getSnapshotBeforeUpdate(gt,y),h.__reactInternalSnapshotBeforeUpdate=s}catch(vt){ne(c,c.return,vt)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,c=s.nodeType,c===9)Fm(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Fm(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Qe=s;break}Qe=a.return}}function kb(s,a,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:bs(s,c),h&4&&uc(5,c);break;case 1:if(bs(s,c),h&4)if(s=c.stateNode,a===null)try{s.componentDidMount()}catch(x){ne(c,c.return,x)}else{var m=Aa(c.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(m,a,s.__reactInternalSnapshotBeforeUpdate)}catch(x){ne(c,c.return,x)}}h&64&&Cb(c),h&512&&hc(c,c.return);break;case 3:if(bs(s,c),h&64&&(s=c.updateQueue,s!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{_0(s,a)}catch(x){ne(c,c.return,x)}}break;case 27:a===null&&h&4&&Nb(c);case 26:case 5:bs(s,c),a===null&&h&4&&Db(c),h&512&&hc(c,c.return);break;case 12:bs(s,c);break;case 31:bs(s,c),h&4&&Lb(s,c);break;case 13:bs(s,c),h&4&&jb(s,c),h&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=TR.bind(null,c),FR(s,c))));break;case 22:if(h=c.memoizedState!==null||ys,!h){a=a!==null&&a.memoizedState!==null||je,m=ys;var y=je;ys=h,(je=a)&&!y?vs(s,c,(c.subtreeFlags&8772)!==0):bs(s,c),ys=m,je=y}break;case 30:break;default:bs(s,c)}}function Pb(s){var a=s.alternate;a!==null&&(s.alternate=null,Pb(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&oo(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var pe=null,Sn=!1;function _s(s,a,c){for(c=c.child;c!==null;)Vb(s,a,c),c=c.sibling}function Vb(s,a,c){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(li,c)}catch{}switch(c.tag){case 26:je||Gi(c,a),_s(s,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:je||Gi(c,a);var h=pe,m=Sn;yr(c.type)&&(pe=c.stateNode,Sn=!1),_s(s,a,c),vc(c.stateNode),pe=h,Sn=m;break;case 5:je||Gi(c,a);case 6:if(h=pe,m=Sn,pe=null,_s(s,a,c),pe=h,Sn=m,pe!==null)if(Sn)try{(pe.nodeType===9?pe.body:pe.nodeName==="HTML"?pe.ownerDocument.body:pe).removeChild(c.stateNode)}catch(y){ne(c,a,y)}else try{pe.removeChild(c.stateNode)}catch(y){ne(c,a,y)}break;case 18:pe!==null&&(Sn?(s=pe,Cv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),Yo(s)):Cv(pe,c.stateNode));break;case 4:h=pe,m=Sn,pe=c.stateNode.containerInfo,Sn=!0,_s(s,a,c),pe=h,Sn=m;break;case 0:case 11:case 14:case 15:ur(2,c,a),je||ur(4,c,a),_s(s,a,c);break;case 1:je||(Gi(c,a),h=c.stateNode,typeof h.componentWillUnmount=="function"&&Ib(c,a,h)),_s(s,a,c);break;case 21:_s(s,a,c);break;case 22:je=(h=je)||c.memoizedState!==null,_s(s,a,c),je=h;break;default:_s(s,a,c)}}function Lb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Yo(s)}catch(c){ne(a,a.return,c)}}}function jb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Yo(s)}catch(c){ne(a,a.return,c)}}function gR(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Ob),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Ob),a;default:throw Error(i(435,s.tag))}}function jh(s,a){var c=gR(s);a.forEach(function(h){if(!c.has(h)){c.add(h);var m=ER.bind(null,s,h);h.then(m,m)}})}function An(s,a){var c=a.deletions;if(c!==null)for(var h=0;h<c.length;h++){var m=c[h],y=s,x=a,C=x;t:for(;C!==null;){switch(C.tag){case 27:if(yr(C.type)){pe=C.stateNode,Sn=!1;break t}break;case 5:pe=C.stateNode,Sn=!1;break t;case 3:case 4:pe=C.stateNode.containerInfo,Sn=!0;break t}C=C.return}if(pe===null)throw Error(i(160));Vb(y,x,m),pe=null,Sn=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)zb(a,s),a=a.sibling}var _i=null;function zb(s,a){var c=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:An(a,s),wn(s),h&4&&(ur(3,s,s.return),uc(3,s),ur(5,s,s.return));break;case 1:An(a,s),wn(s),h&512&&(je||c===null||Gi(c,c.return)),h&64&&ys&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var m=_i;if(An(a,s),wn(s),h&512&&(je||c===null||Gi(c,c.return)),h&4){var y=c!==null?c.memoizedState:null;if(h=s.memoizedState,c===null)if(h===null)if(s.stateNode===null){t:{h=s.type,c=s.memoizedProps,m=m.ownerDocument||m;e:switch(h){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Mi]||y[Ne]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(h),m.head.insertBefore(y,m.querySelector("head > title"))),rn(y,h,c),y[Ne]=s,Oe(y),h=y;break t;case"link":var x=zv("link","href",m).get(h+(c.href||""));if(x){for(var C=0;C<x.length;C++)if(y=x[C],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){x.splice(C,1);break e}}y=m.createElement(h),rn(y,h,c),m.head.appendChild(y);break;case"meta":if(x=zv("meta","content",m).get(h+(c.content||""))){for(C=0;C<x.length;C++)if(y=x[C],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){x.splice(C,1);break e}}y=m.createElement(h),rn(y,h,c),m.head.appendChild(y);break;default:throw Error(i(468,h))}y[Ne]=s,Oe(y),h=y}s.stateNode=h}else Uv(m,s.type,s.stateNode);else s.stateNode=jv(m,h,s.memoizedProps);else y!==h?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,h===null?Uv(m,s.type,s.stateNode):jv(m,h,s.memoizedProps)):h===null&&s.stateNode!==null&&gm(s,s.memoizedProps,c.memoizedProps)}break;case 27:An(a,s),wn(s),h&512&&(je||c===null||Gi(c,c.return)),c!==null&&h&4&&gm(s,s.memoizedProps,c.memoizedProps);break;case 5:if(An(a,s),wn(s),h&512&&(je||c===null||Gi(c,c.return)),s.flags&32){m=s.stateNode;try{En(m,"")}catch(gt){ne(s,s.return,gt)}}h&4&&s.stateNode!=null&&(m=s.memoizedProps,gm(s,m,c!==null?c.memoizedProps:m)),h&1024&&(ym=!0);break;case 6:if(An(a,s),wn(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,c=s.stateNode;try{c.nodeValue=h}catch(gt){ne(s,s.return,gt)}}break;case 3:if(tf=null,m=_i,_i=Jh(a.containerInfo),An(a,s),_i=m,wn(s),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Yo(a.containerInfo)}catch(gt){ne(s,s.return,gt)}ym&&(ym=!1,Ub(s));break;case 4:h=_i,_i=Jh(s.stateNode.containerInfo),An(a,s),wn(s),_i=h;break;case 12:An(a,s),wn(s);break;case 31:An(a,s),wn(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,jh(s,h)));break;case 13:An(a,s),wn(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Uh=_n()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,jh(s,h)));break;case 22:m=s.memoizedState!==null;var L=c!==null&&c.memoizedState!==null,W=ys,tt=je;if(ys=W||m,je=tt||L,An(a,s),je=tt,ys=W,wn(s),h&8192)t:for(a=s.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(c===null||L||ys||je||wa(s)),c=null,a=s;;){if(a.tag===5||a.tag===26){if(c===null){L=c=a;try{if(y=L.stateNode,m)x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{C=L.stateNode;var it=L.memoizedProps.style,Q=it!=null&&it.hasOwnProperty("display")?it.display:null;C.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(gt){ne(L,L.return,gt)}}}else if(a.tag===6){if(c===null){L=a;try{L.stateNode.nodeValue=m?"":L.memoizedProps}catch(gt){ne(L,L.return,gt)}}}else if(a.tag===18){if(c===null){L=a;try{var Z=L.stateNode;m?Iv(Z,!0):Iv(L.stateNode,!1)}catch(gt){ne(L,L.return,gt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break t;for(;a.sibling===null;){if(a.return===null||a.return===s)break t;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,jh(s,c))));break;case 19:An(a,s),wn(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,jh(s,h)));break;case 30:break;case 21:break;default:An(a,s),wn(s)}}function wn(s){var a=s.flags;if(a&2){try{for(var c,h=s.return;h!==null;){if(Mb(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var m=c.stateNode,y=mm(s);Lh(s,y,m);break;case 5:var x=c.stateNode;c.flags&32&&(En(x,""),c.flags&=-33);var C=mm(s);Lh(s,C,x);break;case 3:case 4:var L=c.stateNode.containerInfo,W=mm(s);pm(s,W,L);break;default:throw Error(i(161))}}catch(tt){ne(s,s.return,tt)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Ub(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Ub(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function bs(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)kb(s,a.alternate,a),a=a.sibling}function wa(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:ur(4,a,a.return),wa(a);break;case 1:Gi(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&Ib(a,a.return,c),wa(a);break;case 27:vc(a.stateNode);case 26:case 5:Gi(a,a.return),wa(a);break;case 22:a.memoizedState===null&&wa(a);break;case 30:wa(a);break;default:wa(a)}s=s.sibling}}function vs(s,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,m=s,y=a,x=y.flags;switch(y.tag){case 0:case 11:case 15:vs(m,y,c),uc(4,y);break;case 1:if(vs(m,y,c),h=y,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(W){ne(h,h.return,W)}if(h=y,m=h.updateQueue,m!==null){var C=h.stateNode;try{var L=m.shared.hiddenCallbacks;if(L!==null)for(m.shared.hiddenCallbacks=null,m=0;m<L.length;m++)y0(L[m],C)}catch(W){ne(h,h.return,W)}}c&&x&64&&Cb(y),hc(y,y.return);break;case 27:Nb(y);case 26:case 5:vs(m,y,c),c&&h===null&&x&4&&Db(y),hc(y,y.return);break;case 12:vs(m,y,c);break;case 31:vs(m,y,c),c&&x&4&&Lb(m,y);break;case 13:vs(m,y,c),c&&x&4&&jb(m,y);break;case 22:y.memoizedState===null&&vs(m,y,c),hc(y,y.return);break;case 30:break;default:vs(m,y,c)}a=a.sibling}}function _m(s,a){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&$l(c))}function bm(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&$l(s))}function bi(s,a,c,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Bb(s,a,c,h),a=a.sibling}function Bb(s,a,c,h){var m=a.flags;switch(a.tag){case 0:case 11:case 15:bi(s,a,c,h),m&2048&&uc(9,a);break;case 1:bi(s,a,c,h);break;case 3:bi(s,a,c,h),m&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&$l(s)));break;case 12:if(m&2048){bi(s,a,c,h),s=a.stateNode;try{var y=a.memoizedProps,x=y.id,C=y.onPostCommit;typeof C=="function"&&C(x,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(L){ne(a,a.return,L)}}else bi(s,a,c,h);break;case 31:bi(s,a,c,h);break;case 13:bi(s,a,c,h);break;case 23:break;case 22:y=a.stateNode,x=a.alternate,a.memoizedState!==null?y._visibility&2?bi(s,a,c,h):fc(s,a):y._visibility&2?bi(s,a,c,h):(y._visibility|=2,Po(s,a,c,h,(a.subtreeFlags&10256)!==0||!1)),m&2048&&_m(x,a);break;case 24:bi(s,a,c,h),m&2048&&bm(a.alternate,a);break;default:bi(s,a,c,h)}}function Po(s,a,c,h,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=s,x=a,C=c,L=h,W=x.flags;switch(x.tag){case 0:case 11:case 15:Po(y,x,C,L,m),uc(8,x);break;case 23:break;case 22:var tt=x.stateNode;x.memoizedState!==null?tt._visibility&2?Po(y,x,C,L,m):fc(y,x):(tt._visibility|=2,Po(y,x,C,L,m)),m&&W&2048&&_m(x.alternate,x);break;case 24:Po(y,x,C,L,m),m&&W&2048&&bm(x.alternate,x);break;default:Po(y,x,C,L,m)}a=a.sibling}}function fc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=s,h=a,m=h.flags;switch(h.tag){case 22:fc(c,h),m&2048&&_m(h.alternate,h);break;case 24:fc(c,h),m&2048&&bm(h.alternate,h);break;default:fc(c,h)}a=a.sibling}}var dc=8192;function Vo(s,a,c){if(s.subtreeFlags&dc)for(s=s.child;s!==null;)Fb(s,a,c),s=s.sibling}function Fb(s,a,c){switch(s.tag){case 26:Vo(s,a,c),s.flags&dc&&s.memoizedState!==null&&tC(c,_i,s.memoizedState,s.memoizedProps);break;case 5:Vo(s,a,c);break;case 3:case 4:var h=_i;_i=Jh(s.stateNode.containerInfo),Vo(s,a,c),_i=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=dc,dc=16777216,Vo(s,a,c),dc=h):Vo(s,a,c));break;default:Vo(s,a,c)}}function Hb(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function gc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];Qe=h,Gb(h,s)}Hb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)qb(s),s=s.sibling}function qb(s){switch(s.tag){case 0:case 11:case 15:gc(s),s.flags&2048&&ur(9,s,s.return);break;case 3:gc(s);break;case 12:gc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,zh(s)):gc(s);break;default:gc(s)}}function zh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];Qe=h,Gb(h,s)}Hb(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:ur(8,a,a.return),zh(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,zh(a));break;default:zh(a)}s=s.sibling}}function Gb(s,a){for(;Qe!==null;){var c=Qe;switch(c.tag){case 0:case 11:case 15:ur(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:$l(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,Qe=h;else t:for(c=s;Qe!==null;){h=Qe;var m=h.sibling,y=h.return;if(Pb(h),h===c){Qe=null;break t}if(m!==null){m.return=y,Qe=m;break t}Qe=y}}}var mR={getCacheForType:function(s){var a=nn(Pe),c=a.data.get(s);return c===void 0&&(c=s(),a.data.set(s,c)),c},cacheSignal:function(){return nn(Pe).controller.signal}},pR=typeof WeakMap=="function"?WeakMap:Map,$t=0,le=null,kt=null,jt=0,ee=0,Un=null,hr=!1,Lo=!1,vm=!1,xs=0,xe=0,fr=0,Ra=0,xm=0,Bn=0,jo=0,mc=null,Rn=null,Tm=!1,Uh=0,Yb=0,Bh=1/0,Fh=null,dr=null,He=0,gr=null,zo=null,Ts=0,Em=0,Sm=null,Kb=null,pc=0,Am=null;function Fn(){return($t&2)!==0&&jt!==0?jt&-jt:$.T!==null?Mm():Hu()}function Xb(){if(Bn===0)if((jt&536870912)===0||qt){var s=ta;ta<<=1,(ta&3932160)===0&&(ta=262144),Bn=s}else Bn=536870912;return s=jn.current,s!==null&&(s.flags|=32),Bn}function Cn(s,a,c){(s===le&&(ee===2||ee===9)||s.cancelPendingCommit!==null)&&(Uo(s,0),mr(s,jt,Bn,!1)),ea(s,c),(($t&2)===0||s!==le)&&(s===le&&(($t&2)===0&&(Ra|=c),xe===4&&mr(s,jt,Bn,!1)),Yi(s))}function Wb(s,a,c){if(($t&6)!==0)throw Error(i(327));var h=!c&&(a&127)===0&&(a&s.expiredLanes)===0||ci(s,a),m=h?bR(s,a):Rm(s,a,!0),y=h;do{if(m===0){Lo&&!h&&mr(s,a,0,!1);break}else{if(c=s.current.alternate,y&&!yR(c)){m=Rm(s,a,!1),y=!1;continue}if(m===2){if(y=a,s.errorRecoveryDisabledLanes&y)var x=0;else x=s.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;t:{var C=s;m=mc;var L=C.current.memoizedState.isDehydrated;if(L&&(Uo(C,x).flags|=256),x=Rm(C,x,!1),x!==2){if(vm&&!L){C.errorRecoveryDisabledLanes|=y,Ra|=y,m=4;break t}y=Rn,Rn=m,y!==null&&(Rn===null?Rn=y:Rn.push.apply(Rn,y))}m=x}if(y=!1,m!==2)continue}}if(m===1){Uo(s,0),mr(s,a,0,!0);break}t:{switch(h=s,y=m,y){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:mr(h,a,Bn,!hr);break t;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(m=Uh+300-_n(),10<m)){if(mr(h,a,Bn,!hr),Ci(h,0,!0)!==0)break t;Ts=a,h.timeoutHandle=wv(Qb.bind(null,h,c,Rn,Fh,Tm,a,Bn,Ra,jo,hr,y,"Throttled",-0,0),m);break t}Qb(h,c,Rn,Fh,Tm,a,Bn,Ra,jo,hr,y,null,-0,0)}}break}while(!0);Yi(s)}function Qb(s,a,c,h,m,y,x,C,L,W,tt,it,Q,Z){if(s.timeoutHandle=-1,it=a.subtreeFlags,it&8192||(it&16785408)===16785408){it={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fi},Fb(a,y,it);var gt=(y&62914560)===y?Uh-_n():(y&4194048)===y?Yb-_n():0;if(gt=eC(it,gt),gt!==null){Ts=y,s.cancelPendingCommit=gt(sv.bind(null,s,a,y,c,h,m,x,C,L,tt,it,null,Q,Z)),mr(s,y,x,!W);return}}sv(s,a,y,c,h,m,x,C,L)}function yR(s){for(var a=s;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var m=c[h],y=m.getSnapshot;m=m.value;try{if(!Vn(y(),m))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function mr(s,a,c,h){a&=~xm,a&=~Ra,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var m=a;0<m;){var y=31-Ee(m),x=1<<y;h[y]=-1,m&=~x}c!==0&&na(s,c,a)}function Hh(){return($t&6)===0?(yc(0),!1):!0}function wm(){if(kt!==null){if(ee===0)var s=kt.return;else s=kt,hs=_a=null,Fg(s),Do=null,Zl=0,s=kt;for(;s!==null;)Rb(s.alternate,s),s=s.return;kt=null}}function Uo(s,a){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,LR(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),Ts=0,wm(),le=s,kt=c=cs(s.current,null),jt=a,ee=0,Un=null,hr=!1,Lo=ci(s,a),vm=!1,jo=Bn=xm=Ra=fr=xe=0,Rn=mc=null,Tm=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var m=31-Ee(h),y=1<<m;a|=s[m],h&=~y}return xs=a,uh(),c}function $b(s,a){Mt=null,$.H=oc,a===Io||a===_h?(a=d0(),ee=3):a===Dg?(a=d0(),ee=4):ee=a===sm?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Un=a,kt===null&&(xe=1,Nh(s,$n(a,s.current)))}function Jb(){var s=jn.current;return s===null?!0:(jt&4194048)===jt?ei===null:(jt&62914560)===jt||(jt&536870912)!==0?s===ei:!1}function Zb(){var s=$.H;return $.H=oc,s===null?oc:s}function tv(){var s=$.A;return $.A=mR,s}function qh(){xe=4,hr||(jt&4194048)!==jt&&jn.current!==null||(Lo=!0),(fr&134217727)===0&&(Ra&134217727)===0||le===null||mr(le,jt,Bn,!1)}function Rm(s,a,c){var h=$t;$t|=2;var m=Zb(),y=tv();(le!==s||jt!==a)&&(Fh=null,Uo(s,a)),a=!1;var x=xe;t:do try{if(ee!==0&&kt!==null){var C=kt,L=Un;switch(ee){case 8:wm(),x=6;break t;case 3:case 2:case 9:case 6:jn.current===null&&(a=!0);var W=ee;if(ee=0,Un=null,Bo(s,C,L,W),c&&Lo){x=0;break t}break;default:W=ee,ee=0,Un=null,Bo(s,C,L,W)}}_R(),x=xe;break}catch(tt){$b(s,tt)}while(!0);return a&&s.shellSuspendCounter++,hs=_a=null,$t=h,$.H=m,$.A=y,kt===null&&(le=null,jt=0,uh()),x}function _R(){for(;kt!==null;)ev(kt)}function bR(s,a){var c=$t;$t|=2;var h=Zb(),m=tv();le!==s||jt!==a?(Fh=null,Bh=_n()+500,Uo(s,a)):Lo=ci(s,a);t:do try{if(ee!==0&&kt!==null){a=kt;var y=Un;e:switch(ee){case 1:ee=0,Un=null,Bo(s,a,y,1);break;case 2:case 9:if(h0(y)){ee=0,Un=null,nv(a);break}a=function(){ee!==2&&ee!==9||le!==s||(ee=7),Yi(s)},y.then(a,a);break t;case 3:ee=7;break t;case 4:ee=5;break t;case 7:h0(y)?(ee=0,Un=null,nv(a)):(ee=0,Un=null,Bo(s,a,y,7));break;case 5:var x=null;switch(kt.tag){case 26:x=kt.memoizedState;case 5:case 27:var C=kt;if(x?Bv(x):C.stateNode.complete){ee=0,Un=null;var L=C.sibling;if(L!==null)kt=L;else{var W=C.return;W!==null?(kt=W,Gh(W)):kt=null}break e}}ee=0,Un=null,Bo(s,a,y,5);break;case 6:ee=0,Un=null,Bo(s,a,y,6);break;case 8:wm(),xe=6;break t;default:throw Error(i(462))}}vR();break}catch(tt){$b(s,tt)}while(!0);return hs=_a=null,$.H=h,$.A=m,$t=c,kt!==null?0:(le=null,jt=0,uh(),xe)}function vR(){for(;kt!==null&&!ig();)ev(kt)}function ev(s){var a=Ab(s.alternate,s,xs);s.memoizedProps=s.pendingProps,a===null?Gh(s):kt=a}function nv(s){var a=s,c=a.alternate;switch(a.tag){case 15:case 0:a=bb(c,a,a.pendingProps,a.type,void 0,jt);break;case 11:a=bb(c,a,a.pendingProps,a.type.render,a.ref,jt);break;case 5:Fg(a);default:Rb(c,a),a=kt=t0(a,xs),a=Ab(c,a,xs)}s.memoizedProps=s.pendingProps,a===null?Gh(s):kt=a}function Bo(s,a,c,h){hs=_a=null,Fg(a),Do=null,Zl=0;var m=a.return;try{if(lR(s,m,a,c,jt)){xe=1,Nh(s,$n(c,s.current)),kt=null;return}}catch(y){if(m!==null)throw kt=m,y;xe=1,Nh(s,$n(c,s.current)),kt=null;return}a.flags&32768?(qt||h===1?s=!0:Lo||(jt&536870912)!==0?s=!1:(hr=s=!0,(h===2||h===9||h===3||h===6)&&(h=jn.current,h!==null&&h.tag===13&&(h.flags|=16384))),iv(a,s)):Gh(a)}function Gh(s){var a=s;do{if((a.flags&32768)!==0){iv(a,hr);return}s=a.return;var c=hR(a.alternate,a,xs);if(c!==null){kt=c;return}if(a=a.sibling,a!==null){kt=a;return}kt=a=s}while(a!==null);xe===0&&(xe=5)}function iv(s,a){do{var c=fR(s.alternate,s);if(c!==null){c.flags&=32767,kt=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(s=s.sibling,s!==null)){kt=s;return}kt=s=c}while(s!==null);xe=6,kt=null}function sv(s,a,c,h,m,y,x,C,L){s.cancelPendingCommit=null;do Yh();while(He!==0);if(($t&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(y=a.lanes|a.childLanes,y|=mg,ag(s,c,y,x,C,L),s===le&&(kt=le=null,jt=0),zo=a,gr=s,Ts=c,Em=y,Sm=m,Kb=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,SR(Gs,function(){return cv(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=$.T,$.T=null,m=at.p,at.p=2,x=$t,$t|=4;try{dR(s,a,c)}finally{$t=x,at.p=m,$.T=h}}He=1,rv(),av(),ov()}}function rv(){if(He===1){He=0;var s=gr,a=zo,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=$.T,$.T=null;var h=at.p;at.p=2;var m=$t;$t|=4;try{zb(a,s);var y=zm,x=G_(s.containerInfo),C=y.focusedElem,L=y.selectionRange;if(x!==C&&C&&C.ownerDocument&&q_(C.ownerDocument.documentElement,C)){if(L!==null&&ug(C)){var W=L.start,tt=L.end;if(tt===void 0&&(tt=W),"selectionStart"in C)C.selectionStart=W,C.selectionEnd=Math.min(tt,C.value.length);else{var it=C.ownerDocument||document,Q=it&&it.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),gt=C.textContent.length,vt=Math.min(L.start,gt),oe=L.end===void 0?vt:Math.min(L.end,gt);!Z.extend&&vt>oe&&(x=oe,oe=vt,vt=x);var G=H_(C,vt),H=H_(C,oe);if(G&&H&&(Z.rangeCount!==1||Z.anchorNode!==G.node||Z.anchorOffset!==G.offset||Z.focusNode!==H.node||Z.focusOffset!==H.offset)){var X=it.createRange();X.setStart(G.node,G.offset),Z.removeAllRanges(),vt>oe?(Z.addRange(X),Z.extend(H.node,H.offset)):(X.setEnd(H.node,H.offset),Z.addRange(X))}}}}for(it=[],Z=C;Z=Z.parentNode;)Z.nodeType===1&&it.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<it.length;C++){var nt=it[C];nt.element.scrollLeft=nt.left,nt.element.scrollTop=nt.top}}rf=!!jm,zm=jm=null}finally{$t=m,at.p=h,$.T=c}}s.current=a,He=2}}function av(){if(He===2){He=0;var s=gr,a=zo,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=$.T,$.T=null;var h=at.p;at.p=2;var m=$t;$t|=4;try{kb(s,a.alternate,a)}finally{$t=m,at.p=h,$.T=c}}He=3}}function ov(){if(He===4||He===3){He=0,Vu();var s=gr,a=zo,c=Ts,h=Kb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?He=5:(He=0,zo=gr=null,lv(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(dr=null),rs(c),a=a.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(li,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=$.T,m=at.p,at.p=2,$.T=null;try{for(var y=s.onRecoverableError,x=0;x<h.length;x++){var C=h[x];y(C.value,{componentStack:C.stack})}}finally{$.T=a,at.p=m}}(Ts&3)!==0&&Yh(),Yi(s),m=s.pendingLanes,(c&261930)!==0&&(m&42)!==0?s===Am?pc++:(pc=0,Am=s):pc=0,yc(0)}}function lv(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,$l(a)))}function Yh(){return rv(),av(),ov(),cv()}function cv(){if(He!==5)return!1;var s=gr,a=Em;Em=0;var c=rs(Ts),h=$.T,m=at.p;try{at.p=32>c?32:c,$.T=null,c=Sm,Sm=null;var y=gr,x=Ts;if(He=0,zo=gr=null,Ts=0,($t&6)!==0)throw Error(i(331));var C=$t;if($t|=4,qb(y.current),Bb(y,y.current,x,c),$t=C,yc(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(li,y)}catch{}return!0}finally{at.p=m,$.T=h,lv(s,a)}}function uv(s,a,c){a=$n(c,a),a=im(s.stateNode,a,2),s=or(s,a,2),s!==null&&(ea(s,2),Yi(s))}function ne(s,a,c){if(s.tag===3)uv(s,s,c);else for(;a!==null;){if(a.tag===3){uv(a,s,c);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(dr===null||!dr.has(h))){s=$n(c,s),c=hb(2),h=or(a,c,2),h!==null&&(fb(c,h,a,s),ea(h,2),Yi(h));break}}a=a.return}}function Cm(s,a,c){var h=s.pingCache;if(h===null){h=s.pingCache=new pR;var m=new Set;h.set(a,m)}else m=h.get(a),m===void 0&&(m=new Set,h.set(a,m));m.has(c)||(vm=!0,m.add(c),s=xR.bind(null,s,a,c),a.then(s,s))}function xR(s,a,c){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,le===s&&(jt&c)===c&&(xe===4||xe===3&&(jt&62914560)===jt&&300>_n()-Uh?($t&2)===0&&Uo(s,0):xm|=c,jo===jt&&(jo=0)),Yi(s)}function hv(s,a){a===0&&(a=Fu()),s=ma(s,a),s!==null&&(ea(s,a),Yi(s))}function TR(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),hv(s,c)}function ER(s,a){var c=0;switch(s.tag){case 31:case 13:var h=s.stateNode,m=s.memoizedState;m!==null&&(c=m.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),hv(s,c)}function SR(s,a){return Fe(s,a)}var Kh=null,Fo=null,Im=!1,Xh=!1,Dm=!1,pr=0;function Yi(s){s!==Fo&&s.next===null&&(Fo===null?Kh=Fo=s:Fo=Fo.next=s),Xh=!0,Im||(Im=!0,wR())}function yc(s,a){if(!Dm&&Xh){Dm=!0;do for(var c=!1,h=Kh;h!==null;){if(s!==0){var m=h.pendingLanes;if(m===0)var y=0;else{var x=h.suspendedLanes,C=h.pingedLanes;y=(1<<31-Ee(42|s)+1)-1,y&=m&~(x&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,mv(h,y))}else y=jt,y=Ci(h,h===le?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||ci(h,y)||(c=!0,mv(h,y));h=h.next}while(c);Dm=!1}}function AR(){fv()}function fv(){Xh=Im=!1;var s=0;pr!==0&&VR()&&(s=pr);for(var a=_n(),c=null,h=Kh;h!==null;){var m=h.next,y=dv(h,a);y===0?(h.next=null,c===null?Kh=m:c.next=m,m===null&&(Fo=c)):(c=h,(s!==0||(y&3)!==0)&&(Xh=!0)),h=m}He!==0&&He!==5||yc(s),pr!==0&&(pr=0)}function dv(s,a){for(var c=s.suspendedLanes,h=s.pingedLanes,m=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var x=31-Ee(y),C=1<<x,L=m[x];L===-1?((C&c)===0||(C&h)!==0)&&(m[x]=rg(C,a)):L<=a&&(s.expiredLanes|=C),y&=~C}if(a=le,c=jt,c=Ci(s,s===a?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,c===0||s===a&&(ee===2||ee===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&qs(h),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||ci(s,c)){if(a=c&-c,a===s.callbackPriority)return a;switch(h!==null&&qs(h),rs(c)){case 2:case 8:c=Rl;break;case 32:c=Gs;break;case 268435456:c=Lu;break;default:c=Gs}return h=gv.bind(null,s),c=Fe(c,h),s.callbackPriority=a,s.callbackNode=c,a}return h!==null&&h!==null&&qs(h),s.callbackPriority=2,s.callbackNode=null,2}function gv(s,a){if(He!==0&&He!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(Yh()&&s.callbackNode!==c)return null;var h=jt;return h=Ci(s,s===le?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(Wb(s,h,a),dv(s,_n()),s.callbackNode!=null&&s.callbackNode===c?gv.bind(null,s):null)}function mv(s,a){if(Yh())return null;Wb(s,a,!0)}function wR(){jR(function(){($t&6)!==0?Fe(wl,AR):fv()})}function Mm(){if(pr===0){var s=Ro;s===0&&(s=wi,wi<<=1,(wi&261888)===0&&(wi=256)),pr=s}return pr}function pv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ho(""+s)}function yv(s,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,s.id&&c.setAttribute("form",s.id),a.parentNode.insertBefore(c,a),s=new FormData(s),c.parentNode.removeChild(c),s}function RR(s,a,c,h,m){if(a==="submit"&&c&&c.stateNode===m){var y=pv((m[Xe]||null).action),x=h.submitter;x&&(a=(a=x[Xe]||null)?pv(a.formAction):x.getAttribute("formAction"),a!==null&&(y=a,x=null));var C=new zi("action","action",null,h,m);s.push({event:C,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(pr!==0){var L=x?yv(m,x):new FormData(m);$g(c,{pending:!0,data:L,method:m.method,action:y},null,L)}}else typeof y=="function"&&(C.preventDefault(),L=x?yv(m,x):new FormData(m),$g(c,{pending:!0,data:L,method:m.method,action:y},y,L))},currentTarget:m}]})}}for(var Nm=0;Nm<gg.length;Nm++){var Om=gg[Nm],CR=Om.toLowerCase(),IR=Om[0].toUpperCase()+Om.slice(1);yi(CR,"on"+IR)}yi(X_,"onAnimationEnd"),yi(W_,"onAnimationIteration"),yi(Q_,"onAnimationStart"),yi("dblclick","onDoubleClick"),yi("focusin","onFocus"),yi("focusout","onBlur"),yi(G1,"onTransitionRun"),yi(Y1,"onTransitionStart"),yi(K1,"onTransitionCancel"),yi($_,"onTransitionEnd"),Pi("onMouseEnter",["mouseout","mouseover"]),Pi("onMouseLeave",["mouseout","mouseover"]),Pi("onPointerEnter",["pointerout","pointerover"]),Pi("onPointerLeave",["pointerout","pointerover"]),ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ki("onBeforeInput",["compositionend","keypress","textInput","paste"]),ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_c));function _v(s,a){a=(a&4)!==0;for(var c=0;c<s.length;c++){var h=s[c],m=h.event;h=h.listeners;t:{var y=void 0;if(a)for(var x=h.length-1;0<=x;x--){var C=h[x],L=C.instance,W=C.currentTarget;if(C=C.listener,L!==y&&m.isPropagationStopped())break t;y=C,m.currentTarget=W;try{y(m)}catch(tt){ch(tt)}m.currentTarget=null,y=L}else for(x=0;x<h.length;x++){if(C=h[x],L=C.instance,W=C.currentTarget,C=C.listener,L!==y&&m.isPropagationStopped())break t;y=C,m.currentTarget=W;try{y(m)}catch(tt){ch(tt)}m.currentTarget=null,y=L}}}}function Pt(s,a){var c=a[ao];c===void 0&&(c=a[ao]=new Set);var h=s+"__bubble";c.has(h)||(bv(a,s,2,!1),c.add(h))}function km(s,a,c){var h=0;a&&(h|=4),bv(c,s,h,a)}var Wh="_reactListening"+Math.random().toString(36).slice(2);function Pm(s){if(!s[Wh]){s[Wh]=!0,Dl.forEach(function(c){c!=="selectionchange"&&(DR.has(c)||km(c,!1,s),km(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Wh]||(a[Wh]=!0,km("selectionchange",!1,a))}}function bv(s,a,c,h){switch(Xv(a)){case 2:var m=sC;break;case 8:m=rC;break;default:m=Qm}c=m.bind(null,a,c,s),m=void 0,!oa||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),h?m!==void 0?s.addEventListener(a,c,{capture:!0,passive:m}):s.addEventListener(a,c,!0):m!==void 0?s.addEventListener(a,c,{passive:m}):s.addEventListener(a,c,!1)}function Vm(s,a,c,h,m){var y=h;if((a&1)===0&&(a&2)===0&&h!==null)t:for(;;){if(h===null)return;var x=h.tag;if(x===3||x===4){var C=h.stateNode.containerInfo;if(C===m)break;if(x===4)for(x=h.return;x!==null;){var L=x.tag;if((L===3||L===4)&&x.stateNode.containerInfo===m)return;x=x.return}for(;C!==null;){if(x=Ni(C),x===null)return;if(L=x.tag,L===5||L===6||L===26||L===27){h=y=x;continue t}C=C.parentNode}}h=h.return}$s(function(){var W=y,tt=Kn(c),it=[];t:{var Q=J_.get(s);if(Q!==void 0){var Z=zi,gt=s;switch(s){case"keypress":if(ca(c)===0)break t;case"keydown":case"keyup":Z=ah;break;case"focusin":gt="focus",Z=ha;break;case"focusout":gt="blur",Z=ha;break;case"beforeblur":case"afterblur":Z=ha;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Hl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=$u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=v;break;case X_:case W_:case Q_:Z=Zu;break;case $_:Z=M;break;case"scroll":case"scrollend":Z=Fl;break;case"wheel":Z=J;break;case"copy":case"cut":case"paste":Z=th;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=ls;break;case"toggle":case"beforetoggle":Z=Dt}var vt=(a&4)!==0,oe=!vt&&(s==="scroll"||s==="scrollend"),G=vt?Q!==null?Q+"Capture":null:Q;vt=[];for(var H=W,X;H!==null;){var nt=H;if(X=nt.stateNode,nt=nt.tag,nt!==5&&nt!==26&&nt!==27||X===null||G===null||(nt=di(H,G),nt!=null&&vt.push(bc(H,nt,X))),oe)break;H=H.return}0<vt.length&&(Q=new Z(Q,gt,null,c,tt),it.push({event:Q,listeners:vt}))}}if((a&7)===0){t:{if(Q=s==="mouseover"||s==="pointerover",Z=s==="mouseout"||s==="pointerout",Q&&c!==zl&&(gt=c.relatedTarget||c.fromElement)&&(Ni(gt)||gt[Di]))break t;if((Z||Q)&&(Q=tt.window===tt?tt:(Q=tt.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(gt=c.relatedTarget||c.toElement,Z=W,gt=gt?Ni(gt):null,gt!==null&&(oe=o(gt),vt=gt.tag,gt!==oe||vt!==5&&vt!==27&&vt!==6)&&(gt=null)):(Z=null,gt=W),Z!==gt)){if(vt=Hl,nt="onMouseLeave",G="onMouseEnter",H="mouse",(s==="pointerout"||s==="pointerover")&&(vt=ls,nt="onPointerLeave",G="onPointerEnter",H="pointer"),oe=Z==null?Q:kn(Z),X=gt==null?Q:kn(gt),Q=new vt(nt,H+"leave",Z,c,tt),Q.target=oe,Q.relatedTarget=X,nt=null,Ni(tt)===W&&(vt=new vt(G,H+"enter",gt,c,tt),vt.target=X,vt.relatedTarget=oe,nt=vt),oe=nt,Z&&gt)e:{for(vt=MR,G=Z,H=gt,X=0,nt=G;nt;nt=vt(nt))X++;nt=0;for(var yt=H;yt;yt=vt(yt))nt++;for(;0<X-nt;)G=vt(G),X--;for(;0<nt-X;)H=vt(H),nt--;for(;X--;){if(G===H||H!==null&&G===H.alternate){vt=G;break e}G=vt(G),H=vt(H)}vt=null}else vt=null;Z!==null&&vv(it,Q,Z,vt,!1),gt!==null&&oe!==null&&vv(it,oe,gt,vt,!0)}}t:{if(Q=W?kn(W):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var Kt=L_;else if(P_(Q))if(j_)Kt=F1;else{Kt=U1;var pt=z1}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?W&&uo(W.elementType)&&(Kt=L_):Kt=B1;if(Kt&&(Kt=Kt(s,W))){V_(it,Kt,c,tt);break t}pt&&pt(s,Q,W),s==="focusout"&&W&&Q.type==="number"&&W.memoizedProps.value!=null&&Vl(Q,"number",Q.value)}switch(pt=W?kn(W):window,s){case"focusin":(P_(pt)||pt.contentEditable==="true")&&(bo=pt,hg=W,Xl=null);break;case"focusout":Xl=hg=bo=null;break;case"mousedown":fg=!0;break;case"contextmenu":case"mouseup":case"dragend":fg=!1,Y_(it,c,tt);break;case"selectionchange":if(q1)break;case"keydown":case"keyup":Y_(it,c,tt)}var Nt;if(Qt)t:{switch(s){case"compositionstart":var zt="onCompositionStart";break t;case"compositionend":zt="onCompositionEnd";break t;case"compositionupdate":zt="onCompositionUpdate";break t}zt=void 0}else _o?fa(s,c)&&(zt="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(zt="onCompositionStart");zt&&(Fi&&c.locale!=="ko"&&(_o||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&_o&&(Nt=Bl()):(ji=tt,Ul="value"in ji?ji.value:ji.textContent,_o=!0)),pt=Qh(W,zt),0<pt.length&&(zt=new Bi(zt,s,null,c,tt),it.push({event:zt,listeners:pt}),Nt?zt.data=Nt:(Nt=yo(c),Nt!==null&&(zt.data=Nt)))),(Nt=Wn?P1(s,c):V1(s,c))&&(zt=Qh(W,"onBeforeInput"),0<zt.length&&(pt=new Bi("onBeforeInput","beforeinput",null,c,tt),it.push({event:pt,listeners:zt}),pt.data=Nt)),RR(it,s,W,c,tt)}_v(it,a)})}function bc(s,a,c){return{instance:s,listener:a,currentTarget:c}}function Qh(s,a){for(var c=a+"Capture",h=[];s!==null;){var m=s,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=di(s,c),m!=null&&h.unshift(bc(s,m,y)),m=di(s,a),m!=null&&h.push(bc(s,m,y))),s.tag===3)return h;s=s.return}return[]}function MR(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function vv(s,a,c,h,m){for(var y=a._reactName,x=[];c!==null&&c!==h;){var C=c,L=C.alternate,W=C.stateNode;if(C=C.tag,L!==null&&L===h)break;C!==5&&C!==26&&C!==27||W===null||(L=W,m?(W=di(c,y),W!=null&&x.unshift(bc(c,W,L))):m||(W=di(c,y),W!=null&&x.push(bc(c,W,L)))),c=c.return}x.length!==0&&s.push({event:a,listeners:x})}var NR=/\r\n?/g,OR=/\u0000|\uFFFD/g;function xv(s){return(typeof s=="string"?s:""+s).replace(NR,`
`).replace(OR,"")}function Tv(s,a){return a=xv(a),xv(s)===a}function ae(s,a,c,h,m,y){switch(c){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||En(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&En(s,""+h);break;case"className":Pn(s,"class",h);break;case"tabIndex":Pn(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Pn(s,c,h);break;case"style":jl(s,h,y);break;case"data":if(a!=="object"){Pn(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||c!=="href")){s.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=ho(""+h),s.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(a!=="input"&&ae(s,a,"name",m.name,m,null),ae(s,a,"formEncType",m.formEncType,m,null),ae(s,a,"formMethod",m.formMethod,m,null),ae(s,a,"formTarget",m.formTarget,m,null)):(ae(s,a,"encType",m.encType,m,null),ae(s,a,"method",m.method,m,null),ae(s,a,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=ho(""+h),s.setAttribute(c,h);break;case"onClick":h!=null&&(s.onclick=fi);break;case"onScroll":h!=null&&Pt("scroll",s);break;case"onScrollEnd":h!=null&&Pt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}c=ho(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""+h):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":h===!0?s.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,h):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(c,h):s.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(c):s.setAttribute(c,h);break;case"popover":Pt("beforetoggle",s),Pt("toggle",s),lo(s,"popover",h);break;case"xlinkActuate":ke(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":ke(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":ke(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":ke(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":ke(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":ke(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":ke(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":ke(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":ke(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":lo(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Qu.get(c)||c,lo(s,c,h))}}function Lm(s,a,c,h,m,y){switch(c){case"style":jl(s,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"children":typeof h=="string"?En(s,h):(typeof h=="number"||typeof h=="bigint")&&En(s,""+h);break;case"onScroll":h!=null&&Pt("scroll",s);break;case"onScrollEnd":h!=null&&Pt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=fi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ml.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(m=c.endsWith("Capture"),a=c.slice(2,m?c.length-7:void 0),y=s[Xe]||null,y=y!=null?y[c]:null,typeof y=="function"&&s.removeEventListener(a,y,m),typeof h=="function")){typeof y!="function"&&y!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(a,h,m);break t}c in s?s[c]=h:h===!0?s.setAttribute(c,""):lo(s,c,h)}}}function rn(s,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",s),Pt("load",s);var h=!1,m=!1,y;for(y in c)if(c.hasOwnProperty(y)){var x=c[y];if(x!=null)switch(y){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ae(s,a,y,x,c,null)}}m&&ae(s,a,"srcSet",c.srcSet,c,null),h&&ae(s,a,"src",c.src,c,null);return;case"input":Pt("invalid",s);var C=y=x=m=null,L=null,W=null;for(h in c)if(c.hasOwnProperty(h)){var tt=c[h];if(tt!=null)switch(h){case"name":m=tt;break;case"type":x=tt;break;case"checked":L=tt;break;case"defaultChecked":W=tt;break;case"value":y=tt;break;case"defaultValue":C=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(i(137,a));break;default:ae(s,a,h,tt,c,null)}}Ku(s,y,C,L,W,x,m,!1);return;case"select":Pt("invalid",s),h=x=y=null;for(m in c)if(c.hasOwnProperty(m)&&(C=c[m],C!=null))switch(m){case"value":y=C;break;case"defaultValue":x=C;break;case"multiple":h=C;default:ae(s,a,m,C,c,null)}a=y,c=x,s.multiple=!!h,a!=null?Ks(s,!!h,a,!1):c!=null&&Ks(s,!!h,c,!0);return;case"textarea":Pt("invalid",s),y=m=h=null;for(x in c)if(c.hasOwnProperty(x)&&(C=c[x],C!=null))switch(x){case"value":h=C;break;case"defaultValue":m=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:ae(s,a,x,C,c,null)}Xs(s,h,m,y);return;case"option":for(L in c)if(c.hasOwnProperty(L)&&(h=c[L],h!=null))switch(L){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ae(s,a,L,h,c,null)}return;case"dialog":Pt("beforetoggle",s),Pt("toggle",s),Pt("cancel",s),Pt("close",s);break;case"iframe":case"object":Pt("load",s);break;case"video":case"audio":for(h=0;h<_c.length;h++)Pt(_c[h],s);break;case"image":Pt("error",s),Pt("load",s);break;case"details":Pt("toggle",s);break;case"embed":case"source":case"link":Pt("error",s),Pt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in c)if(c.hasOwnProperty(W)&&(h=c[W],h!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ae(s,a,W,h,c,null)}return;default:if(uo(a)){for(tt in c)c.hasOwnProperty(tt)&&(h=c[tt],h!==void 0&&Lm(s,a,tt,h,c,void 0));return}}for(C in c)c.hasOwnProperty(C)&&(h=c[C],h!=null&&ae(s,a,C,h,c,null))}function kR(s,a,c,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,x=null,C=null,L=null,W=null,tt=null;for(Z in c){var it=c[Z];if(c.hasOwnProperty(Z)&&it!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":L=it;default:h.hasOwnProperty(Z)||ae(s,a,Z,null,h,it)}}for(var Q in h){var Z=h[Q];if(it=c[Q],h.hasOwnProperty(Q)&&(Z!=null||it!=null))switch(Q){case"type":y=Z;break;case"name":m=Z;break;case"checked":W=Z;break;case"defaultChecked":tt=Z;break;case"value":x=Z;break;case"defaultValue":C=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,a));break;default:Z!==it&&ae(s,a,Q,Z,h,it)}}co(s,x,C,L,W,tt,y,m);return;case"select":Z=x=C=Q=null;for(y in c)if(L=c[y],c.hasOwnProperty(y)&&L!=null)switch(y){case"value":break;case"multiple":Z=L;default:h.hasOwnProperty(y)||ae(s,a,y,null,h,L)}for(m in h)if(y=h[m],L=c[m],h.hasOwnProperty(m)&&(y!=null||L!=null))switch(m){case"value":Q=y;break;case"defaultValue":C=y;break;case"multiple":x=y;default:y!==L&&ae(s,a,m,y,h,L)}a=C,c=x,h=Z,Q!=null?Ks(s,!!c,Q,!1):!!h!=!!c&&(a!=null?Ks(s,!!c,a,!0):Ks(s,!!c,c?[]:"",!1));return;case"textarea":Z=Q=null;for(C in c)if(m=c[C],c.hasOwnProperty(C)&&m!=null&&!h.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:ae(s,a,C,null,h,m)}for(x in h)if(m=h[x],y=c[x],h.hasOwnProperty(x)&&(m!=null||y!=null))switch(x){case"value":Q=m;break;case"defaultValue":Z=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==y&&ae(s,a,x,m,h,y)}Xu(s,Q,Z);return;case"option":for(var gt in c)if(Q=c[gt],c.hasOwnProperty(gt)&&Q!=null&&!h.hasOwnProperty(gt))switch(gt){case"selected":s.selected=!1;break;default:ae(s,a,gt,null,h,Q)}for(L in h)if(Q=h[L],Z=c[L],h.hasOwnProperty(L)&&Q!==Z&&(Q!=null||Z!=null))switch(L){case"selected":s.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:ae(s,a,L,Q,h,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in c)Q=c[vt],c.hasOwnProperty(vt)&&Q!=null&&!h.hasOwnProperty(vt)&&ae(s,a,vt,null,h,Q);for(W in h)if(Q=h[W],Z=c[W],h.hasOwnProperty(W)&&Q!==Z&&(Q!=null||Z!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,a));break;default:ae(s,a,W,Q,h,Z)}return;default:if(uo(a)){for(var oe in c)Q=c[oe],c.hasOwnProperty(oe)&&Q!==void 0&&!h.hasOwnProperty(oe)&&Lm(s,a,oe,void 0,h,Q);for(tt in h)Q=h[tt],Z=c[tt],!h.hasOwnProperty(tt)||Q===Z||Q===void 0&&Z===void 0||Lm(s,a,tt,Q,h,Z);return}}for(var G in c)Q=c[G],c.hasOwnProperty(G)&&Q!=null&&!h.hasOwnProperty(G)&&ae(s,a,G,null,h,Q);for(it in h)Q=h[it],Z=c[it],!h.hasOwnProperty(it)||Q===Z||Q==null&&Z==null||ae(s,a,it,Q,h,Z)}function Ev(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function PR(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var m=c[h],y=m.transferSize,x=m.initiatorType,C=m.duration;if(y&&C&&Ev(x)){for(x=0,C=m.responseEnd,h+=1;h<c.length;h++){var L=c[h],W=L.startTime;if(W>C)break;var tt=L.transferSize,it=L.initiatorType;tt&&Ev(it)&&(L=L.responseEnd,x+=tt*(L<C?1:(C-W)/(L-W)))}if(--h,a+=8*(y+x)/(m.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var jm=null,zm=null;function $h(s){return s.nodeType===9?s:s.ownerDocument}function Sv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Av(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Um(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Bm=null;function VR(){var s=window.event;return s&&s.type==="popstate"?s===Bm?!1:(Bm=s,!0):(Bm=null,!1)}var wv=typeof setTimeout=="function"?setTimeout:void 0,LR=typeof clearTimeout=="function"?clearTimeout:void 0,Rv=typeof Promise=="function"?Promise:void 0,jR=typeof queueMicrotask=="function"?queueMicrotask:typeof Rv<"u"?function(s){return Rv.resolve(null).then(s).catch(zR)}:wv;function zR(s){setTimeout(function(){throw s})}function yr(s){return s==="head"}function Cv(s,a){var c=a,h=0;do{var m=c.nextSibling;if(s.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"||c==="/&"){if(h===0){s.removeChild(m),Yo(a);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")vc(s.ownerDocument.documentElement);else if(c==="head"){c=s.ownerDocument.head,vc(c);for(var y=c.firstChild;y;){var x=y.nextSibling,C=y.nodeName;y[Mi]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=x}}else c==="body"&&vc(s.ownerDocument.body);c=m}while(c);Yo(a)}function Iv(s,a){var c=s;s=0;do{var h=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(s===0)break;s--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||s++;c=h}while(c)}function Fm(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Fm(c),oo(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function UR(s,a,c,h){for(;s.nodeType===1;){var m=c;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[Mi])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=ni(s.nextSibling),s===null)break}return null}function BR(s,a,c){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=ni(s.nextSibling),s===null))return null;return s}function Dv(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=ni(s.nextSibling),s===null))return null;return s}function Hm(s){return s.data==="$?"||s.data==="$~"}function qm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function FR(s,a){var c=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||c.readyState!=="loading")a();else{var h=function(){a(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function ni(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var Gm=null;function Mv(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"||c==="/&"){if(a===0)return ni(s.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}s=s.nextSibling}return null}function Nv(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return s;a--}else c!=="/$"&&c!=="/&"||a++}s=s.previousSibling}return null}function Ov(s,a,c){switch(a=$h(c),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function vc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);oo(s)}var ii=new Map,kv=new Set;function Jh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Es=at.d;at.d={f:HR,r:qR,D:GR,C:YR,L:KR,m:XR,X:QR,S:WR,M:$R};function HR(){var s=Es.f(),a=Hh();return s||a}function qR(s){var a=Yn(s);a!==null&&a.tag===5&&a.type==="form"?$0(a):Es.r(s)}var Ho=typeof document>"u"?null:document;function Pv(s,a,c){var h=Ho;if(h&&typeof a=="string"&&a){var m=Tn(a);m='link[rel="'+s+'"][href="'+m+'"]',typeof c=="string"&&(m+='[crossorigin="'+c+'"]'),kv.has(m)||(kv.add(m),s={rel:s,crossOrigin:c,href:a},h.querySelector(m)===null&&(a=h.createElement("link"),rn(a,"link",s),Oe(a),h.head.appendChild(a)))}}function GR(s){Es.D(s),Pv("dns-prefetch",s,null)}function YR(s,a){Es.C(s,a),Pv("preconnect",s,a)}function KR(s,a,c){Es.L(s,a,c);var h=Ho;if(h&&s&&a){var m='link[rel="preload"][as="'+Tn(a)+'"]';a==="image"&&c&&c.imageSrcSet?(m+='[imagesrcset="'+Tn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(m+='[imagesizes="'+Tn(c.imageSizes)+'"]')):m+='[href="'+Tn(s)+'"]';var y=m;switch(a){case"style":y=qo(s);break;case"script":y=Go(s)}ii.has(y)||(s=_({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:s,as:a},c),ii.set(y,s),h.querySelector(m)!==null||a==="style"&&h.querySelector(xc(y))||a==="script"&&h.querySelector(Tc(y))||(a=h.createElement("link"),rn(a,"link",s),Oe(a),h.head.appendChild(a)))}}function XR(s,a){Es.m(s,a);var c=Ho;if(c&&s){var h=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Tn(h)+'"][href="'+Tn(s)+'"]',y=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Go(s)}if(!ii.has(y)&&(s=_({rel:"modulepreload",href:s},a),ii.set(y,s),c.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Tc(y)))return}h=c.createElement("link"),rn(h,"link",s),Oe(h),c.head.appendChild(h)}}}function WR(s,a,c){Es.S(s,a,c);var h=Ho;if(h&&s){var m=Oi(h).hoistableStyles,y=qo(s);a=a||"default";var x=m.get(y);if(!x){var C={loading:0,preload:null};if(x=h.querySelector(xc(y)))C.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":a},c),(c=ii.get(y))&&Ym(s,c);var L=x=h.createElement("link");Oe(L),rn(L,"link",s),L._p=new Promise(function(W,tt){L.onload=W,L.onerror=tt}),L.addEventListener("load",function(){C.loading|=1}),L.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Zh(x,a,h)}x={type:"stylesheet",instance:x,count:1,state:C},m.set(y,x)}}}function QR(s,a){Es.X(s,a);var c=Ho;if(c&&s){var h=Oi(c).hoistableScripts,m=Go(s),y=h.get(m);y||(y=c.querySelector(Tc(m)),y||(s=_({src:s,async:!0},a),(a=ii.get(m))&&Km(s,a),y=c.createElement("script"),Oe(y),rn(y,"link",s),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function $R(s,a){Es.M(s,a);var c=Ho;if(c&&s){var h=Oi(c).hoistableScripts,m=Go(s),y=h.get(m);y||(y=c.querySelector(Tc(m)),y||(s=_({src:s,async:!0,type:"module"},a),(a=ii.get(m))&&Km(s,a),y=c.createElement("script"),Oe(y),rn(y,"link",s),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function Vv(s,a,c,h){var m=(m=Tt.current)?Jh(m):null;if(!m)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=qo(c.href),c=Oi(m).hoistableStyles,h=c.get(a),h||(h={type:"style",instance:null,count:0,state:null},c.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=qo(c.href);var y=Oi(m).hoistableStyles,x=y.get(s);if(x||(m=m.ownerDocument||m,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,x),(y=m.querySelector(xc(s)))&&!y._p&&(x.instance=y,x.state.loading=5),ii.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ii.set(s,c),y||JR(m,s,c,x.state))),a&&h===null)throw Error(i(528,""));return x}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Go(c),c=Oi(m).hoistableScripts,h=c.get(a),h||(h={type:"script",instance:null,count:0,state:null},c.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function qo(s){return'href="'+Tn(s)+'"'}function xc(s){return'link[rel="stylesheet"]['+s+"]"}function Lv(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function JR(s,a,c,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),rn(a,"link",c),Oe(a),s.head.appendChild(a))}function Go(s){return'[src="'+Tn(s)+'"]'}function Tc(s){return"script[async]"+s}function jv(s,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+Tn(c.href)+'"]');if(h)return a.instance=h,Oe(h),h;var m=_({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Oe(h),rn(h,"style",m),Zh(h,c.precedence,s),a.instance=h;case"stylesheet":m=qo(c.href);var y=s.querySelector(xc(m));if(y)return a.state.loading|=4,a.instance=y,Oe(y),y;h=Lv(c),(m=ii.get(m))&&Ym(h,m),y=(s.ownerDocument||s).createElement("link"),Oe(y);var x=y;return x._p=new Promise(function(C,L){x.onload=C,x.onerror=L}),rn(y,"link",h),a.state.loading|=4,Zh(y,c.precedence,s),a.instance=y;case"script":return y=Go(c.src),(m=s.querySelector(Tc(y)))?(a.instance=m,Oe(m),m):(h=c,(m=ii.get(y))&&(h=_({},c),Km(h,m)),s=s.ownerDocument||s,m=s.createElement("script"),Oe(m),rn(m,"link",h),s.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Zh(h,c.precedence,s));return a.instance}function Zh(s,a,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,y=m,x=0;x<h.length;x++){var C=h[x];if(C.dataset.precedence===a)y=C;else if(y!==m)break}y?y.parentNode.insertBefore(s,y.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(s,a.firstChild))}function Ym(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Km(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var tf=null;function zv(s,a,c){if(tf===null){var h=new Map,m=tf=new Map;m.set(c,h)}else m=tf,h=m.get(c),h||(h=new Map,m.set(c,h));if(h.has(s))return h;for(h.set(s,null),c=c.getElementsByTagName(s),m=0;m<c.length;m++){var y=c[m];if(!(y[Mi]||y[Ne]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var x=y.getAttribute(a)||"";x=s+x;var C=h.get(x);C?C.push(y):h.set(x,[y])}}return h}function Uv(s,a,c){s=s.ownerDocument||s,s.head.insertBefore(c,a==="title"?s.querySelector("head > title"):null)}function ZR(s,a,c){if(c===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Bv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function tC(s,a,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var m=qo(h.href),y=a.querySelector(xc(m));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=ef.bind(s),a.then(s,s)),c.state.loading|=4,c.instance=y,Oe(y);return}y=a.ownerDocument||a,h=Lv(h),(m=ii.get(m))&&Ym(h,m),y=y.createElement("link"),Oe(y);var x=y;x._p=new Promise(function(C,L){x.onload=C,x.onerror=L}),rn(y,"link",h),c.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(s.count++,c=ef.bind(s),a.addEventListener("load",c),a.addEventListener("error",c))}}var Xm=0;function eC(s,a){return s.stylesheets&&s.count===0&&sf(s,s.stylesheets),0<s.count||0<s.imgCount?function(c){var h=setTimeout(function(){if(s.stylesheets&&sf(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+a);0<s.imgBytes&&Xm===0&&(Xm=62500*PR());var m=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&sf(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>Xm?50:800)+a);return s.unsuspend=c,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(m)}}:null}function ef(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var nf=null;function sf(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,nf=new Map,a.forEach(nC,s),nf=null,ef.call(s))}function nC(s,a){if(!(a.state.loading&4)){var c=nf.get(s);if(c)var h=c.get(null);else{c=new Map,nf.set(s,c);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var x=m[y];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(c.set(x.dataset.precedence,x),h=x)}h&&c.set(null,h)}m=a.instance,x=m.getAttribute("data-precedence"),y=c.get(x)||h,y===h&&c.set(null,m),c.set(x,m),this.count++,h=ef.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),y?y.parentNode.insertBefore(m,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),a.state.loading|=4}}var Ec={$$typeof:j,Provider:null,Consumer:null,_currentValue:dt,_currentValue2:dt,_threadCount:0};function iC(s,a,c,h,m,y,x,C,L){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.hiddenUpdates=Ii(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function Fv(s,a,c,h,m,y,x,C,L,W,tt,it){return s=new iC(s,a,c,x,L,W,tt,it,C),a=1,y===!0&&(a|=24),y=Ln(3,null,null,a),s.current=y,y.stateNode=s,a=Rg(),a.refCount++,s.pooledCache=a,a.refCount++,y.memoizedState={element:h,isDehydrated:c,cache:a},Mg(y),s}function Hv(s){return s?(s=To,s):To}function qv(s,a,c,h,m,y){m=Hv(m),h.context===null?h.context=m:h.pendingContext=m,h=ar(a),h.payload={element:c},y=y===void 0?null:y,y!==null&&(h.callback=y),c=or(s,h,a),c!==null&&(Cn(c,s,a),ec(c,s,a))}function Gv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function Wm(s,a){Gv(s,a),(s=s.alternate)&&Gv(s,a)}function Yv(s){if(s.tag===13||s.tag===31){var a=ma(s,67108864);a!==null&&Cn(a,s,67108864),Wm(s,67108864)}}function Kv(s){if(s.tag===13||s.tag===31){var a=Fn();a=ia(a);var c=ma(s,a);c!==null&&Cn(c,s,a),Wm(s,a)}}var rf=!0;function sC(s,a,c,h){var m=$.T;$.T=null;var y=at.p;try{at.p=2,Qm(s,a,c,h)}finally{at.p=y,$.T=m}}function rC(s,a,c,h){var m=$.T;$.T=null;var y=at.p;try{at.p=8,Qm(s,a,c,h)}finally{at.p=y,$.T=m}}function Qm(s,a,c,h){if(rf){var m=$m(h);if(m===null)Vm(s,a,h,af,c),Wv(s,h);else if(oC(m,s,a,c,h))h.stopPropagation();else if(Wv(s,h),a&4&&-1<aC.indexOf(s)){for(;m!==null;){var y=Yn(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var x=Ri(y.pendingLanes);if(x!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;x;){var L=1<<31-Ee(x);C.entanglements[1]|=L,x&=~L}Yi(y),($t&6)===0&&(Bh=_n()+500,yc(0))}}break;case 31:case 13:C=ma(y,2),C!==null&&Cn(C,y,2),Hh(),Wm(y,2)}if(y=$m(h),y===null&&Vm(s,a,h,af,c),y===m)break;m=y}m!==null&&h.stopPropagation()}else Vm(s,a,h,null,c)}}function $m(s){return s=Kn(s),Jm(s)}var af=null;function Jm(s){if(af=null,s=Ni(s),s!==null){var a=o(s);if(a===null)s=null;else{var c=a.tag;if(c===13){if(s=l(a),s!==null)return s;s=null}else if(c===31){if(s=u(a),s!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return af=s,null}function Xv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zr()){case wl:return 2;case Rl:return 8;case Gs:case sg:return 32;case Lu:return 268435456;default:return 32}default:return 32}}var Zm=!1,_r=null,br=null,vr=null,Sc=new Map,Ac=new Map,xr=[],aC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wv(s,a){switch(s){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":Sc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ac.delete(a.pointerId)}}function wc(s,a,c,h,m,y){return s===null||s.nativeEvent!==y?(s={blockedOn:a,domEventName:c,eventSystemFlags:h,nativeEvent:y,targetContainers:[m]},a!==null&&(a=Yn(a),a!==null&&Yv(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function oC(s,a,c,h,m){switch(a){case"focusin":return _r=wc(_r,s,a,c,h,m),!0;case"dragenter":return br=wc(br,s,a,c,h,m),!0;case"mouseover":return vr=wc(vr,s,a,c,h,m),!0;case"pointerover":var y=m.pointerId;return Sc.set(y,wc(Sc.get(y)||null,s,a,c,h,m)),!0;case"gotpointercapture":return y=m.pointerId,Ac.set(y,wc(Ac.get(y)||null,s,a,c,h,m)),!0}return!1}function Qv(s){var a=Ni(s.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){s.blockedOn=a,ui(s.priority,function(){Kv(c)});return}}else if(a===31){if(a=u(c),a!==null){s.blockedOn=a,ui(s.priority,function(){Kv(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function of(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=$m(s.nativeEvent);if(c===null){c=s.nativeEvent;var h=new c.constructor(c.type,c);zl=h,c.target.dispatchEvent(h),zl=null}else return a=Yn(c),a!==null&&Yv(a),s.blockedOn=c,!1;a.shift()}return!0}function $v(s,a,c){of(s)&&c.delete(a)}function lC(){Zm=!1,_r!==null&&of(_r)&&(_r=null),br!==null&&of(br)&&(br=null),vr!==null&&of(vr)&&(vr=null),Sc.forEach($v),Ac.forEach($v)}function lf(s,a){s.blockedOn===a&&(s.blockedOn=null,Zm||(Zm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,lC)))}var cf=null;function Jv(s){cf!==s&&(cf=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){cf===s&&(cf=null);for(var a=0;a<s.length;a+=3){var c=s[a],h=s[a+1],m=s[a+2];if(typeof h!="function"){if(Jm(h||c)===null)continue;break}var y=Yn(c);y!==null&&(s.splice(a,3),a-=3,$g(y,{pending:!0,data:m,method:c.method,action:h},h,m))}}))}function Yo(s){function a(L){return lf(L,s)}_r!==null&&lf(_r,s),br!==null&&lf(br,s),vr!==null&&lf(vr,s),Sc.forEach(a),Ac.forEach(a);for(var c=0;c<xr.length;c++){var h=xr[c];h.blockedOn===s&&(h.blockedOn=null)}for(;0<xr.length&&(c=xr[0],c.blockedOn===null);)Qv(c),c.blockedOn===null&&xr.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var m=c[h],y=c[h+1],x=m[Xe]||null;if(typeof y=="function")x||Jv(c);else if(x){var C=null;if(y&&y.hasAttribute("formAction")){if(m=y,x=y[Xe]||null)C=x.formAction;else if(Jm(m)!==null)continue}else C=x.action;typeof C=="function"?c[h+1]=C:(c.splice(h,3),h-=3),Jv(c)}}}function Zv(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(x){return m=x})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,m=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function tp(s){this._internalRoot=s}uf.prototype.render=tp.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var c=a.current,h=Fn();qv(c,h,s,a,null,null)},uf.prototype.unmount=tp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;qv(s.current,2,null,s,null,null),Hh(),a[Di]=null}};function uf(s){this._internalRoot=s}uf.prototype.unstable_scheduleHydration=function(s){if(s){var a=Hu();s={blockedOn:null,target:s,priority:a};for(var c=0;c<xr.length&&a!==0&&a<xr[c].priority;c++);xr.splice(c,0,s),c===0&&Qv(s)}};var tx=t.version;if(tx!=="19.2.0")throw Error(i(527,tx,"19.2.0"));at.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var cC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hf.isDisabled&&hf.supportsFiber)try{li=hf.inject(cC),Ze=hf}catch{}}return Cc.createRoot=function(s,a){if(!r(s))throw Error(i(299));var c=!1,h="",m=ob,y=lb,x=cb;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Fv(s,1,!1,null,null,c,h,null,m,y,x,Zv),s[Di]=a.current,Pm(s),new tp(a)},Cc.hydrateRoot=function(s,a,c){if(!r(s))throw Error(i(299));var h=!1,m="",y=ob,x=lb,C=cb,L=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(x=c.onCaughtError),c.onRecoverableError!==void 0&&(C=c.onRecoverableError),c.formState!==void 0&&(L=c.formState)),a=Fv(s,1,!0,a,c??null,h,m,L,y,x,C,Zv),a.context=Hv(null),c=a.current,h=Fn(),h=ia(h),m=ar(h),m.callback=null,or(c,m,h),c=h,a.current.lanes=c,ea(a,c),Yi(a),s[Di]=a.current,Pm(s),new uf(a)},Cc.version="19.2.0",Cc}var ux;function xC(){if(ux)return ip.exports;ux=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),ip.exports=vC(),ip.exports}var TC=xC();const EC=cS(TC),SC=()=>{};var hx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},AC=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[e++];t[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[e++],l=n[e++],u=n[e++],f=((r&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;t[i++]=String.fromCharCode(55296+(f>>10)),t[i++]=String.fromCharCode(56320+(f&1023))}else{const o=n[e++],l=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return t.join("")},fS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],l=r+1<n.length,u=l?n[r+1]:0,f=r+2<n.length,d=f?n[r+2]:0,p=o>>2,_=(o&3)<<4|u>>4;let b=(u&15)<<2|d>>6,E=d&63;f||(E=64,l||(b=64)),i.push(e[p],e[_],e[b],e[E])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(hS(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):AC(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=e[n.charAt(r++)],u=r<n.length?e[n.charAt(r)]:0;++r;const d=r<n.length?e[n.charAt(r)]:64;++r;const _=r<n.length?e[n.charAt(r)]:64;if(++r,o==null||u==null||d==null||_==null)throw new wC;const b=o<<2|u>>4;if(i.push(b),d!==64){const E=u<<4&240|d>>2;if(i.push(E),_!==64){const w=d<<6&192|_;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class wC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RC=function(n){const t=hS(n);return fS.encodeByteArray(t,!0)},Qf=function(n){return RC(n).replace(/\./g,"")},dS=function(n){try{return fS.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=()=>CC().__FIREBASE_DEFAULTS__,DC=()=>{if(typeof process>"u"||typeof hx>"u")return;const n=hx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},MC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&dS(n[1]);return t&&JSON.parse(t)},wd=()=>{try{return SC()||IC()||DC()||MC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gS=n=>{var t,e;return(e=(t=wd())==null?void 0:t.emulatorHosts)==null?void 0:e[n]},NC=n=>{const t=gS(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},mS=()=>{var n;return(n=wd())==null?void 0:n.config},pS=n=>{var t;return(t=wd())==null?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Qf(JSON.stringify(e)),Qf(JSON.stringify(l)),""].join(".")}const Yc={};function PC(){const n={prod:[],emulator:[]};for(const t of Object.keys(Yc))Yc[t]?n.emulator.push(t):n.prod.push(t);return n}function VC(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let fx=!1;function _S(n,t){if(typeof window>"u"||typeof document>"u"||!pl(window.location.host)||Yc[n]===t||Yc[n]||fx)return;Yc[n]=t;function e(b){return`__firebase__banner__${b}`}const i="__firebase__banner",o=PC().prod.length>0;function l(){const b=document.getElementById(i);b&&b.remove()}function u(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,E){b.setAttribute("width","24"),b.setAttribute("id",E),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function d(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{fx=!0,l()},b}function p(b,E){b.setAttribute("id",E),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function _(){const b=VC(i),E=e("text"),w=document.getElementById(E)||document.createElement("span"),A=e("learnmore"),R=document.getElementById(A)||document.createElement("a"),O=e("preprendIcon"),q=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const j=b.element;u(j),p(R,A);const B=d();f(q,O),j.append(q,w,R,B),document.body.appendChild(j)}o?(w.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function jC(){var t;const n=(t=wd())==null?void 0:t.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function BC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FC(){const n=pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function HC(){return!jC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qC(){try{return typeof indexedDB=="object"}catch{return!1}}function GC(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var o;t(((o=r.error)==null?void 0:o.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="FirebaseError";class Bs extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=YC,Object.setPrototypeOf(this,Bs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xu.prototype.create)}}class xu{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,o=this.errors[t],l=o?KC(o,i):"Error",u=`${this.serviceName}: ${l} (${r}).`;return new Bs(r,u,i)}}function KC(n,t){return n.replace(XC,(e,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const XC=/\{\$([^}]+)}/g;function WC(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Ha(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const o=n[r],l=t[r];if(dx(o)&&dx(l)){if(!Ha(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function dx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function kc(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(o)}}),t}function Pc(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function QC(n,t){const e=new $C(n,t);return e.subscribe.bind(e)}class $C{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");JC(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=op),r.error===void 0&&(r.error=op),r.complete===void 0&&(r.complete=op);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JC(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function op(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(n){return n&&n._delegate?n._delegate:n}class qa{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new OC;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(e2(t))try{this.getOrInitializeService({instanceIdentifier:Oa})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(t=Oa){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Oa){return this.instances.has(t)}getOptions(t=Oa){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&l.resolve(r)}return r}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&t(o,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:t2(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Oa){return this.component?this.component.multipleInstances?t:Oa:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function t2(n){return n===Oa?void 0:n}function e2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new ZC(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ut||(Ut={}));const i2={debug:Ut.DEBUG,verbose:Ut.VERBOSE,info:Ut.INFO,warn:Ut.WARN,error:Ut.ERROR,silent:Ut.SILENT},s2=Ut.INFO,r2={[Ut.DEBUG]:"log",[Ut.VERBOSE]:"log",[Ut.INFO]:"info",[Ut.WARN]:"warn",[Ut.ERROR]:"error"},a2=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),r=r2[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ey{constructor(t){this.name=t,this._logLevel=s2,this._logHandler=a2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ut))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?i2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ut.DEBUG,...t),this._logHandler(this,Ut.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ut.VERBOSE,...t),this._logHandler(this,Ut.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ut.INFO,...t),this._logHandler(this,Ut.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ut.WARN,...t),this._logHandler(this,Ut.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ut.ERROR,...t),this._logHandler(this,Ut.ERROR,...t)}}const o2=(n,t)=>t.some(e=>n instanceof e);let gx,mx;function l2(){return gx||(gx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c2(){return mx||(mx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bS=new WeakMap,Op=new WeakMap,vS=new WeakMap,lp=new WeakMap,Sy=new WeakMap;function u2(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{e(kr(n.result)),r()},l=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",l)});return t.then(e=>{e instanceof IDBCursor&&bS.set(e,n)}).catch(()=>{}),Sy.set(t,n),t}function h2(n){if(Op.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{e(),r()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});Op.set(n,t)}let kp={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Op.get(n);if(t==="objectStoreNames")return n.objectStoreNames||vS.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return kr(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function f2(n){kp=n(kp)}function d2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(cp(this),t,...e);return vS.set(i,t.sort?t.sort():[t]),kr(i)}:c2().includes(n)?function(...t){return n.apply(cp(this),t),kr(bS.get(this))}:function(...t){return kr(n.apply(cp(this),t))}}function g2(n){return typeof n=="function"?d2(n):(n instanceof IDBTransaction&&h2(n),o2(n,l2())?new Proxy(n,kp):n)}function kr(n){if(n instanceof IDBRequest)return u2(n);if(lp.has(n))return lp.get(n);const t=g2(n);return t!==n&&(lp.set(n,t),Sy.set(t,n)),t}const cp=n=>Sy.get(n);function m2(n,t,{blocked:e,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(n,t),u=kr(l);return i&&l.addEventListener("upgradeneeded",f=>{i(kr(l.result),f.oldVersion,f.newVersion,kr(l.transaction),f)}),e&&l.addEventListener("blocked",f=>e(f.oldVersion,f.newVersion,f)),u.then(f=>{o&&f.addEventListener("close",()=>o()),r&&f.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const p2=["get","getKey","getAll","getAllKeys","count"],y2=["put","add","delete","clear"],up=new Map;function px(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(up.get(t))return up.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=y2.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||p2.includes(e)))return;const o=async function(l,...u){const f=this.transaction(l,r?"readwrite":"readonly");let d=f.store;return i&&(d=d.index(u.shift())),(await Promise.all([d[e](...u),r&&f.done]))[0]};return up.set(t,o),o}f2(n=>({...n,get:(t,e,i)=>px(t,e)||n.get(t,e,i),has:(t,e)=>!!px(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(b2(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function b2(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Pp="@firebase/app",yx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new Ey("@firebase/app"),v2="@firebase/app-compat",x2="@firebase/analytics-compat",T2="@firebase/analytics",E2="@firebase/app-check-compat",S2="@firebase/app-check",A2="@firebase/auth",w2="@firebase/auth-compat",R2="@firebase/database",C2="@firebase/data-connect",I2="@firebase/database-compat",D2="@firebase/functions",M2="@firebase/functions-compat",N2="@firebase/installations",O2="@firebase/installations-compat",k2="@firebase/messaging",P2="@firebase/messaging-compat",V2="@firebase/performance",L2="@firebase/performance-compat",j2="@firebase/remote-config",z2="@firebase/remote-config-compat",U2="@firebase/storage",B2="@firebase/storage-compat",F2="@firebase/firestore",H2="@firebase/ai",q2="@firebase/firestore-compat",G2="firebase",Y2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="[DEFAULT]",K2={[Pp]:"fire-core",[v2]:"fire-core-compat",[T2]:"fire-analytics",[x2]:"fire-analytics-compat",[S2]:"fire-app-check",[E2]:"fire-app-check-compat",[A2]:"fire-auth",[w2]:"fire-auth-compat",[R2]:"fire-rtdb",[C2]:"fire-data-connect",[I2]:"fire-rtdb-compat",[D2]:"fire-fn",[M2]:"fire-fn-compat",[N2]:"fire-iid",[O2]:"fire-iid-compat",[k2]:"fire-fcm",[P2]:"fire-fcm-compat",[V2]:"fire-perf",[L2]:"fire-perf-compat",[j2]:"fire-rc",[z2]:"fire-rc-compat",[U2]:"fire-gcs",[B2]:"fire-gcs-compat",[F2]:"fire-fst",[q2]:"fire-fst-compat",[H2]:"fire-vertex","fire-js":"fire-js",[G2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=new Map,X2=new Map,Lp=new Map;function _x(n,t){try{n.container.addComponent(t)}catch(e){Vs.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function rl(n){const t=n.name;if(Lp.has(t))return Vs.debug(`There were multiple attempts to register component ${t}.`),!1;Lp.set(t,n);for(const e of $f.values())_x(e,n);for(const e of X2.values())_x(e,n);return!0}function Ay(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function ri(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pr=new xu("app","Firebase",W2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new qa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Pr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl=Y2;function xS(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i={name:Vp,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Pr.create("bad-app-name",{appName:String(r)});if(e||(e=mS()),!e)throw Pr.create("no-options");const o=$f.get(r);if(o){if(Ha(e,o.options)&&Ha(i,o.config))return o;throw Pr.create("duplicate-app",{appName:r})}const l=new n2(r);for(const f of Lp.values())l.addComponent(f);const u=new Q2(e,i,l);return $f.set(r,u),u}function TS(n=Vp){const t=$f.get(n);if(!t&&n===Vp&&mS())return xS();if(!t)throw Pr.create("no-app",{appName:n});return t}function Vr(n,t,e){let i=K2[n]??n;e&&(i+=`-${e}`);const r=i.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const l=[`Unable to register library "${i}" with version "${t}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Vs.warn(l.join(" "));return}rl(new qa(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="firebase-heartbeat-database",J2=1,iu="firebase-heartbeat-store";let hp=null;function ES(){return hp||(hp=m2($2,J2,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(iu)}catch(e){console.warn(e)}}}}).catch(n=>{throw Pr.create("idb-open",{originalErrorMessage:n.message})})),hp}async function Z2(n){try{const e=(await ES()).transaction(iu),i=await e.objectStore(iu).get(SS(n));return await e.done,i}catch(t){if(t instanceof Bs)Vs.warn(t.message);else{const e=Pr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Vs.warn(e.message)}}}async function bx(n,t){try{const i=(await ES()).transaction(iu,"readwrite");await i.objectStore(iu).put(t,SS(n)),await i.done}catch(e){if(e instanceof Bs)Vs.warn(e.message);else{const i=Pr.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Vs.warn(i.message)}}}function SS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=1024,eI=30;class nI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new sI(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=vx();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>eI){const l=rI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Vs.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=vx(),{heartbeatsToSend:i,unsentEntries:r}=iI(this._heartbeatsCache.heartbeats),o=Qf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Vs.warn(e),""}}}function vx(){return new Date().toISOString().substring(0,10)}function iI(n,t=tI){const e=[];let i=n.slice();for(const r of n){const o=e.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),xx(e)>t){o.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),xx(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class sI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qC()?GC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Z2(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return bx(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return bx(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function xx(n){return Qf(JSON.stringify({version:2,heartbeats:n})).length}function rI(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(n){rl(new qa("platform-logger",t=>new _2(t),"PRIVATE")),rl(new qa("heartbeat",t=>new nI(t),"PRIVATE")),Vr(Pp,yx,n),Vr(Pp,yx,"esm2020"),Vr("fire-js","")}aI("");function AS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oI=AS,wS=new xu("auth","Firebase",AS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=new Ey("@firebase/auth");function lI(n,...t){Jf.logLevel<=Ut.WARN&&Jf.warn(`Auth (${yl}): ${n}`,...t)}function Mf(n,...t){Jf.logLevel<=Ut.ERROR&&Jf.error(`Auth (${yl}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(n,...t){throw wy(n,...t)}function Qi(n,...t){return wy(n,...t)}function RS(n,t,e){const i={...oI(),[t]:e};return new xu("auth","Firebase",i).create(t,{appName:n.name})}function Os(n){return RS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wy(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return wS.create(n,...t)}function Et(n,t,...e){if(!n)throw wy(t,...e)}function Cs(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Mf(t),new Error(t)}function Ls(n,t){n||Cs(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function cI(){return Tx()==="http:"||Tx()==="https:"}function Tx(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cI()||UC()||"connection"in navigator)?navigator.onLine:!0}function hI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(t,e){this.shortDelay=t,this.longDelay=e,Ls(e>t,"Short delay should be less than long delay!"),this.isMobile=LC()||BC()}get(){return uI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(n,t){Ls(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gI=new Eu(3e4,6e4);function Fs(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function Hs(n,t,e,i,r={}){return IS(n,r,async()=>{let o={},l={};i&&(t==="GET"?l=i:o={body:JSON.stringify(i)});const u=Tu({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const d={method:t,headers:f,...o};return zC()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&pl(n.emulatorConfig.host)&&(d.credentials="include"),CS.fetch()(await DS(n,n.config.apiHost,e,u),d)})}async function IS(n,t,e){n._canInitEmulator=!1;const i={...fI,...t};try{const r=new pI(n),o=await Promise.race([e(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw ff(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[f,d]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw ff(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw ff(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw ff(n,"user-disabled",l);const p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw RS(n,p,d);Ei(n,p)}}catch(r){if(r instanceof Bs)throw r;Ei(n,"network-request-failed",{message:String(r)})}}async function Su(n,t,e,i,r={}){const o=await Hs(n,t,e,i,r);return"mfaPendingCredential"in o&&Ei(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function DS(n,t,e,i){const r=`${t}${e}?${i}`,o=n,l=o.config.emulator?Ry(n.config,r):`${n.config.apiScheme}://${r}`;return dI.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function mI(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Qi(this.auth,"network-request-failed")),gI.get())})}}function ff(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const r=Qi(n,t,i);return r.customData._tokenResponse=e,r}function Ex(n){return n!==void 0&&n.enterprise!==void 0}class yI{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return mI(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _I(n,t){return Hs(n,"GET","/v2/recaptchaConfig",Fs(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bI(n,t){return Hs(n,"POST","/v1/accounts:delete",t)}async function Zf(n,t){return Hs(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function vI(n,t=!1){const e=Ke(n),i=await e.getIdToken(t),r=Cy(i);Et(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Kc(fp(r.auth_time)),issuedAtTime:Kc(fp(r.iat)),expirationTime:Kc(fp(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function fp(n){return Number(n)*1e3}function Cy(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Mf("JWT malformed, contained fewer than 3 sections"),null;try{const r=dS(e);return r?JSON.parse(r):(Mf("Failed to decode base64 JWT payload"),null)}catch(r){return Mf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Sx(n){const t=Cy(n);return Et(t,"internal-error"),Et(typeof t.exp<"u","internal-error"),Et(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function su(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Bs&&xI(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function xI({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kc(this.lastLoginAt),this.creationTime=Kc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function td(n){var _;const t=n.auth,e=await n.getIdToken(),i=await su(n,Zf(t,{idToken:e}));Et(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const o=(_=r.providerUserInfo)!=null&&_.length?MS(r.providerUserInfo):[],l=SI(n.providerData,o),u=n.isAnonymous,f=!(n.email&&r.passwordHash)&&!(l!=null&&l.length),d=u?f:!1,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new zp(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(n,p)}async function EI(n){const t=Ke(n);await td(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function SI(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function MS(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AI(n,t){const e=await IS(n,{},async()=>{const i=Tu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,l=await DS(n,r,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:i};return n.emulatorConfig&&pl(n.emulatorConfig.host)&&(f.credentials="include"),CS.fetch()(l,f)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function wI(n,t){return Hs(n,"POST","/v2/accounts:revokeToken",Fs(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Et(t.idToken,"internal-error"),Et(typeof t.idToken<"u","internal-error"),Et(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Sx(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Et(t.length!==0,"internal-error");const e=Sx(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:r,expiresIn:o}=await AI(t,e);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:r,expirationTime:o}=e,l=new tl;return i&&(Et(typeof i=="string","internal-error",{appName:t}),l.refreshToken=i),r&&(Et(typeof r=="string","internal-error",{appName:t}),l.accessToken=r),o&&(Et(typeof o=="number","internal-error",{appName:t}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new tl,this.toJSON())}_performRefresh(){return Cs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(n,t){Et(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class vi{constructor({uid:t,auth:e,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new TI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new zp(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await su(this,this.stsTokenManager.getToken(this.auth,t));return Et(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return vI(this,t)}reload(){return EI(this)}_assign(t){this!==t&&(Et(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new vi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await td(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ri(this.auth.app))return Promise.reject(Os(this.auth));const t=await this.getIdToken();return await su(this,bI(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,r=e.email??void 0,o=e.phoneNumber??void 0,l=e.photoURL??void 0,u=e.tenantId??void 0,f=e._redirectEventId??void 0,d=e.createdAt??void 0,p=e.lastLoginAt??void 0,{uid:_,emailVerified:b,isAnonymous:E,providerData:w,stsTokenManager:A}=e;Et(_&&A,t,"internal-error");const R=tl.fromJSON(this.name,A);Et(typeof _=="string",t,"internal-error"),Er(i,t.name),Er(r,t.name),Et(typeof b=="boolean",t,"internal-error"),Et(typeof E=="boolean",t,"internal-error"),Er(o,t.name),Er(l,t.name),Er(u,t.name),Er(f,t.name),Er(d,t.name),Er(p,t.name);const O=new vi({uid:_,auth:t,email:r,emailVerified:b,displayName:i,isAnonymous:E,photoURL:l,phoneNumber:o,tenantId:u,stsTokenManager:R,createdAt:d,lastLoginAt:p});return w&&Array.isArray(w)&&(O.providerData=w.map(q=>({...q}))),f&&(O._redirectEventId=f),O}static async _fromIdTokenResponse(t,e,i=!1){const r=new tl;r.updateFromServerResponse(e);const o=new vi({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await td(o),o}static async _fromGetAccountInfoResponse(t,e,i){const r=e.users[0];Et(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?MS(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new tl;u.updateFromIdToken(i);const f=new vi({uid:r.localId,auth:t,stsTokenManager:u,isAnonymous:l}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new zp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=new Map;function Is(n){Ls(n instanceof Function,"Expected a class definition");let t=Ax.get(n);return t?(Ls(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,Ax.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}NS.type="NONE";const wx=NS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(n,t,e){return`firebase:${n}:${t}:${e}`}class el{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Nf(this.userKey,r.apiKey,o),this.fullPersistenceKey=Nf("persistence",r.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Zf(this.auth,{idToken:t}).catch(()=>{});return e?vi._fromGetAccountInfoResponse(this.auth,e,t):null}return vi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new el(Is(wx),t,i);const r=(await Promise.all(e.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=r[0]||Is(wx);const l=Nf(i,t.config.apiKey,t.name);let u=null;for(const d of e)try{const p=await d._get(l);if(p){let _;if(typeof p=="string"){const b=await Zf(t,{idToken:p}).catch(()=>{});if(!b)break;_=await vi._fromGetAccountInfoResponse(t,b,p)}else _=vi._fromJSON(t,p);d!==o&&(u=_),o=d;break}}catch{}const f=r.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new el(o,t,i):(o=f[0],u&&await o._set(l,u.toJSON()),await Promise.all(e.map(async d=>{if(d!==o)try{await d._remove(l)}catch{}})),new el(o,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(VS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(OS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(jS(t))return"Blackberry";if(zS(t))return"Webos";if(kS(t))return"Safari";if((t.includes("chrome/")||PS(t))&&!t.includes("edge/"))return"Chrome";if(LS(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function OS(n=pn()){return/firefox\//i.test(n)}function kS(n=pn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function PS(n=pn()){return/crios\//i.test(n)}function VS(n=pn()){return/iemobile/i.test(n)}function LS(n=pn()){return/android/i.test(n)}function jS(n=pn()){return/blackberry/i.test(n)}function zS(n=pn()){return/webos/i.test(n)}function Iy(n=pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function RI(n=pn()){var t;return Iy(n)&&!!((t=window.navigator)!=null&&t.standalone)}function CI(){return FC()&&document.documentMode===10}function US(n=pn()){return Iy(n)||LS(n)||zS(n)||jS(n)||/windows phone/i.test(n)||VS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(n,t=[]){let e;switch(n){case"Browser":e=Rx(pn());break;case"Worker":e=`${Rx(pn())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${yl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((l,u)=>{try{const f=t(o);l(f)}catch(f){u(f)}});i.onAbort=e,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DI(n,t={}){return Hs(n,"GET","/v2/passwordPolicy",Fs(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=6;class NI{constructor(t){var i;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??MI,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cx(this),this.idTokenSubscription=new Cx(this),this.beforeStateQueue=new II(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Is(e)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await el.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Zf(this,{idToken:t}),i=await vi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var o;if(ri(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(t);(!l||l===u)&&(f!=null&&f.user)&&(i=f.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await td(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=hI()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ri(this.app))return Promise.reject(Os(this));const e=t?Ke(t):null;return e&&Et(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Et(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ri(this.app)?Promise.reject(Os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ri(this.app)?Promise.reject(Os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Is(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await DI(this),e=new NI(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new xu("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await wI(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Is(t)||this._popupRedirectResolver;Et(e,this,"argument-error"),this.redirectPersistenceManager=await el.create(this,[Is(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof e=="function"){const f=t.addObserver(e,i,r);return()=>{l=!0,f()}}else{const f=t.addObserver(e);return()=>{l=!0,f()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=BS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&lI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ja(n){return Ke(n)}class Cx{constructor(t){this.auth=t,this.observer=null,this.addObserver=QC(e=>this.observer=e)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kI(n){Rd=n}function FS(n){return Rd.loadJS(n)}function PI(){return Rd.recaptchaEnterpriseScript}function VI(){return Rd.gapiScript}function LI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class jI{constructor(){this.enterprise=new zI}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class zI{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const UI="recaptcha-enterprise",HS="NO_RECAPTCHA";class BI{constructor(t){this.type=UI,this.auth=Ja(t)}async verify(t="verify",e=!1){async function i(o){if(!e){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{_I(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new yI(f);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,l(d.siteKey)}}).catch(f=>{u(f)})})}function r(o,l,u){const f=window.grecaptcha;Ex(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:t}).then(d=>{l(d)}).catch(()=>{l(HS)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jI().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(u=>{if(!e&&Ex(window.grecaptcha))r(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=PI();f.length!==0&&(f+=u),FS(f).then(()=>{r(u,o,l)}).catch(d=>{l(d)})}}).catch(u=>{l(u)})})}}async function Ix(n,t,e,i=!1,r=!1){const o=new BI(n);let l;if(r)l=HS;else try{l=await o.verify(e)}catch{l=await o.verify(e,!0)}const u={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const f=u.phoneEnrollmentInfo.phoneNumber,d=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const f=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Up(n,t,e,i,r){var o;if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Ix(n,t,e,e==="getOobCode");return i(n,l)}else return i(n,t).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Ix(n,t,e,e==="getOobCode");return i(n,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(n,t){const e=Ay(n,"auth");if(e.isInitialized()){const r=e.getImmediate(),o=e.getOptions();if(Ha(o,t??{}))return r;Ei(r,"already-initialized")}return e.initialize({options:t})}function HI(n,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map(Is);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function qI(n,t,e){const i=Ja(n);Et(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,o=qS(t),{host:l,port:u}=GI(t),f=u===null?"":`:${u}`,d={url:`${o}//${l}${f}/`},p=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Et(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Et(Ha(d,i.config.emulator)&&Ha(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,pl(l)?(yS(`${o}//${l}${f}`),_S("Auth",!0)):YI()}function qS(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function GI(n){const t=qS(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:Dx(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Dx(l)}}}function Dx(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function YI(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Cs("not implemented")}_getIdTokenResponse(t){return Cs("not implemented")}_linkToIdToken(t,e){return Cs("not implemented")}_getReauthenticationResolver(t){return Cs("not implemented")}}async function KI(n,t){return Hs(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(n,t){return Su(n,"POST","/v1/accounts:signInWithPassword",Fs(n,t))}async function WI(n,t){return Hs(n,"POST","/v1/accounts:sendOobCode",Fs(n,t))}async function QI(n,t){return WI(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $I(n,t){return Su(n,"POST","/v1/accounts:signInWithEmailLink",Fs(n,t))}async function JI(n,t){return Su(n,"POST","/v1/accounts:signInWithEmailLink",Fs(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends Dy{constructor(t,e,i,r=null){super("password",i),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new ru(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new ru(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Up(t,e,"signInWithPassword",XI);case"emailLink":return $I(t,{email:this._email,oobCode:this._password});default:Ei(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Up(t,i,"signUpPassword",KI);case"emailLink":return JI(t,{idToken:e,email:this._email,oobCode:this._password});default:Ei(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(n,t){return Su(n,"POST","/v1/accounts:signInWithIdp",Fs(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="http://localhost";class Ga extends Dy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ga(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Ei("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...o}=e;if(!i||!r)return null;const l=new Ga(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(t){const e=this.buildRequest();return nl(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,nl(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,nl(t,e)}buildRequest(){const t={requestUri:ZI,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Tu(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eD(n){const t=kc(Pc(n)).link,e=t?kc(Pc(t)).deep_link_id:null,i=kc(Pc(n)).deep_link_id;return(i?kc(Pc(i)).link:null)||i||e||t||n}class My{constructor(t){const e=kc(Pc(t)),i=e.apiKey??null,r=e.oobCode??null,o=tD(e.mode??null);Et(i&&r&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=r,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=eD(t);try{return new My(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.providerId=_l.PROVIDER_ID}static credential(t,e){return ru._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=My.parseLink(e);return Et(i,"argument-error"),ru._fromEmailAndCode(t,i.code,i.tenantId)}}_l.PROVIDER_ID="password";_l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends GS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Au{constructor(){super("facebook.com")}static credential(t){return Ga._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Sr.credentialFromTaggedObject(t)}static credentialFromError(t){return Sr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Sr.credential(t.oauthAccessToken)}catch{return null}}}Sr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Au{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ga._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Ar.credentialFromTaggedObject(t)}static credentialFromError(t){return Ar.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Ar.credential(e,i)}catch{return null}}}Ar.GOOGLE_SIGN_IN_METHOD="google.com";Ar.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Au{constructor(){super("github.com")}static credential(t){return Ga._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return wr.credentialFromTaggedObject(t)}static credentialFromError(t){return wr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return wr.credential(t.oauthAccessToken)}catch{return null}}}wr.GITHUB_SIGN_IN_METHOD="github.com";wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Au{constructor(){super("twitter.com")}static credential(t,e){return Ga._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Rr.credentialFromTaggedObject(t)}static credentialFromError(t){return Rr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Rr.credential(e,i)}catch{return null}}}Rr.TWITTER_SIGN_IN_METHOD="twitter.com";Rr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(n,t){return Su(n,"POST","/v1/accounts:signUp",Fs(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,r=!1){const o=await vi._fromIdTokenResponse(t,i,r),l=Mx(i);return new Ya({user:o,providerId:l,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const r=Mx(i);return new Ya({user:t,providerId:r,_tokenResponse:i,operationType:e})}}function Mx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed extends Bs{constructor(t,e,i,r){super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,ed.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new ed(t,e,i,r)}}function YS(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ed._fromErrorAndOperation(n,o,t,i):o})}async function iD(n,t,e=!1){const i=await su(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Ya._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(n,t,e=!1){const{auth:i}=n;if(ri(i.app))return Promise.reject(Os(i));const r="reauthenticate";try{const o=await su(n,YS(i,r,t,n),e);Et(o.idToken,i,"internal-error");const l=Cy(o.idToken);Et(l,i,"internal-error");const{sub:u}=l;return Et(n.uid===u,i,"user-mismatch"),Ya._forOperation(n,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Ei(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(n,t,e=!1){if(ri(n.app))return Promise.reject(Os(n));const i="signIn",r=await YS(n,i,t),o=await Ya._fromIdTokenResponse(n,i,r);return e||await n._updateCurrentUser(o.user),o}async function rD(n,t){return KS(Ja(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XS(n){const t=Ja(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function aD(n,t,e){if(ri(n.app))return Promise.reject(Os(n));const i=Ja(n),l=await Up(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nD).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&XS(n),f}),u=await Ya._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(u.user),u}function oD(n,t,e){return ri(n.app)?Promise.reject(Os(n)):rD(Ke(n),_l.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&XS(n),i})}async function lD(n,t){const e=Ke(n),r={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:o}=await QI(e.auth,r);o!==n.email&&await n.reload()}function cD(n,t,e,i){return Ke(n).onIdTokenChanged(t,e,i)}function uD(n,t,e){return Ke(n).beforeAuthStateChanged(t,e)}function hD(n,t,e,i){return Ke(n).onAuthStateChanged(t,e,i)}function fD(n){return Ke(n).signOut()}const nd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(nd,"1"),this.storage.removeItem(nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=1e3,gD=10;class QS extends WS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=US(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),r=this.localCache[e];i!==r&&t(e,r,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((l,u,f)=>{this.notifyListeners(l,f)});return}const i=t.key;e?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!e&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);CI()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,gD):r()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},dD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}QS.type="LOCAL";const mD=QS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S extends WS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}$S.type="SESSION";const JS=$S;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(r=>r.isListeningto(t));if(e)return e;const i=new Cd(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:r,data:o}=e.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(l).map(async d=>d(e.origin,o)),f=await pD(u);e.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((u,f)=>{const d=Ny("",20);r.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(_){const b=_;if(b.data.eventId===d)switch(b.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(b.data.response);break;default:clearTimeout(p),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:t,eventId:d,data:e},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(){return window}function _D(n){$i().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(){return typeof $i().WorkerGlobalScope<"u"&&typeof $i().importScripts=="function"}async function bD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vD(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function xD(){return ZS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="firebaseLocalStorageDb",TD=1,id="firebaseLocalStorage",eA="fbase_key";class wu{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Id(n,t){return n.transaction([id],t?"readwrite":"readonly").objectStore(id)}function ED(){const n=indexedDB.deleteDatabase(tA);return new wu(n).toPromise()}function Bp(){const n=indexedDB.open(tA,TD);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(id,{keyPath:eA})}catch(r){e(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(id)?t(i):(i.close(),await ED(),t(await Bp()))})})}async function Nx(n,t,e){const i=Id(n,!0).put({[eA]:t,value:e});return new wu(i).toPromise()}async function SD(n,t){const e=Id(n,!1).get(t),i=await new wu(e).toPromise();return i===void 0?null:i.value}function Ox(n,t){const e=Id(n,!0).delete(t);return new wu(e).toPromise()}const AD=800,wD=3;class nA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bp(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>wD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cd._getInstance(xD()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,i;if(this.activeServiceWorker=await bD(),!this.activeServiceWorker)return;this.sender=new yD(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||vD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Bp();return await Nx(t,nd,"1"),await Ox(t,nd),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>Nx(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>SD(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Ox(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const o=Id(r,!1).getAll();return new wu(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:o}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),e.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),e.push(r));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nA.type="LOCAL";const RD=nA;new Eu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(n,t){return t?Is(t):(Et(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy extends Dy{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return nl(t,this._buildIdpRequest())}_linkToIdToken(t,e){return nl(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return nl(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function ID(n){return KS(n.auth,new Oy(n),n.bypassAuthState)}function DD(n){const{auth:t,user:e}=n;return Et(e,t,"internal-error"),sD(e,new Oy(n),n.bypassAuthState)}async function MD(n){const{auth:t,user:e}=n;return Et(e,t,"internal-error"),iD(e,new Oy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(t,e,i,r,o=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:r,tenantId:o,error:l,type:u}=t;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(d){this.reject(d)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return ID;case"linkViaPopup":case"linkViaRedirect":return MD;case"reauthViaPopup":case"reauthViaRedirect":return DD;default:Ei(this.auth,"internal-error")}}resolve(t){Ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=new Eu(2e3,1e4);class Zo extends iA{constructor(t,e,i,r,o){super(t,e,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Zo.currentPopupAction&&Zo.currentPopupAction.cancel(),Zo.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Et(t,this.auth,"internal-error"),t}async onExecution(){Ls(this.filter.length===1,"Popup operations only handle one event");const t=Ny();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Qi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Qi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zo.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if((i=(e=this.authWindow)==null?void 0:e.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,ND.get())};t()}}Zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD="pendingRedirect",Of=new Map;class kD extends iA{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Of.get(this.auth._key());if(!t){try{const i=await PD(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Of.set(this.auth._key(),t)}return this.bypassAuthState||Of.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PD(n,t){const e=jD(t),i=LD(n);if(!await i._isAvailable())return!1;const r=await i._get(e)==="true";return await i._remove(e),r}function VD(n,t){Of.set(n._key(),t)}function LD(n){return Is(n._redirectPersistence)}function jD(n){return Nf(OD,n.config.apiKey,n.name)}async function zD(n,t,e=!1){if(ri(n.app))return Promise.reject(Os(n));const i=Ja(n),r=CD(i,t),l=await new kD(i,r,e).execute();return l&&!e&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,t)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=600*1e3;class BD{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!FD(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!sA(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";e.onError(Qi(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=UD&&this.cachedEventUids.clear(),this.cachedEventUids.has(kx(t))}saveEventToCache(t){this.cachedEventUids.add(kx(t)),this.lastProcessedEventTime=Date.now()}}function kx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function sA({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function FD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(n,t={}){return Hs(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GD=/^https?/;async function YD(n){if(n.config.emulator)return;const{authorizedDomains:t}=await HD(n);for(const e of t)try{if(KD(e))return}catch{}Ei(n,"unauthorized-domain")}function KD(n){const t=jp(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&l.hostname===i}if(!GD.test(e))return!1;if(qD.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=new Eu(3e4,6e4);function Px(){const n=$i().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function WD(n){return new Promise((t,e)=>{var r,o,l;function i(){Px(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Px(),e(Qi(n,"network-request-failed"))},timeout:XD.get()})}if((o=(r=$i().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)t(gapi.iframes.getContext());else if((l=$i().gapi)!=null&&l.load)i();else{const u=LI("iframefcb");return $i()[u]=()=>{gapi.load?i():e(Qi(n,"network-request-failed"))},FS(`${VI()}?onload=${u}`).catch(f=>e(f))}}).catch(t=>{throw kf=null,t})}let kf=null;function QD(n){return kf=kf||WD(n),kf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D=new Eu(5e3,15e3),JD="__/auth/iframe",ZD="emulator/auth/iframe",tM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nM(n){const t=n.config;Et(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Ry(t,ZD):`https://${n.config.authDomain}/${JD}`,i={apiKey:t.apiKey,appName:n.name,v:yl},r=eM.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${Tu(i).slice(1)}`}async function iM(n){const t=await QD(n),e=$i().gapi;return Et(e,n,"internal-error"),t.open({where:document.body,url:nM(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tM,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=Qi(n,"network-request-failed"),u=$i().setTimeout(()=>{o(l)},$D.get());function f(){$i().clearTimeout(u),r(i)}i.ping(f).then(f,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rM=500,aM=600,oM="_blank",lM="http://localhost";class Vx{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cM(n,t,e,i=rM,r=aM){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const f={...sM,width:i.toString(),height:r.toString(),top:o,left:l},d=pn().toLowerCase();e&&(u=PS(d)?oM:e),OS(d)&&(t=t||lM,f.scrollbars="yes");const p=Object.entries(f).reduce((b,[E,w])=>`${b}${E}=${w},`,"");if(RI(d)&&u!=="_self")return uM(t||"",u),new Vx(null);const _=window.open(t||"",u,p);Et(_,n,"popup-blocked");try{_.focus()}catch{}return new Vx(_)}function uM(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM="__/auth/handler",fM="emulator/auth/handler",dM=encodeURIComponent("fac");async function Lx(n,t,e,i,r,o){Et(n.config.authDomain,n,"auth-domain-config-required"),Et(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:yl,eventId:r};if(t instanceof GS){t.setDefaultLanguage(n.languageCode),l.providerId=t.providerId||"",WC(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[p,_]of Object.entries({}))l[p]=_}if(t instanceof Au){const p=t.getScopes().filter(_=>_!=="");p.length>0&&(l.scopes=p.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const f=await n._getAppCheckToken(),d=f?`#${dM}=${encodeURIComponent(f)}`:"";return`${gM(n)}?${Tu(u).slice(1)}${d}`}function gM({config:n}){return n.emulator?Ry(n,fM):`https://${n.authDomain}/${hM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="webStorageSupport";class mM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JS,this._completeRedirectFn=zD,this._overrideRedirectResult=VD}async _openPopup(t,e,i,r){var l;Ls((l=this.eventManagers[t._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await Lx(t,e,i,jp(),r);return cM(t,o,Ny())}async _openRedirect(t,e,i,r){await this._originValidation(t);const o=await Lx(t,e,i,jp(),r);return _D(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:r,promise:o}=this.eventManagers[e];return r?Promise.resolve(r):(Ls(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await iM(t),i=new BD(t);return e.register("authEvent",r=>(Et(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(dp,{type:dp},r=>{var l;const o=(l=r==null?void 0:r[0])==null?void 0:l[dp];o!==void 0&&e(!!o),Ei(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=YD(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return US()||kS()||Iy()}}const pM=mM;var jx="@firebase/auth",zx="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bM(n){rl(new qa("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=i.options;Et(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BS(n)},d=new OI(i,r,o,f);return HI(d,e),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),rl(new qa("auth-internal",t=>{const e=Ja(t.getProvider("auth").getImmediate());return(i=>new yM(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(jx,zx,_M(n)),Vr(jx,zx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=300,xM=pS("authIdTokenMaxAge")||vM;let Ux=null;const TM=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>xM)return;const r=e==null?void 0:e.token;Ux!==r&&(Ux=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function EM(n=TS()){const t=Ay(n,"auth");if(t.isInitialized())return t.getImmediate();const e=FI(n,{popupRedirectResolver:pM,persistence:[RD,mD,JS]}),i=pS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=TM(o.toString());uD(e,l,()=>l(e.currentUser)),cD(e,u=>l(u))}}const r=gS("auth");return r&&qI(e,`http://${r}`),e}function SM(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}kI({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{const o=Qi("internal-error");o.customData=r,e(o)},i.type="text/javascript",i.charset="UTF-8",SM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bM("Browser");var Bx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lr,rA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,D){function N(){}N.prototype=D.prototype,I.F=D.prototype,I.prototype=new N,I.prototype.constructor=I,I.D=function(V,k,z){for(var P=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)P[Ot-2]=arguments[Ot];return D.prototype[k].apply(V,P)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,e),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,D,N){N||(N=0);const V=Array(16);if(typeof D=="string")for(var k=0;k<16;++k)V[k]=D.charCodeAt(N++)|D.charCodeAt(N++)<<8|D.charCodeAt(N++)<<16|D.charCodeAt(N++)<<24;else for(k=0;k<16;++k)V[k]=D[N++]|D[N++]<<8|D[N++]<<16|D[N++]<<24;D=I.g[0],N=I.g[1],k=I.g[2];let z=I.g[3],P;P=D+(z^N&(k^z))+V[0]+3614090360&4294967295,D=N+(P<<7&4294967295|P>>>25),P=z+(k^D&(N^k))+V[1]+3905402710&4294967295,z=D+(P<<12&4294967295|P>>>20),P=k+(N^z&(D^N))+V[2]+606105819&4294967295,k=z+(P<<17&4294967295|P>>>15),P=N+(D^k&(z^D))+V[3]+3250441966&4294967295,N=k+(P<<22&4294967295|P>>>10),P=D+(z^N&(k^z))+V[4]+4118548399&4294967295,D=N+(P<<7&4294967295|P>>>25),P=z+(k^D&(N^k))+V[5]+1200080426&4294967295,z=D+(P<<12&4294967295|P>>>20),P=k+(N^z&(D^N))+V[6]+2821735955&4294967295,k=z+(P<<17&4294967295|P>>>15),P=N+(D^k&(z^D))+V[7]+4249261313&4294967295,N=k+(P<<22&4294967295|P>>>10),P=D+(z^N&(k^z))+V[8]+1770035416&4294967295,D=N+(P<<7&4294967295|P>>>25),P=z+(k^D&(N^k))+V[9]+2336552879&4294967295,z=D+(P<<12&4294967295|P>>>20),P=k+(N^z&(D^N))+V[10]+4294925233&4294967295,k=z+(P<<17&4294967295|P>>>15),P=N+(D^k&(z^D))+V[11]+2304563134&4294967295,N=k+(P<<22&4294967295|P>>>10),P=D+(z^N&(k^z))+V[12]+1804603682&4294967295,D=N+(P<<7&4294967295|P>>>25),P=z+(k^D&(N^k))+V[13]+4254626195&4294967295,z=D+(P<<12&4294967295|P>>>20),P=k+(N^z&(D^N))+V[14]+2792965006&4294967295,k=z+(P<<17&4294967295|P>>>15),P=N+(D^k&(z^D))+V[15]+1236535329&4294967295,N=k+(P<<22&4294967295|P>>>10),P=D+(k^z&(N^k))+V[1]+4129170786&4294967295,D=N+(P<<5&4294967295|P>>>27),P=z+(N^k&(D^N))+V[6]+3225465664&4294967295,z=D+(P<<9&4294967295|P>>>23),P=k+(D^N&(z^D))+V[11]+643717713&4294967295,k=z+(P<<14&4294967295|P>>>18),P=N+(z^D&(k^z))+V[0]+3921069994&4294967295,N=k+(P<<20&4294967295|P>>>12),P=D+(k^z&(N^k))+V[5]+3593408605&4294967295,D=N+(P<<5&4294967295|P>>>27),P=z+(N^k&(D^N))+V[10]+38016083&4294967295,z=D+(P<<9&4294967295|P>>>23),P=k+(D^N&(z^D))+V[15]+3634488961&4294967295,k=z+(P<<14&4294967295|P>>>18),P=N+(z^D&(k^z))+V[4]+3889429448&4294967295,N=k+(P<<20&4294967295|P>>>12),P=D+(k^z&(N^k))+V[9]+568446438&4294967295,D=N+(P<<5&4294967295|P>>>27),P=z+(N^k&(D^N))+V[14]+3275163606&4294967295,z=D+(P<<9&4294967295|P>>>23),P=k+(D^N&(z^D))+V[3]+4107603335&4294967295,k=z+(P<<14&4294967295|P>>>18),P=N+(z^D&(k^z))+V[8]+1163531501&4294967295,N=k+(P<<20&4294967295|P>>>12),P=D+(k^z&(N^k))+V[13]+2850285829&4294967295,D=N+(P<<5&4294967295|P>>>27),P=z+(N^k&(D^N))+V[2]+4243563512&4294967295,z=D+(P<<9&4294967295|P>>>23),P=k+(D^N&(z^D))+V[7]+1735328473&4294967295,k=z+(P<<14&4294967295|P>>>18),P=N+(z^D&(k^z))+V[12]+2368359562&4294967295,N=k+(P<<20&4294967295|P>>>12),P=D+(N^k^z)+V[5]+4294588738&4294967295,D=N+(P<<4&4294967295|P>>>28),P=z+(D^N^k)+V[8]+2272392833&4294967295,z=D+(P<<11&4294967295|P>>>21),P=k+(z^D^N)+V[11]+1839030562&4294967295,k=z+(P<<16&4294967295|P>>>16),P=N+(k^z^D)+V[14]+4259657740&4294967295,N=k+(P<<23&4294967295|P>>>9),P=D+(N^k^z)+V[1]+2763975236&4294967295,D=N+(P<<4&4294967295|P>>>28),P=z+(D^N^k)+V[4]+1272893353&4294967295,z=D+(P<<11&4294967295|P>>>21),P=k+(z^D^N)+V[7]+4139469664&4294967295,k=z+(P<<16&4294967295|P>>>16),P=N+(k^z^D)+V[10]+3200236656&4294967295,N=k+(P<<23&4294967295|P>>>9),P=D+(N^k^z)+V[13]+681279174&4294967295,D=N+(P<<4&4294967295|P>>>28),P=z+(D^N^k)+V[0]+3936430074&4294967295,z=D+(P<<11&4294967295|P>>>21),P=k+(z^D^N)+V[3]+3572445317&4294967295,k=z+(P<<16&4294967295|P>>>16),P=N+(k^z^D)+V[6]+76029189&4294967295,N=k+(P<<23&4294967295|P>>>9),P=D+(N^k^z)+V[9]+3654602809&4294967295,D=N+(P<<4&4294967295|P>>>28),P=z+(D^N^k)+V[12]+3873151461&4294967295,z=D+(P<<11&4294967295|P>>>21),P=k+(z^D^N)+V[15]+530742520&4294967295,k=z+(P<<16&4294967295|P>>>16),P=N+(k^z^D)+V[2]+3299628645&4294967295,N=k+(P<<23&4294967295|P>>>9),P=D+(k^(N|~z))+V[0]+4096336452&4294967295,D=N+(P<<6&4294967295|P>>>26),P=z+(N^(D|~k))+V[7]+1126891415&4294967295,z=D+(P<<10&4294967295|P>>>22),P=k+(D^(z|~N))+V[14]+2878612391&4294967295,k=z+(P<<15&4294967295|P>>>17),P=N+(z^(k|~D))+V[5]+4237533241&4294967295,N=k+(P<<21&4294967295|P>>>11),P=D+(k^(N|~z))+V[12]+1700485571&4294967295,D=N+(P<<6&4294967295|P>>>26),P=z+(N^(D|~k))+V[3]+2399980690&4294967295,z=D+(P<<10&4294967295|P>>>22),P=k+(D^(z|~N))+V[10]+4293915773&4294967295,k=z+(P<<15&4294967295|P>>>17),P=N+(z^(k|~D))+V[1]+2240044497&4294967295,N=k+(P<<21&4294967295|P>>>11),P=D+(k^(N|~z))+V[8]+1873313359&4294967295,D=N+(P<<6&4294967295|P>>>26),P=z+(N^(D|~k))+V[15]+4264355552&4294967295,z=D+(P<<10&4294967295|P>>>22),P=k+(D^(z|~N))+V[6]+2734768916&4294967295,k=z+(P<<15&4294967295|P>>>17),P=N+(z^(k|~D))+V[13]+1309151649&4294967295,N=k+(P<<21&4294967295|P>>>11),P=D+(k^(N|~z))+V[4]+4149444226&4294967295,D=N+(P<<6&4294967295|P>>>26),P=z+(N^(D|~k))+V[11]+3174756917&4294967295,z=D+(P<<10&4294967295|P>>>22),P=k+(D^(z|~N))+V[2]+718787259&4294967295,k=z+(P<<15&4294967295|P>>>17),P=N+(z^(k|~D))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+D&4294967295,I.g[1]=I.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,I.g[2]=I.g[2]+k&4294967295,I.g[3]=I.g[3]+z&4294967295}i.prototype.v=function(I,D){D===void 0&&(D=I.length);const N=D-this.blockSize,V=this.C;let k=this.h,z=0;for(;z<D;){if(k==0)for(;z<=N;)r(this,I,z),z+=this.blockSize;if(typeof I=="string"){for(;z<D;)if(V[k++]=I.charCodeAt(z++),k==this.blockSize){r(this,V),k=0;break}}else for(;z<D;)if(V[k++]=I[z++],k==this.blockSize){r(this,V),k=0;break}}this.h=k,this.o+=D},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var D=1;D<I.length-8;++D)I[D]=0;D=this.o*8;for(var N=I.length-8;N<I.length;++N)I[N]=D&255,D/=256;for(this.v(I),I=Array(16),D=0,N=0;N<4;++N)for(let V=0;V<32;V+=8)I[D++]=this.g[N]>>>V&255;return I};function o(I,D){var N=u;return Object.prototype.hasOwnProperty.call(N,I)?N[I]:N[I]=D(I)}function l(I,D){this.h=D;const N=[];let V=!0;for(let k=I.length-1;k>=0;k--){const z=I[k]|0;V&&z==D||(N[k]=z,V=!1)}this.g=N}var u={};function f(I){return-128<=I&&I<128?o(I,function(D){return new l([D|0],D<0?-1:0)}):new l([I|0],I<0?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return _;if(I<0)return R(d(-I));const D=[];let N=1;for(let V=0;I>=N;V++)D[V]=I/N|0,N*=4294967296;return new l(D,0)}function p(I,D){if(I.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(I.charAt(0)=="-")return R(p(I.substring(1),D));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=d(Math.pow(D,8));let V=_;for(let z=0;z<I.length;z+=8){var k=Math.min(8,I.length-z);const P=parseInt(I.substring(z,z+k),D);k<8?(k=d(Math.pow(D,k)),V=V.j(k).add(d(P))):(V=V.j(N),V=V.add(d(P)))}return V}var _=f(0),b=f(1),E=f(16777216);n=l.prototype,n.m=function(){if(A(this))return-R(this).m();let I=0,D=1;for(let N=0;N<this.g.length;N++){const V=this.i(N);I+=(V>=0?V:4294967296+V)*D,D*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(A(this))return"-"+R(this).toString(I);const D=d(Math.pow(I,6));var N=this;let V="";for(;;){const k=B(N,D).g;N=O(N,k.j(D));let z=((N.g.length>0?N.g[0]:N.h)>>>0).toString(I);if(N=k,w(N))return z+V;for(;z.length<6;)z="0"+z;V=z+V}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(let D=0;D<I.g.length;D++)if(I.g[D]!=0)return!1;return!0}function A(I){return I.h==-1}n.l=function(I){return I=O(this,I),A(I)?-1:w(I)?0:1};function R(I){const D=I.g.length,N=[];for(let V=0;V<D;V++)N[V]=~I.g[V];return new l(N,~I.h).add(b)}n.abs=function(){return A(this)?R(this):this},n.add=function(I){const D=Math.max(this.g.length,I.g.length),N=[];let V=0;for(let k=0;k<=D;k++){let z=V+(this.i(k)&65535)+(I.i(k)&65535),P=(z>>>16)+(this.i(k)>>>16)+(I.i(k)>>>16);V=P>>>16,z&=65535,P&=65535,N[k]=P<<16|z}return new l(N,N[N.length-1]&-2147483648?-1:0)};function O(I,D){return I.add(R(D))}n.j=function(I){if(w(this)||w(I))return _;if(A(this))return A(I)?R(this).j(R(I)):R(R(this).j(I));if(A(I))return R(this.j(R(I)));if(this.l(E)<0&&I.l(E)<0)return d(this.m()*I.m());const D=this.g.length+I.g.length,N=[];for(var V=0;V<2*D;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(let k=0;k<I.g.length;k++){const z=this.i(V)>>>16,P=this.i(V)&65535,Ot=I.i(k)>>>16,At=I.i(k)&65535;N[2*V+2*k]+=P*At,q(N,2*V+2*k),N[2*V+2*k+1]+=z*At,q(N,2*V+2*k+1),N[2*V+2*k+1]+=P*Ot,q(N,2*V+2*k+1),N[2*V+2*k+2]+=z*Ot,q(N,2*V+2*k+2)}for(I=0;I<D;I++)N[I]=N[2*I+1]<<16|N[2*I];for(I=D;I<2*D;I++)N[I]=0;return new l(N,0)};function q(I,D){for(;(I[D]&65535)!=I[D];)I[D+1]+=I[D]>>>16,I[D]&=65535,D++}function j(I,D){this.g=I,this.h=D}function B(I,D){if(w(D))throw Error("division by zero");if(w(I))return new j(_,_);if(A(I))return D=B(R(I),D),new j(R(D.g),R(D.h));if(A(D))return D=B(I,R(D)),new j(R(D.g),D.h);if(I.g.length>30){if(A(I)||A(D))throw Error("slowDivide_ only works with positive integers.");for(var N=b,V=D;V.l(I)<=0;)N=U(N),V=U(V);var k=Y(N,1),z=Y(V,1);for(V=Y(V,2),N=Y(N,2);!w(V);){var P=z.add(V);P.l(I)<=0&&(k=k.add(N),z=P),V=Y(V,1),N=Y(N,1)}return D=O(I,k.j(D)),new j(k,D)}for(k=_;I.l(D)>=0;){for(N=Math.max(1,Math.floor(I.m()/D.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),z=d(N),P=z.j(D);A(P)||P.l(I)>0;)N-=V,z=d(N),P=z.j(D);w(z)&&(z=b),k=k.add(z),I=O(I,P)}return new j(k,I)}n.B=function(I){return B(this,I).h},n.and=function(I){const D=Math.max(this.g.length,I.g.length),N=[];for(let V=0;V<D;V++)N[V]=this.i(V)&I.i(V);return new l(N,this.h&I.h)},n.or=function(I){const D=Math.max(this.g.length,I.g.length),N=[];for(let V=0;V<D;V++)N[V]=this.i(V)|I.i(V);return new l(N,this.h|I.h)},n.xor=function(I){const D=Math.max(this.g.length,I.g.length),N=[];for(let V=0;V<D;V++)N[V]=this.i(V)^I.i(V);return new l(N,this.h^I.h)};function U(I){const D=I.g.length+1,N=[];for(let V=0;V<D;V++)N[V]=I.i(V)<<1|I.i(V-1)>>>31;return new l(N,I.h)}function Y(I,D){const N=D>>5;D%=32;const V=I.g.length-N,k=[];for(let z=0;z<V;z++)k[z]=D>0?I.i(z+N)>>>D|I.i(z+N+1)<<32-D:I.i(z+N);return new l(k,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,rA=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=p,Lr=l}).apply(typeof Bx<"u"?Bx:typeof self<"u"?self:typeof window<"u"?window:{});var df=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aA,Vc,oA,Pf,Fp,lA,cA,uA;(function(){var n,t=Object.defineProperty;function e(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof df=="object"&&df];for(var v=0;v<g.length;++v){var T=g[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=e(this);function r(g,v){if(v)t:{var T=i;g=g.split(".");for(var M=0;M<g.length-1;M++){var K=g[M];if(!(K in T))break t;T=T[K]}g=g[g.length-1],M=T[g],v=v(M),v!=M&&v!=null&&t(T,g,{configurable:!0,writable:!0,value:v})}}r("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(g){return g||function(v){var T=[],M;for(M in v)Object.prototype.hasOwnProperty.call(v,M)&&T.push([M,v[M]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(g){var v=typeof g;return v=="object"&&g!=null||v=="function"}function f(g,v,T){return g.call.apply(g.bind,arguments)}function d(g,v,T){return d=f,d.apply(null,arguments)}function p(g,v){var T=Array.prototype.slice.call(arguments,1);return function(){var M=T.slice();return M.push.apply(M,arguments),g.apply(this,M)}}function _(g,v){function T(){}T.prototype=v.prototype,g.Z=v.prototype,g.prototype=new T,g.prototype.constructor=g,g.Ob=function(M,K,J){for(var ot=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)ot[Dt-2]=arguments[Dt];return v.prototype[K].apply(M,ot)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function E(g){const v=g.length;if(v>0){const T=Array(v);for(let M=0;M<v;M++)T[M]=g[M];return T}return[]}function w(g,v){for(let M=1;M<arguments.length;M++){const K=arguments[M];var T=typeof K;if(T=T!="object"?T:K?Array.isArray(K)?"array":T:"null",T=="array"||T=="object"&&typeof K.length=="number"){T=g.length||0;const J=K.length||0;g.length=T+J;for(let ot=0;ot<J;ot++)g[T+ot]=K[ot]}else g.push(K)}}class A{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function R(g){l.setTimeout(()=>{throw g},0)}function O(){var g=I;let v=null;return g.g&&(v=g.g,g.g=g.g.next,g.g||(g.h=null),v.next=null),v}class q{constructor(){this.h=this.g=null}add(v,T){const M=j.get();M.set(v,T),this.h?this.h.next=M:this.g=M,this.h=M}}var j=new A(()=>new B,g=>g.reset());class B{constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let U,Y=!1,I=new q,D=()=>{const g=Promise.resolve(void 0);U=()=>{g.then(N)}};function N(){for(var g;g=O();){try{g.h.call(g.g)}catch(T){R(T)}var v=j;v.j(g),v.h<100&&(v.h++,g.next=v.g,v.g=g)}Y=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(g,v){this.type=g,this.g=this.target=v,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var g=!1,v=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const T=()=>{};l.addEventListener("test",T,v),l.removeEventListener("test",T,v)}catch{}return g})();function P(g){return/^[\s\xa0]*$/.test(g)}function Ot(g,v){k.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,v)}_(Ot,k),Ot.prototype.init=function(g,v){const T=this.type=g.type,M=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=v,v=g.relatedTarget,v||(T=="mouseover"?v=g.fromElement:T=="mouseout"&&(v=g.toElement)),this.relatedTarget=v,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Ot.Z.h.call(this)},Ot.prototype.h=function(){Ot.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var At="closure_listenable_"+(Math.random()*1e6|0),$=0;function at(g,v,T,M,K){this.listener=g,this.proxy=null,this.src=v,this.type=T,this.capture=!!M,this.ha=K,this.key=++$,this.da=this.fa=!1}function dt(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function xt(g,v,T){for(const M in g)v.call(T,g[M],M,g)}function Lt(g,v){for(const T in g)v.call(void 0,g[T],T,g)}function F(g){const v={};for(const T in g)v[T]=g[T];return v}const et="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(g,v){let T,M;for(let K=1;K<arguments.length;K++){M=arguments[K];for(T in M)g[T]=M[T];for(let J=0;J<et.length;J++)T=et[J],Object.prototype.hasOwnProperty.call(M,T)&&(g[T]=M[T])}}function ut(g){this.src=g,this.g={},this.h=0}ut.prototype.add=function(g,v,T,M,K){const J=g.toString();g=this.g[J],g||(g=this.g[J]=[],this.h++);const ot=Tt(g,v,M,K);return ot>-1?(v=g[ot],T||(v.fa=!1)):(v=new at(v,this.src,J,!!M,K),v.fa=T,g.push(v)),v};function bt(g,v){const T=v.type;if(T in g.g){var M=g.g[T],K=Array.prototype.indexOf.call(M,v,void 0),J;(J=K>=0)&&Array.prototype.splice.call(M,K,1),J&&(dt(v),g.g[T].length==0&&(delete g.g[T],g.h--))}}function Tt(g,v,T,M){for(let K=0;K<g.length;++K){const J=g[K];if(!J.da&&J.listener==v&&J.capture==!!T&&J.ha==M)return K}return-1}var Gt="closure_lm_"+(Math.random()*1e6|0),Be={};function ge(g,v,T,M,K){if(Array.isArray(v)){for(let J=0;J<v.length;J++)ge(g,v[J],T,M,K);return null}return T=Al(T),g&&g[At]?g.J(v,T,u(M)?!!M.capture:!1,K):$r(g,v,T,!1,M,K)}function $r(g,v,T,M,K,J){if(!v)throw Error("Invalid event type");const ot=u(K)?!!K.capture:!!K;let Dt=Jr(g);if(Dt||(g[Gt]=Dt=new ut(g)),T=Dt.add(v,T,M,ot,J),T.proxy)return T;if(M=no(),T.proxy=M,M.src=g,M.listener=T,g.addEventListener)z||(K=ot),K===void 0&&(K=!1),g.addEventListener(v.toString(),M,K);else if(g.attachEvent)g.attachEvent(Ai(v.toString()),M);else if(g.addListener&&g.removeListener)g.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return T}function no(){function g(T){return v.call(g.src,g.listener,T)}const v=El;return g}function io(g,v,T,M,K){if(Array.isArray(v))for(var J=0;J<v.length;J++)io(g,v[J],T,M,K);else M=u(M)?!!M.capture:!!M,T=Al(T),g&&g[At]?(g=g.i,J=String(v).toString(),J in g.g&&(v=g.g[J],T=Tt(v,T,M,K),T>-1&&(dt(v[T]),Array.prototype.splice.call(v,T,1),v.length==0&&(delete g.g[J],g.h--)))):g&&(g=Jr(g))&&(v=g.g[v.toString()],g=-1,v&&(g=Tt(v,T,M,K)),(T=g>-1?v[g]:null)&&so(T))}function so(g){if(typeof g!="number"&&g&&!g.da){var v=g.src;if(v&&v[At])bt(v.i,g);else{var T=g.type,M=g.proxy;v.removeEventListener?v.removeEventListener(T,M,g.capture):v.detachEvent?v.detachEvent(Ai(T),M):v.addListener&&v.removeListener&&v.removeListener(M),(T=Jr(v))?(bt(T,g),T.h==0&&(T.src=null,v[Gt]=null)):dt(g)}}}function Ai(g){return g in Be?Be[g]:Be[g]="on"+g}function El(g,v){if(g.da)g=!0;else{v=new Ot(v,this);const T=g.listener,M=g.ha||g.src;g.fa&&so(g),g=T.call(M,v)}return g}function Jr(g){return g=g[Gt],g instanceof ut?g:null}var Sl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Al(g){return typeof g=="function"?g:(g[Sl]||(g[Sl]=function(v){return g.handleEvent(v)}),g[Sl])}function De(){V.call(this),this.i=new ut(this),this.M=this,this.G=null}_(De,V),De.prototype[At]=!0,De.prototype.removeEventListener=function(g,v,T,M){io(this,g,v,T,M)};function Fe(g,v){var T,M=g.G;if(M)for(T=[];M;M=M.G)T.push(M);if(g=g.M,M=v.type||v,typeof v=="string")v=new k(v,g);else if(v instanceof k)v.target=v.target||g;else{var K=v;v=new k(M,g),lt(v,K)}K=!0;let J,ot;if(T)for(ot=T.length-1;ot>=0;ot--)J=v.g=T[ot],K=qs(J,M,!0,v)&&K;if(J=v.g=g,K=qs(J,M,!0,v)&&K,K=qs(J,M,!1,v)&&K,T)for(ot=0;ot<T.length;ot++)J=v.g=T[ot],K=qs(J,M,!1,v)&&K}De.prototype.N=function(){if(De.Z.N.call(this),this.i){var g=this.i;for(const v in g.g){const T=g.g[v];for(let M=0;M<T.length;M++)dt(T[M]);delete g.g[v],g.h--}}this.G=null},De.prototype.J=function(g,v,T,M){return this.i.add(String(g),v,!1,T,M)},De.prototype.K=function(g,v,T,M){return this.i.add(String(g),v,!0,T,M)};function qs(g,v,T,M){if(v=g.i.g[String(v)],!v)return!0;v=v.concat();let K=!0;for(let J=0;J<v.length;++J){const ot=v[J];if(ot&&!ot.da&&ot.capture==T){const Dt=ot.listener,Se=ot.ha||ot.src;ot.fa&&bt(g.i,ot),K=Dt.call(Se,M)!==!1&&K}}return K&&!M.defaultPrevented}function ig(g,v){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=d(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:l.setTimeout(g,v||0)}function Vu(g){g.g=ig(()=>{g.g=null,g.i&&(g.i=!1,Vu(g))},g.l);const v=g.h;g.h=null,g.m.apply(null,v)}class _n extends V{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Vu(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(g){V.call(this),this.h=g,this.g={}}_(Zr,V);var wl=[];function Rl(g){xt(g.g,function(v,T){this.g.hasOwnProperty(T)&&so(v)},g),g.g={}}Zr.prototype.N=function(){Zr.Z.N.call(this),Rl(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gs=l.JSON.stringify,sg=l.JSON.parse,Lu=class{stringify(g){return l.JSON.stringify(g,void 0)}parse(g){return l.JSON.parse(g,void 0)}};function ju(){}function zu(){}var li={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ze(){k.call(this,"d")}_(Ze,k);function Gn(){k.call(this,"c")}_(Gn,k);var Ee={},Uu=null;function ro(){return Uu=Uu||new De}Ee.Ia="serverreachability";function Bu(g){k.call(this,Ee.Ia,g)}_(Bu,k);function wi(g){const v=ro();Fe(v,new Bu(v))}Ee.STAT_EVENT="statevent";function ta(g,v){k.call(this,Ee.STAT_EVENT,g),this.stat=v}_(ta,k);function Me(g){const v=ro();Fe(v,new ta(v,g))}Ee.Ja="timingevent";function Ri(g,v){k.call(this,Ee.Ja,g),this.size=v}_(Ri,k);function Ci(g,v){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){g()},v)}function ci(){this.g=!0}ci.prototype.ua=function(){this.g=!1};function rg(g,v,T,M,K,J){g.info(function(){if(g.g)if(J){var ot="",Dt=J.split("&");for(let Qt=0;Qt<Dt.length;Qt++){var Se=Dt[Qt].split("=");if(Se.length>1){const me=Se[0];Se=Se[1];const Wn=me.split("_");ot=Wn.length>=2&&Wn[1]=="type"?ot+(me+"="+Se+"&"):ot+(me+"=redacted&")}}}else ot=null;else ot=J;return"XMLHTTP REQ ("+M+") [attempt "+K+"]: "+v+`
`+T+`
`+ot})}function Fu(g,v,T,M,K,J,ot){g.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+K+"]: "+v+`
`+T+`
`+J+" "+ot})}function Ii(g,v,T,M){g.info(function(){return"XMLHTTP TEXT ("+v+"): "+ag(g,T)+(M?" "+M:"")})}function ea(g,v){g.info(function(){return"TIMEOUT: "+v})}ci.prototype.info=function(){};function ag(g,v){if(!g.g)return v;if(!v)return null;try{const J=JSON.parse(v);if(J){for(g=0;g<J.length;g++)if(Array.isArray(J[g])){var T=J[g];if(!(T.length<2)){var M=T[1];if(Array.isArray(M)&&!(M.length<1)){var K=M[0];if(K!="noop"&&K!="stop"&&K!="close")for(let ot=1;ot<M.length;ot++)M[ot]=""}}}}return Gs(J)}catch{return v}}var na={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Cl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Il;function ia(){}_(ia,ju),ia.prototype.g=function(){return new XMLHttpRequest},Il=new ia;function rs(g){return encodeURIComponent(String(g))}function Hu(g){var v=1;g=g.split(":");const T=[];for(;v>0&&g.length;)T.push(g.shift()),v--;return g.length&&T.push(g.join(":")),T}function ui(g,v,T,M){this.j=g,this.i=v,this.l=T,this.S=M||1,this.V=new Zr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hi}function hi(){this.i=null,this.g="",this.h=!1}var Ne={},Xe={};function Di(g,v,T){g.M=1,g.A=sa(ke(v)),g.u=T,g.R=!0,ao(g,null)}function ao(g,v){g.F=Date.now(),Mi(g),g.B=ke(g.A);var T=g.B,M=g.S;Array.isArray(M)||(M=[String(M)]),uo(T.i,"t",M),g.C=0,T=g.j.L,g.h=new hi,g.g=sh(g.j,T?v:null,!g.u),g.P>0&&(g.O=new _n(d(g.Y,g,g.g),g.P)),v=g.V,T=g.g,M=g.ba;var K="readystatechange";Array.isArray(K)||(K&&(wl[0]=K.toString()),K=wl);for(let J=0;J<K.length;J++){const ot=ge(T,K[J],M||v.handleEvent,!1,v.h||v);if(!ot)break;v.g[ot.key]=ot}v=g.J?F(g.J):{},g.u?(g.v||(g.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,v)):(g.v="GET",g.g.ea(g.B,g.v,null,v)),wi(),rg(g.i,g.v,g.B,g.l,g.S,g.u)}ui.prototype.ba=function(g){g=g.target;const v=this.O;v&&gi(g)==3?v.j():this.Y(g)},ui.prototype.Y=function(g){try{if(g==this.g)t:{const Dt=gi(this.g),Se=this.g.ya(),Qt=this.g.ca();if(!(Dt<3)&&(Dt!=3||this.g&&(this.h.h||this.g.la()||tn(this.g)))){this.K||Dt!=4||Se==7||(Se==8||Qt<=0?wi(3):wi(2)),Ni(this);var v=this.g.ca();this.X=v;var T=og(this);if(this.o=v==200,Fu(this.i,this.v,this.B,this.l,this.S,Dt,v),this.o){if(this.U&&!this.L){e:{if(this.g){var M,K=this.g;if((M=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(M)){var J=M;break e}}J=null}if(g=J)Ii(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Oi(this,g);else{this.o=!1,this.m=3,Me(12),kn(this),Yn(this);break t}}if(this.R){g=!0;let me;for(;!this.K&&this.C<T.length;)if(me=Gu(this,T),me==Xe){Dt==4&&(this.m=4,Me(14),g=!1),Ii(this.i,this.l,null,"[Incomplete Response]");break}else if(me==Ne){this.m=4,Me(15),Ii(this.i,this.l,T,"[Invalid Chunk]"),g=!1;break}else Ii(this.i,this.l,me,null),Oi(this,me);if(qu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||T.length!=0||this.h.h||(this.m=1,Me(16),g=!1),this.o=this.o&&g,!g)Ii(this.i,this.l,T,"[Invalid Chunked Response]"),kn(this),Yn(this);else if(T.length>0&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.aa&&!ot.P&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),ql(ot),ot.P=!0,Me(11))}}else Ii(this.i,this.l,T,null),Oi(this,T);Dt==4&&kn(this),this.o&&!this.K&&(Dt==4?th(this.j,this):(this.o=!1,Mi(this)))}else os(this.g),v==400&&T.indexOf("Unknown SID")>0?(this.m=3,Me(12)):(this.m=0,Me(13)),kn(this),Yn(this)}}}catch{}finally{}};function og(g){if(!qu(g))return g.g.la();const v=tn(g.g);if(v==="")return"";let T="";const M=v.length,K=gi(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return kn(g),Yn(g),"";g.h.i=new l.TextDecoder}for(let J=0;J<M;J++)g.h.h=!0,T+=g.h.i.decode(v[J],{stream:!(K&&J==M-1)});return v.length=0,g.h.g+=T,g.C=0,g.h.g}function qu(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Gu(g,v){var T=g.C,M=v.indexOf(`
`,T);return M==-1?Xe:(T=Number(v.substring(T,M)),isNaN(T)?Ne:(M+=1,M+T>v.length?Xe:(v=v.slice(M,M+T),g.C=M+T,v)))}ui.prototype.cancel=function(){this.K=!0,kn(this)};function Mi(g){g.T=Date.now()+g.H,oo(g,g.H)}function oo(g,v){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Ci(d(g.aa,g),v)}function Ni(g){g.D&&(l.clearTimeout(g.D),g.D=null)}ui.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(ea(this.i,this.B),this.M!=2&&(wi(),Me(17)),kn(this),this.m=2,Yn(this)):oo(this,this.T-g)};function Yn(g){g.j.I==0||g.K||th(g.j,g)}function kn(g){Ni(g);var v=g.O;v&&typeof v.dispose=="function"&&v.dispose(),g.O=null,Rl(g.V),g.g&&(v=g.g,g.g=null,v.abort(),v.dispose())}function Oi(g,v){try{var T=g.j;if(T.I!=0&&(T.g==g||Pi(T.h,g))){if(!g.L&&Pi(T.h,g)&&T.I==3){try{var M=T.Ba.g.parse(v)}catch{M=null}if(Array.isArray(M)&&M.length==3){var K=M;if(K[0]==0){t:if(!T.v){if(T.g)if(T.g.F+3e3<g.F)po(T),Zs(T);else break t;ha(T),Me(18)}}else T.xa=K[1],0<T.xa-T.K&&K[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Ci(d(T.Va,T),6e3));ki(T.h)<=1&&T.ta&&(T.ta=void 0)}else Bi(T,11)}else if((g.L||T.g==g)&&po(T),!P(v))for(K=T.Ba.g.parse(v),v=0;v<K.length;v++){let Qt=K[v];const me=Qt[0];if(!(me<=T.K))if(T.K=me,Qt=Qt[1],T.I==2)if(Qt[0]=="c"){T.M=Qt[1],T.ba=Qt[2];const Wn=Qt[3];Wn!=null&&(T.ka=Wn,T.j.info("VER="+T.ka));const Fi=Qt[4];Fi!=null&&(T.za=Fi,T.j.info("SVER="+T.za));const mi=Qt[5];mi!=null&&typeof mi=="number"&&mi>0&&(M=1.5*mi,T.O=M,T.j.info("backChannelRequestTimeoutMs_="+M)),M=T;const pi=g.g;if(pi){const fa=pi.g?pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fa){var J=M.h;J.g||fa.indexOf("spdy")==-1&&fa.indexOf("quic")==-1&&fa.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Nl(J,J.h),J.h=null))}if(M.G){const yo=pi.g?pi.g.getResponseHeader("X-HTTP-Session-Id"):null;yo&&(M.wa=yo,te(M.J,M.G,yo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-g.F,T.j.info("Handshake RTT: "+T.T+"ms")),M=T;var ot=g;if(M.na=ih(M,M.L?M.ba:null,M.W),ot.L){Ol(M.h,ot);var Dt=ot,Se=M.O;Se&&(Dt.H=Se),Dt.D&&(Ni(Dt),Mi(Dt)),M.g=ot}else Ju(M);T.i.length>0&&Ui(T)}else Qt[0]!="stop"&&Qt[0]!="close"||Bi(T,7);else T.I==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?Bi(T,7):Fl(T):Qt[0]!="noop"&&T.l&&T.l.qa(Qt),T.A=0)}}wi(4)}catch{}}var Oe=class{constructor(g,v){this.g=g,this.map=v}};function Dl(g){this.l=g||10,l.PerformanceNavigationTiming?(g=l.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ml(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function ki(g){return g.h?1:g.g?g.g.size:0}function Pi(g,v){return g.h?g.h==v:g.g?g.g.has(v):!1}function Nl(g,v){g.g?g.g.add(v):g.h=v}function Ol(g,v){g.h&&g.h==v?g.h=null:g.g&&g.g.has(v)&&g.g.delete(v)}Dl.prototype.cancel=function(){if(this.i=kl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function kl(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let v=g.i;for(const T of g.g.values())v=v.concat(T.G);return v}return E(g.i)}var Yu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lo(g,v){if(g){g=g.split("&");for(let T=0;T<g.length;T++){const M=g[T].indexOf("=");let K,J=null;M>=0?(K=g[T].substring(0,M),J=g[T].substring(M+1)):K=g[T],v(K,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Pn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;g instanceof Pn?(this.l=g.l,We(this,g.j),this.o=g.o,this.g=g.g,Ys(this,g.u),this.h=g.h,Pl(this,Qu(g.i)),this.m=g.m):g&&(v=String(g).match(Yu))?(this.l=!1,We(this,v[1]||"",!0),this.o=Vi(v[2]||""),this.g=Vi(v[3]||"",!0),Ys(this,v[4]),this.h=Vi(v[5]||"",!0),Pl(this,v[6]||"",!0),this.m=Vi(v[7]||"")):(this.l=!1,this.i=new Xs(null,this.l))}Pn.prototype.toString=function(){const g=[];var v=this.j;v&&g.push(ra(v,co,!0),":");var T=this.g;return(T||v=="file")&&(g.push("//"),(v=this.o)&&g.push(ra(v,co,!0),"@"),g.push(rs(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&g.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&g.push("/"),g.push(ra(T,T.charAt(0)=="/"?Vl:Ku,!0))),(T=this.i.toString())&&g.push("?",T),(T=this.m)&&g.push("#",ra(T,Xu)),g.join("")},Pn.prototype.resolve=function(g){const v=ke(this);let T=!!g.j;T?We(v,g.j):T=!!g.o,T?v.o=g.o:T=!!g.g,T?v.g=g.g:T=g.u!=null;var M=g.h;if(T)Ys(v,g.u);else if(T=!!g.h){if(M.charAt(0)!="/")if(this.g&&!this.h)M="/"+M;else{var K=v.h.lastIndexOf("/");K!=-1&&(M=v.h.slice(0,K+1)+M)}if(K=M,K==".."||K==".")M="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){M=K.lastIndexOf("/",0)==0,K=K.split("/");const J=[];for(let ot=0;ot<K.length;){const Dt=K[ot++];Dt=="."?M&&ot==K.length&&J.push(""):Dt==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),M&&ot==K.length&&J.push("")):(J.push(Dt),M=!0)}M=J.join("/")}else M=K}return T?v.h=M:T=g.i.toString()!=="",T?Pl(v,Qu(g.i)):T=!!g.m,T&&(v.m=g.m),v};function ke(g){return new Pn(g)}function We(g,v,T){g.j=T?Vi(v,!0):v,g.j&&(g.j=g.j.replace(/:$/,""))}function Ys(g,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);g.u=v}else g.u=null}function Pl(g,v,T){v instanceof Xs?(g.i=v,ho(g.i,g.l)):(T||(v=ra(v,Ks)),g.i=new Xs(v,g.l))}function te(g,v,T){g.i.set(v,T)}function sa(g){return te(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Vi(g,v){return g?v?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function ra(g,v,T){return typeof g=="string"?(g=encodeURI(g).replace(v,Tn),T&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Tn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var co=/[#\/\?@]/g,Ku=/[#\?:]/g,Vl=/[#\?]/g,Ks=/[#\?@]/g,Xu=/#/g;function Xs(g,v){this.h=this.g=null,this.i=g||null,this.j=!!v}function En(g){g.g||(g.g=new Map,g.h=0,g.i&&lo(g.i,function(v,T){g.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}n=Xs.prototype,n.add=function(g,v){En(this),this.i=null,g=Ws(this,g);let T=this.g.get(g);return T||this.g.set(g,T=[]),T.push(v),this.h+=1,this};function Wu(g,v){En(g),v=Ws(g,v),g.g.has(v)&&(g.i=null,g.h-=g.g.get(v).length,g.g.delete(v))}function Ll(g,v){return En(g),v=Ws(g,v),g.g.has(v)}n.forEach=function(g,v){En(this),this.g.forEach(function(T,M){T.forEach(function(K){g.call(v,K,M,this)},this)},this)};function jl(g,v){En(g);let T=[];if(typeof v=="string")Ll(g,v)&&(T=T.concat(g.g.get(Ws(g,v))));else for(g=Array.from(g.g.values()),v=0;v<g.length;v++)T=T.concat(g[v]);return T}n.set=function(g,v){return En(this),this.i=null,g=Ws(this,g),Ll(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[v]),this.h+=1,this},n.get=function(g,v){return g?(g=jl(this,g),g.length>0?String(g[0]):v):v};function uo(g,v,T){Wu(g,v),T.length>0&&(g.i=null,g.g.set(Ws(g,v),E(T)),g.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],v=Array.from(this.g.keys());for(let M=0;M<v.length;M++){var T=v[M];const K=rs(T);T=jl(this,T);for(let J=0;J<T.length;J++){let ot=K;T[J]!==""&&(ot+="="+rs(T[J])),g.push(ot)}}return this.i=g.join("&")};function Qu(g){const v=new Xs;return v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),v}function Ws(g,v){return v=String(v),g.j&&(v=v.toLowerCase()),v}function ho(g,v){v&&!g.j&&(En(g),g.i=null,g.g.forEach(function(T,M){const K=M.toLowerCase();M!=K&&(Wu(this,M),uo(this,K,T))},g)),g.j=v}function fi(g,v){const T=new ci;if(l.Image){const M=new Image;M.onload=p(Kn,T,"TestLoadImage: loaded",!0,v,M),M.onerror=p(Kn,T,"TestLoadImage: error",!1,v,M),M.onabort=p(Kn,T,"TestLoadImage: abort",!1,v,M),M.ontimeout=p(Kn,T,"TestLoadImage: timeout",!1,v,M),l.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=g}else v(!1)}function zl(g,v){const T=new ci,M=new AbortController,K=setTimeout(()=>{M.abort(),Kn(T,"TestPingServer: timeout",!1,v)},1e4);fetch(g,{signal:M.signal}).then(J=>{clearTimeout(K),J.ok?Kn(T,"TestPingServer: ok",!0,v):Kn(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(K),Kn(T,"TestPingServer: error",!1,v)})}function Kn(g,v,T,M,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),M(T)}catch{}}function Qs(){this.g=new Lu}function Li(g){this.i=g.Sb||null,this.h=g.ab||!1}_(Li,ju),Li.prototype.g=function(){return new aa(this.i,this.h)};function aa(g,v){De.call(this),this.H=g,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(aa,De),n=aa.prototype,n.open=function(g,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=v,this.readyState=1,di(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(v.body=g),(this.H||l).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$s(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,di(this)),this.g&&(this.readyState=3,di(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fo(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function fo(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var v=g.value?g.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!g.done}))&&(this.response=this.responseText+=v)}g.done?$s(this):di(this),this.readyState==3&&fo(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,$s(this))},n.Na=function(g){this.g&&(this.response=g,$s(this))},n.ga=function(){this.g&&$s(this)};function $s(g){g.readyState=4,g.l=null,g.j=null,g.B=null,di(g)}n.setRequestHeader=function(g,v){this.A.append(g,v)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,g.push(T[0]+": "+T[1]),T=v.next();return g.join(`\r
`)};function di(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Xn(g){let v="";return xt(g,function(T,M){v+=M,v+=":",v+=T,v+=`\r
`}),v}function oa(g,v,T){t:{for(M in T){var M=!1;break t}M=!0}M||(T=Xn(T),typeof g=="string"?T!=null&&rs(T):te(g,v,T))}function se(g){De.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(se,De);var ji=/^https?$/i,Ul=["POST","PUT"];n=se.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,v,T,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);v=v?v.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Il.g(),this.g.onreadystatechange=b(d(this.Ca,this));try{this.B=!0,this.g.open(v,String(g),!0),this.B=!1}catch(J){la(this,J);return}if(g=T||"",T=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var K in M)T.set(K,M[K]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const J of M.keys())T.set(J,M.get(J));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(T.keys()).find(J=>J.toLowerCase()=="content-type"),K=l.FormData&&g instanceof l.FormData,!(Array.prototype.indexOf.call(Ul,v,void 0)>=0)||M||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ot]of T)this.g.setRequestHeader(J,ot);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(J){la(this,J)}};function la(g,v){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=v,g.o=5,Bl(g),as(g)}function Bl(g){g.A||(g.A=!0,Fe(g,"complete"),Fe(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Fe(this,"complete"),Fe(this,"abort"),as(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),as(this,!0)),se.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ca(this):this.Xa())},n.Xa=function(){ca(this)};function ca(g){if(g.h&&typeof o<"u"){if(g.v&&gi(g)==4)setTimeout(g.Ca.bind(g),0);else if(Fe(g,"readystatechange"),gi(g)==4){g.h=!1;try{const J=g.ca();t:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break t;default:v=!1}var T;if(!(T=v)){var M;if(M=J===0){let ot=String(g.D).match(Yu)[1]||null;!ot&&l.self&&l.self.location&&(ot=l.self.location.protocol.slice(0,-1)),M=!ji.test(ot?ot.toLowerCase():"")}T=M}if(T)Fe(g,"complete"),Fe(g,"success");else{g.o=6;try{var K=gi(g)>2?g.g.statusText:""}catch{K=""}g.l=K+" ["+g.ca()+"]",Bl(g)}}finally{as(g)}}}}function as(g,v){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const T=g.g;g.g=null,v||Fe(g,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function gi(g){return g.g?g.g.readyState:0}n.ca=function(){try{return gi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var v=this.g.responseText;return g&&v.indexOf(g)==0&&(v=v.substring(g.length)),sg(v)}};function tn(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function os(g){const v={};g=(g.g&&gi(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<g.length;M++){if(P(g[M]))continue;var T=Hu(g[M]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const J=v[K]||[];v[K]=J,J.push(T)}Lt(v,function(M){return M.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function zi(g,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[g]||v}function Js(g){this.za=0,this.i=[],this.j=new ci,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zi("baseRetryDelayMs",5e3,g),this.Za=zi("retryDelaySeedMs",1e4,g),this.Ta=zi("forwardChannelMaxRetries",2,g),this.va=zi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Dl(g&&g.concurrentRequestLimit),this.Ba=new Qs,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Js.prototype,n.ka=8,n.I=1,n.connect=function(g,v,T,M){Me(0),this.W=g,this.H=v||{},T&&M!==void 0&&(this.H.OSID=T,this.H.OAID=M),this.F=this.X,this.J=ih(this,null,this.W),Ui(this)};function Fl(g){if(go(g),g.I==3){var v=g.V++,T=ke(g.J);if(te(T,"SID",g.M),te(T,"RID",v),te(T,"TYPE","terminate"),ua(g,T),v=new ui(g,g.j,v),v.M=2,v.A=sa(ke(T)),T=!1,l.navigator&&l.navigator.sendBeacon)try{T=l.navigator.sendBeacon(v.A.toString(),"")}catch{}!T&&l.Image&&(new Image().src=v.A,T=!0),T||(v.g=sh(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Mi(v)}nh(g)}function Zs(g){g.g&&(ql(g),g.g.cancel(),g.g=null)}function go(g){Zs(g),g.v&&(l.clearTimeout(g.v),g.v=null),po(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&l.clearTimeout(g.m),g.m=null)}function Ui(g){if(!Ml(g.h)&&!g.m){g.m=!0;var v=g.Ea;U||D(),Y||(U(),Y=!0),I.add(v,g),g.D=0}}function mo(g,v){return ki(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=v.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Ci(d(g.Ea,g,v),eh(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const K=new ui(this,this.j,g);let J=this.o;if(this.U&&(J?(J=F(J),lt(J,this.U)):J=this.U),this.u!==null||this.R||(K.J=J,J=null),this.S)t:{for(var v=0,T=0;T<this.i.length;T++){e:{var M=this.i[T];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break e}M=void 0}if(M===void 0)break;if(v+=M,v>4096){v=T;break t}if(v===4096||T===this.i.length-1){v=T+1;break t}}v=1e3}else v=1e3;v=$u(this,K,v),T=ke(this.J),te(T,"RID",g),te(T,"CVER",22),this.G&&te(T,"X-HTTP-Session-Id",this.G),ua(this,T),J&&(this.R?v="headers="+rs(Xn(J))+"&"+v:this.u&&oa(T,this.u,J)),Nl(this.h,K),this.Ra&&te(T,"TYPE","init"),this.S?(te(T,"$req",v),te(T,"SID","null"),K.U=!0,Di(K,T,null)):Di(K,T,v),this.I=2}}else this.I==3&&(g?Hl(this,g):this.i.length==0||Ml(this.h)||Hl(this))};function Hl(g,v){var T;v?T=v.l:T=g.V++;const M=ke(g.J);te(M,"SID",g.M),te(M,"RID",T),te(M,"AID",g.K),ua(g,M),g.u&&g.o&&oa(M,g.u,g.o),T=new ui(g,g.j,T,g.D+1),g.u===null&&(T.J=g.o),v&&(g.i=v.G.concat(g.i)),v=$u(g,T,1e3),T.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Nl(g.h,T),Di(T,M,v)}function ua(g,v){g.H&&xt(g.H,function(T,M){te(v,M,T)}),g.l&&xt({},function(T,M){te(v,M,T)})}function $u(g,v,T){T=Math.min(g.i.length,T);const M=g.l?d(g.l.Ka,g.l,g):null;t:{var K=g.i;let Dt=-1;for(;;){const Se=["count="+T];Dt==-1?T>0?(Dt=K[0].g,Se.push("ofs="+Dt)):Dt=0:Se.push("ofs="+Dt);let Qt=!0;for(let me=0;me<T;me++){var J=K[me].g;const Wn=K[me].map;if(J-=Dt,J<0)Dt=Math.max(0,K[me].g-100),Qt=!1;else try{J="req"+J+"_"||"";try{var ot=Wn instanceof Map?Wn:Object.entries(Wn);for(const[Fi,mi]of ot){let pi=mi;u(mi)&&(pi=Gs(mi)),Se.push(J+Fi+"="+encodeURIComponent(pi))}}catch(Fi){throw Se.push(J+"type="+encodeURIComponent("_badmap")),Fi}}catch{M&&M(Wn)}}if(Qt){ot=Se.join("&");break t}}ot=void 0}return g=g.i.splice(0,T),v.G=g,ot}function Ju(g){if(!g.g&&!g.v){g.Y=1;var v=g.Da;U||D(),Y||(U(),Y=!0),I.add(v,g),g.A=0}}function ha(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Ci(d(g.Da,g),eh(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,Zu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Ci(d(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Me(10),Zs(this),Zu(this))};function ql(g){g.B!=null&&(l.clearTimeout(g.B),g.B=null)}function Zu(g){g.g=new ui(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var v=ke(g.na);te(v,"RID","rpc"),te(v,"SID",g.M),te(v,"AID",g.K),te(v,"CI",g.F?"0":"1"),!g.F&&g.ia&&te(v,"TO",g.ia),te(v,"TYPE","xmlhttp"),ua(g,v),g.u&&g.o&&oa(v,g.u,g.o),g.O&&(g.g.H=g.O);var T=g.g;g=g.ba,T.M=1,T.A=sa(ke(v)),T.u=null,T.R=!0,ao(T,g)}n.Va=function(){this.C!=null&&(this.C=null,Zs(this),ha(this),Me(19))};function po(g){g.C!=null&&(l.clearTimeout(g.C),g.C=null)}function th(g,v){var T=null;if(g.g==v){po(g),ql(g),g.g=null;var M=2}else if(Pi(g.h,v))T=v.G,Ol(g.h,v),M=1;else return;if(g.I!=0){if(v.o)if(M==1){T=v.u?v.u.length:0,v=Date.now()-v.F;var K=g.D;M=ro(),Fe(M,new Ri(M,T)),Ui(g)}else Ju(g);else if(K=v.m,K==3||K==0&&v.X>0||!(M==1&&mo(g,v)||M==2&&ha(g)))switch(T&&T.length>0&&(v=g.h,v.i=v.i.concat(T)),K){case 1:Bi(g,5);break;case 4:Bi(g,10);break;case 3:Bi(g,6);break;default:Bi(g,2)}}}function eh(g,v){let T=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(T*=2),T*v}function Bi(g,v){if(g.j.info("Error code "+v),v==2){var T=d(g.bb,g),M=g.Ua;const K=!M;M=new Pn(M||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||We(M,"https"),sa(M),K?fi(M.toString(),T):zl(M.toString(),T)}else Me(2);g.I=0,g.l&&g.l.pa(v),nh(g),go(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))};function nh(g){if(g.I=0,g.ja=[],g.l){const v=kl(g.h);(v.length!=0||g.i.length!=0)&&(w(g.ja,v),w(g.ja,g.i),g.h.i.length=0,E(g.i),g.i.length=0),g.l.oa()}}function ih(g,v,T){var M=T instanceof Pn?ke(T):new Pn(T);if(M.g!="")v&&(M.g=v+"."+M.g),Ys(M,M.u);else{var K=l.location;M=K.protocol,v=v?v+"."+K.hostname:K.hostname,K=+K.port;const J=new Pn(null);M&&We(J,M),v&&(J.g=v),K&&Ys(J,K),T&&(J.h=T),M=J}return T=g.G,v=g.wa,T&&v&&te(M,T,v),te(M,"VER",g.ka),ua(g,M),M}function sh(g,v,T){if(v&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=g.Aa&&!g.ma?new se(new Li({ab:T})):new se(g.ma),v.Fa(g.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function rh(){}n=rh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function tr(){}tr.prototype.g=function(g,v){return new bn(g,v)};function bn(g,v){De.call(this),this.g=new Js(v),this.l=g,this.h=v&&v.messageUrlParams||null,g=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(g?g["X-WebChannel-Content-Type"]=v.messageContentType:g={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(g?g["X-WebChannel-Client-Profile"]=v.sa:g={"X-WebChannel-Client-Profile":v.sa}),this.g.U=g,(g=v&&v.Qb)&&!P(g)&&(this.g.u=g),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!P(v)&&(this.g.G=v,g=this.h,g!==null&&v in g&&(g=this.h,v in g&&delete g[v])),this.j=new ls(this)}_(bn,De),bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){Fl(this.g)},bn.prototype.o=function(g){var v=this.g;if(typeof g=="string"){var T={};T.__data__=g,g=T}else this.v&&(T={},T.__data__=Gs(g),g=T);v.i.push(new Oe(v.Ya++,g)),v.I==3&&Ui(v)},bn.prototype.N=function(){this.g.l=null,delete this.j,Fl(this.g),delete this.g,bn.Z.N.call(this)};function ah(g){Ze.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var v=g.__sm__;if(v){t:{for(const T in v){g=T;break t}g=void 0}(this.i=g)&&(g=this.i,v=v!==null&&g in v?v[g]:void 0),this.data=v}else this.data=g}_(ah,Ze);function oh(){Gn.call(this),this.status=1}_(oh,Gn);function ls(g){this.g=g}_(ls,rh),ls.prototype.ra=function(){Fe(this.g,"a")},ls.prototype.qa=function(g){Fe(this.g,new ah(g))},ls.prototype.pa=function(g){Fe(this.g,new oh)},ls.prototype.oa=function(){Fe(this.g,"b")},tr.prototype.createWebChannel=tr.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,uA=function(){return new tr},cA=function(){return ro()},lA=Ee,Fp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},na.NO_ERROR=0,na.TIMEOUT=8,na.HTTP_ERROR=6,Pf=na,Cl.COMPLETE="complete",oA=Cl,zu.EventType=li,li.OPEN="a",li.CLOSE="b",li.ERROR="c",li.MESSAGE="d",De.prototype.listen=De.prototype.J,Vc=zu,se.prototype.listenOnce=se.prototype.K,se.prototype.getLastError=se.prototype.Ha,se.prototype.getLastErrorCode=se.prototype.ya,se.prototype.getStatus=se.prototype.ca,se.prototype.getResponseJson=se.prototype.La,se.prototype.getResponseText=se.prototype.la,se.prototype.send=se.prototype.ea,se.prototype.setWithCredentials=se.prototype.Fa,aA=se}).apply(typeof df<"u"?df:typeof self<"u"?self:typeof window<"u"?window:{});const Fx="@firebase/firestore",Hx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=new Ey("@firebase/firestore");function Wo(){return Ka.logLevel}function ft(n,...t){if(Ka.logLevel<=Ut.DEBUG){const e=t.map(ky);Ka.debug(`Firestore (${bl}): ${n}`,...e)}}function js(n,...t){if(Ka.logLevel<=Ut.ERROR){const e=t.map(ky);Ka.error(`Firestore (${bl}): ${n}`,...e)}}function al(n,...t){if(Ka.logLevel<=Ut.WARN){const e=t.map(ky);Ka.warn(`Firestore (${bl}): ${n}`,...e)}}function ky(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,hA(n,i,e)}function hA(n,t,e){let i=`FIRESTORE (${bl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw js(i),new Error(i)}function Zt(n,t,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,n||hA(t,r,i)}function It(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class mt extends Bs{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class AM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(fn.UNAUTHENTICATED)))}shutdown(){}}class wM{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class RM{constructor(t){this.t=t,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Zt(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,e(f)):Promise.resolve();let o=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ks,t.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const f=o;t.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},u=f=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ks)}}),0),l()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((i=>this.i!==t?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Zt(typeof i.accessToken=="string",31837,{l:i}),new fA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Zt(t===null||typeof t=="string",2055,{h:t}),new fn(t)}}class CM{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class IM{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new CM(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qx{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DM{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ri(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Zt(this.o===void 0,3512);const i=o=>{o.error!=null&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ft("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable((()=>i(o)))};const r=o=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qx(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(Zt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new qx(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=MM(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%62))}return i}}function Bt(n,t){return n<t?-1:n>t?1:0}function Hp(n,t){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++){const r=n.charAt(i),o=t.charAt(i);if(r!==o)return gp(r)===gp(o)?Bt(r,o):gp(r)?1:-1}return Bt(n.length,t.length)}const NM=55296,OM=57343;function gp(n){const t=n.charCodeAt(0);return t>=NM&&t<=OM}function ol(n,t,e){return n.length===t.length&&n.every(((i,r)=>e(i,t[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="__name__";class Wi{constructor(t,e,i){e===void 0?e=0:e>t.length&&St(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&St(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Wi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Wi?t.forEach((i=>{e.push(i)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const o=Wi.compareSegments(t.get(r),e.get(r));if(o!==0)return o}return Bt(t.length,e.length)}static compareSegments(t,e){const i=Wi.isNumericId(t),r=Wi.isNumericId(e);return i&&!r?-1:!i&&r?1:i&&r?Wi.extractNumericId(t).compare(Wi.extractNumericId(e)):Hp(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Lr.fromString(t.substring(4,t.length-2))}}class fe extends Wi{construct(t,e,i){return new fe(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new mt(rt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((r=>r.length>0)))}return new fe(e)}static emptyPath(){return new fe([])}}const kM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Wi{construct(t,e,i){return new on(t,e,i)}static isValidIdentifier(t){return kM.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Gx}static keyField(){return new on([Gx])}static fromServerFormat(t){const e=[];let i="",r=0;const o=()=>{if(i.length===0)throw new mt(rt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let l=!1;for(;r<t.length;){const u=t[r];if(u==="\\"){if(r+1===t.length)throw new mt(rt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new mt(rt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=f,r+=2}else u==="`"?(l=!l,r++):u!=="."||l?(i+=u,r++):(o(),r++)}if(o(),l)throw new mt(rt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new on(e)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(t){this.path=t}static fromPath(t){return new _t(fe.fromString(t))}static fromName(t){return new _t(fe.fromString(t).popFirst(5))}static empty(){return new _t(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&fe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return fe.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new _t(new fe(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(n,t,e){if(!e)throw new mt(rt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function PM(n,t,e,i){if(t===!0&&i===!0)throw new mt(rt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Yx(n){if(!_t.isDocumentKey(n))throw new mt(rt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Kx(n){if(_t.isDocumentKey(n))throw new mt(rt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Vy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":St(12329,{type:typeof n})}function On(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new mt(rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Vy(n);throw new mt(rt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(n,t){const e={typeString:n};return t&&(e.value=t),e}function Ru(n,t){if(!gA(n))throw new mt(rt.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const r=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const l=n[i];if(r&&typeof l!==r){e=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&l!==o.value){e=`Expected '${i}' field to equal '${o.value}'`;break}}if(e)throw new mt(rt.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=-62135596800,Wx=1e6;class Jt{static now(){return Jt.fromMillis(Date.now())}static fromDate(t){return Jt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*Wx);return new Jt(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new mt(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new mt(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<Xx)throw new mt(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mt(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Wx}_compareTo(t){return this.seconds===t.seconds?Bt(this.nanoseconds,t.nanoseconds):Bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ru(t,Jt._jsonSchema))return new Jt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Xx;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Jt._jsonSchemaVersion="firestore/timestamp/1.0",Jt._jsonSchema={type:Ue("string",Jt._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{static fromTimestamp(t){return new wt(t)}static min(){return new wt(new Jt(0,0))}static max(){return new wt(new Jt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=-1;function VM(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=wt.fromTimestamp(i===1e9?new Jt(e+1,0):new Jt(e,i));return new Ur(r,_t.empty(),t)}function LM(n){return new Ur(n.readTime,n.key,au)}class Ur{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Ur(wt.min(),_t.empty(),au)}static max(){return new Ur(wt.max(),_t.empty(),au)}}function jM(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=_t.comparator(n.documentKey,t.documentKey),e!==0?e:Bt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(n){if(n.code!==rt.FAILED_PRECONDITION||n.message!==zM)throw n;ft("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&St(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new st(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof st?e:st.resolve(e)}catch(e){return st.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):st.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):st.reject(e)}static resolve(t){return new st(((e,i)=>{e(t)}))}static reject(t){return new st(((e,i)=>{i(t)}))}static waitFor(t){return new st(((e,i)=>{let r=0,o=0,l=!1;t.forEach((u=>{++r,u.next((()=>{++o,l&&o===r&&e()}),(f=>i(f)))})),l=!0,o===r&&e()}))}static or(t){let e=st.resolve(!1);for(const i of t)e=e.next((r=>r?st.resolve(r):i()));return e}static forEach(t,e){const i=[];return t.forEach(((r,o)=>{i.push(e.call(this,r,o))})),this.waitFor(i)}static mapArray(t,e){return new st(((i,r)=>{const o=t.length,l=new Array(o);let u=0;for(let f=0;f<o;f++){const d=f;e(t[d]).next((p=>{l[d]=p,++u,u===o&&i(l)}),(p=>r(p)))}}))}static doWhile(t,e){return new st(((i,r)=>{const o=()=>{t()===!0?e().next((()=>{o()}),r):i()};o()}))}}function BM(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function xl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Dd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=-1;function Md(n){return n==null}function sd(n){return n===0&&1/n==-1/0}function FM(n){return typeof n=="number"&&Number.isInteger(n)&&!sd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="";function HM(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Qx(t)),t=qM(n.get(e),t);return Qx(t)}function qM(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":e+="";break;case mA:e+="";break;default:e+=o}}return e}function Qx(n){return n+mA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Xr(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function pA(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t,e){this.comparator=t,this.root=e||an.EMPTY}insert(t,e){return new be(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,an.BLACK,null,null))}remove(t){return new be(this.comparator,this.root.remove(t,this.comparator).copy(null,null,an.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){const t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new gf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new gf(this.root,t,this.comparator,!1)}getReverseIterator(){return new gf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new gf(this.root,t,this.comparator,!0)}}class gf{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class an{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??an.RED,this.left=r??an.EMPTY,this.right=o??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new an(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return an.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw St(43730,{key:this.key,value:this.value});if(this.right.isRed())throw St(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw St(27949);return t+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw St(57766)}get value(){throw St(16141)}get color(){throw St(16727)}get left(){throw St(29726)}get right(){throw St(36894)}copy(t,e,i,r,o){return this}insert(t,e,i){return new an(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.comparator=t,this.data=new be(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Jx(this.data.getIterator())}getIteratorFrom(t){return new Jx(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((i=>{e=e.add(i)})),e}isEqual(t){if(!(t instanceof Ye)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Ye(this.comparator);return e.data=t,e}}class Jx{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t){this.fields=t,t.sort(on.comparator)}static empty(){return new qn([])}unionWith(t){let e=new Ye(on.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new qn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ol(this.fields,t.fields,((e,i)=>e.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new yA("Invalid base64 string: "+o):o}})(t);return new ln(e)}static fromUint8Array(t){const e=(function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o})(t);return new ln(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const GM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(n){if(Zt(!!n,39018),typeof n=="string"){let t=0;const e=GM.exec(n);if(Zt(!!e,46558,{timestamp:n}),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Re(n.seconds),nanos:Re(n.nanos)}}function Re(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fr(n){return typeof n=="string"?ln.fromBase64String(n):ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="server_timestamp",bA="__type__",vA="__previous_value__",xA="__local_write_time__";function jy(n){var e,i;return((i=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[bA])==null?void 0:i.stringValue)===_A}function Nd(n){const t=n.mapValue.fields[vA];return jy(t)?Nd(t):t}function ou(n){const t=Br(n.mapValue.fields[xA].timestampValue);return new Jt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(t,e,i,r,o,l,u,f,d,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=p}}const rd="(default)";class lu{constructor(t,e){this.projectId=t,this.database=e||rd}static empty(){return new lu("","")}get isDefaultDatabase(){return this.database===rd}isEqual(t){return t instanceof lu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="__type__",KM="__max__",mf={mapValue:{}},EA="__vector__",ad="value";function Hr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jy(n)?4:WM(n)?9007199254740991:XM(n)?10:11:St(28295,{value:n})}function is(n,t){if(n===t)return!0;const e=Hr(n);if(e!==Hr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return ou(n).isEqual(ou(t));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Br(r.timestampValue),u=Br(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(r,o){return Fr(r.bytesValue).isEqual(Fr(o.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(r,o){return Re(r.geoPointValue.latitude)===Re(o.geoPointValue.latitude)&&Re(r.geoPointValue.longitude)===Re(o.geoPointValue.longitude)})(n,t);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return Re(r.integerValue)===Re(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=Re(r.doubleValue),u=Re(o.doubleValue);return l===u?sd(l)===sd(u):isNaN(l)&&isNaN(u)}return!1})(n,t);case 9:return ol(n.arrayValue.values||[],t.arrayValue.values||[],is);case 10:case 11:return(function(r,o){const l=r.mapValue.fields||{},u=o.mapValue.fields||{};if($x(l)!==$x(u))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(u[f]===void 0||!is(l[f],u[f])))return!1;return!0})(n,t);default:return St(52216,{left:n})}}function cu(n,t){return(n.values||[]).find((e=>is(e,t)))!==void 0}function ll(n,t){if(n===t)return 0;const e=Hr(n),i=Hr(t);if(e!==i)return Bt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,t.booleanValue);case 2:return(function(o,l){const u=Re(o.integerValue||o.doubleValue),f=Re(l.integerValue||l.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1})(n,t);case 3:return Zx(n.timestampValue,t.timestampValue);case 4:return Zx(ou(n),ou(t));case 5:return Hp(n.stringValue,t.stringValue);case 6:return(function(o,l){const u=Fr(o),f=Fr(l);return u.compareTo(f)})(n.bytesValue,t.bytesValue);case 7:return(function(o,l){const u=o.split("/"),f=l.split("/");for(let d=0;d<u.length&&d<f.length;d++){const p=Bt(u[d],f[d]);if(p!==0)return p}return Bt(u.length,f.length)})(n.referenceValue,t.referenceValue);case 8:return(function(o,l){const u=Bt(Re(o.latitude),Re(l.latitude));return u!==0?u:Bt(Re(o.longitude),Re(l.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return tT(n.arrayValue,t.arrayValue);case 10:return(function(o,l){var b,E,w,A;const u=o.fields||{},f=l.fields||{},d=(b=u[ad])==null?void 0:b.arrayValue,p=(E=f[ad])==null?void 0:E.arrayValue,_=Bt(((w=d==null?void 0:d.values)==null?void 0:w.length)||0,((A=p==null?void 0:p.values)==null?void 0:A.length)||0);return _!==0?_:tT(d,p)})(n.mapValue,t.mapValue);case 11:return(function(o,l){if(o===mf.mapValue&&l===mf.mapValue)return 0;if(o===mf.mapValue)return 1;if(l===mf.mapValue)return-1;const u=o.fields||{},f=Object.keys(u),d=l.fields||{},p=Object.keys(d);f.sort(),p.sort();for(let _=0;_<f.length&&_<p.length;++_){const b=Hp(f[_],p[_]);if(b!==0)return b;const E=ll(u[f[_]],d[p[_]]);if(E!==0)return E}return Bt(f.length,p.length)})(n.mapValue,t.mapValue);default:throw St(23264,{he:e})}}function Zx(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Bt(n,t);const e=Br(n),i=Br(t),r=Bt(e.seconds,i.seconds);return r!==0?r:Bt(e.nanos,i.nanos)}function tT(n,t){const e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){const o=ll(e[r],i[r]);if(o)return o}return Bt(e.length,i.length)}function cl(n){return qp(n)}function qp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const i=Br(e);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return Fr(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return _t.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let i="[",r=!0;for(const o of e.values||[])r?r=!1:i+=",",i+=qp(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(e){const i=Object.keys(e.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${qp(e.fields[l])}`;return r+"}"})(n.mapValue):St(61005,{value:n})}function Vf(n){switch(Hr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Nd(n);return t?16+Vf(t):16;case 5:return 2*n.stringValue.length;case 6:return Fr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+Vf(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Xr(i.fields,((o,l)=>{r+=o.length+Vf(l)})),r})(n.mapValue);default:throw St(13486,{value:n})}}function Gp(n){return!!n&&"integerValue"in n}function zy(n){return!!n&&"arrayValue"in n}function eT(n){return!!n&&"nullValue"in n}function nT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Lf(n){return!!n&&"mapValue"in n}function XM(n){var e,i;return((i=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[TA])==null?void 0:i.stringValue)===EA}function Xc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Xr(n.mapValue.fields,((e,i)=>t.mapValue.fields[e]=Xc(i))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Xc(n.arrayValue.values[e]);return t}return{...n}}function WM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===KM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t){this.value=t}static empty(){return new Mn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Lf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Xc(e)}setAll(t){let e=on.emptyPath(),i={},r=[];t.forEach(((l,u)=>{if(!e.isImmediateParentOf(u)){const f=this.getFieldsMap(e);this.applyChanges(f,i,r),i={},r=[],e=u.popLast()}l?i[u.lastSegment()]=Xc(l):r.push(u.lastSegment())}));const o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){const e=this.field(t.popLast());Lf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return is(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Lf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Xr(e,((r,o)=>t[r]=o));for(const r of i)delete t[r]}clone(){return new Mn(Xc(this.value))}}function SA(n){const t=[];return Xr(n.fields,((e,i)=>{const r=new on([e]);if(Lf(i)){const o=SA(i.mapValue).fields;if(o.length===0)t.push(r);else for(const l of o)t.push(r.child(l))}else t.push(r)})),new qn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t,e,i,r,o,l,u){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(t){return new gn(t,0,wt.min(),wt.min(),wt.min(),Mn.empty(),0)}static newFoundDocument(t,e,i,r){return new gn(t,1,e,wt.min(),i,r,0)}static newNoDocument(t,e){return new gn(t,2,e,wt.min(),wt.min(),Mn.empty(),0)}static newUnknownDocument(t,e){return new gn(t,3,e,wt.min(),wt.min(),Mn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof gn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t,e){this.position=t,this.inclusive=e}}function iT(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const o=t[r],l=n.position[r];if(o.field.isKeyField()?i=_t.comparator(_t.fromName(l.referenceValue),e.key):i=ll(l,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function sT(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!is(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(t,e="asc"){this.field=t,this.dir=e}}function QM(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{}class qe extends AA{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new JM(t,e,i):e==="array-contains"?new eN(t,i):e==="in"?new nN(t,i):e==="not-in"?new iN(t,i):e==="array-contains-any"?new sN(t,i):new qe(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new ZM(t,i):new tN(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(ll(e,this.value)):e!==null&&Hr(this.value)===Hr(e)&&this.matchesComparison(ll(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return St(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ss extends AA{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new ss(t,e)}matches(t){return wA(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wA(n){return n.op==="and"}function RA(n){return $M(n)&&wA(n)}function $M(n){for(const t of n.filters)if(t instanceof ss)return!1;return!0}function Yp(n){if(n instanceof qe)return n.field.canonicalString()+n.op.toString()+cl(n.value);if(RA(n))return n.filters.map((t=>Yp(t))).join(",");{const t=n.filters.map((e=>Yp(e))).join(",");return`${n.op}(${t})`}}function CA(n,t){return n instanceof qe?(function(i,r){return r instanceof qe&&i.op===r.op&&i.field.isEqual(r.field)&&is(i.value,r.value)})(n,t):n instanceof ss?(function(i,r){return r instanceof ss&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,l,u)=>o&&CA(l,r.filters[u])),!0):!1})(n,t):void St(19439)}function IA(n){return n instanceof qe?(function(e){return`${e.field.canonicalString()} ${e.op} ${cl(e.value)}`})(n):n instanceof ss?(function(e){return e.op.toString()+" {"+e.getFilters().map(IA).join(" ,")+"}"})(n):"Filter"}class JM extends qe{constructor(t,e,i){super(t,e,i),this.key=_t.fromName(i.referenceValue)}matches(t){const e=_t.comparator(t.key,this.key);return this.matchesComparison(e)}}class ZM extends qe{constructor(t,e){super(t,"in",e),this.keys=DA("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class tN extends qe{constructor(t,e){super(t,"not-in",e),this.keys=DA("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function DA(n,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map((i=>_t.fromName(i.referenceValue)))}class eN extends qe{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return zy(e)&&cu(e.arrayValue,this.value)}}class nN extends qe{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&cu(this.value.arrayValue,e)}}class iN extends qe{constructor(t,e){super(t,"not-in",e)}matches(t){if(cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!cu(this.value.arrayValue,e)}}class sN extends qe{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!zy(e)||!e.arrayValue.values)&&e.arrayValue.values.some((i=>cu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(t,e=null,i=[],r=[],o=null,l=null,u=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=u,this.Te=null}}function rT(n,t=null,e=[],i=[],r=null,o=null,l=null){return new rN(n,t,e,i,r,o,l)}function Uy(n){const t=It(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((i=>Yp(i))).join(","),e+="|ob:",e+=t.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Md(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((i=>cl(i))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((i=>cl(i))).join(",")),t.Te=e}return t.Te}function By(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!QM(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!CA(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!sT(n.startAt,t.startAt)&&sT(n.endAt,t.endAt)}function Kp(n){return _t.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(t,e=null,i=[],r=[],o=null,l="F",u=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aN(n,t,e,i,r,o,l,u){return new Od(n,t,e,i,r,o,l,u)}function kd(n){return new Od(n)}function aT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function oN(n){return n.collectionGroup!==null}function Wc(n){const t=It(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Ye(on.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((d=>{d.isInequality()&&(u=u.add(d.field))}))})),u})(t).forEach((o=>{e.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new ld(o,i))})),e.has(on.keyField().canonicalString())||t.Ie.push(new ld(on.keyField(),i))}return t.Ie}function Ji(n){const t=It(n);return t.Ee||(t.Ee=lN(t,Wc(n))),t.Ee}function lN(n,t){if(n.limitType==="F")return rT(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new ld(r.field,o)}));const e=n.endAt?new od(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new od(n.startAt.position,n.startAt.inclusive):null;return rT(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Xp(n,t,e){return new Od(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Pd(n,t){return By(Ji(n),Ji(t))&&n.limitType===t.limitType}function MA(n){return`${Uy(Ji(n))}|lt:${n.limitType}`}function Qo(n){return`Query(target=${(function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map((r=>IA(r))).join(", ")}]`),Md(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((r=>cl(r))).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((r=>cl(r))).join(",")),`Target(${i})`})(Ji(n))}; limitType=${n.limitType})`}function Vd(n,t){return t.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):_t.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,t)&&(function(i,r){for(const o of Wc(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,t)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(n,t)&&(function(i,r){return!(i.startAt&&!(function(l,u,f){const d=iT(l,u,f);return l.inclusive?d<=0:d<0})(i.startAt,Wc(i),r)||i.endAt&&!(function(l,u,f){const d=iT(l,u,f);return l.inclusive?d>=0:d>0})(i.endAt,Wc(i),r))})(n,t)}function cN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function NA(n){return(t,e)=>{let i=!1;for(const r of Wc(n)){const o=uN(r,t,e);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function uN(n,t,e){const i=n.field.isKeyField()?_t.comparator(t.key,e.key):(function(o,l,u){const f=l.data.field(o),d=u.data.field(o);return f!==null&&d!==null?ll(f,d):St(42886)})(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return St(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Xr(this.inner,((e,i)=>{for(const[r,o]of i)t(r,o)}))}isEmpty(){return pA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=new be(_t.comparator);function zs(){return hN}const OA=new be(_t.comparator);function Lc(...n){let t=OA;for(const e of n)t=t.insert(e.key,e);return t}function kA(n){let t=OA;return n.forEach(((e,i)=>t=t.insert(e,i.overlayedDocument))),t}function Va(){return Qc()}function PA(){return Qc()}function Qc(){return new Za((n=>n.toString()),((n,t)=>n.isEqual(t)))}const fN=new be(_t.comparator),dN=new Ye(_t.comparator);function Ft(...n){let t=dN;for(const e of n)t=t.add(e);return t}const gN=new Ye(Bt);function mN(){return gN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sd(t)?"-0":t}}function VA(n){return{integerValue:""+n}}function pN(n,t){return FM(t)?VA(t):Fy(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(){this._=void 0}}function yN(n,t,e){return n instanceof cd?(function(r,o){const l={fields:{[bA]:{stringValue:_A},[xA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&jy(o)&&(o=Nd(o)),o&&(l.fields[vA]=o),{mapValue:l}})(e,t):n instanceof uu?jA(n,t):n instanceof hu?zA(n,t):(function(r,o){const l=LA(r,o),u=oT(l)+oT(r.Ae);return Gp(l)&&Gp(r.Ae)?VA(u):Fy(r.serializer,u)})(n,t)}function _N(n,t,e){return n instanceof uu?jA(n,t):n instanceof hu?zA(n,t):e}function LA(n,t){return n instanceof ud?(function(i){return Gp(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(t)?t:{integerValue:0}:null}class cd extends Ld{}class uu extends Ld{constructor(t){super(),this.elements=t}}function jA(n,t){const e=UA(t);for(const i of n.elements)e.some((r=>is(r,i)))||e.push(i);return{arrayValue:{values:e}}}class hu extends Ld{constructor(t){super(),this.elements=t}}function zA(n,t){let e=UA(t);for(const i of n.elements)e=e.filter((r=>!is(r,i)));return{arrayValue:{values:e}}}class ud extends Ld{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function oT(n){return Re(n.integerValue||n.doubleValue)}function UA(n){return zy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function bN(n,t){return n.field.isEqual(t.field)&&(function(i,r){return i instanceof uu&&r instanceof uu||i instanceof hu&&r instanceof hu?ol(i.elements,r.elements,is):i instanceof ud&&r instanceof ud?is(i.Ae,r.Ae):i instanceof cd&&r instanceof cd})(n.transform,t.transform)}class vN{constructor(t,e){this.version=t,this.transformResults=e}}class oi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new oi}static exists(t){return new oi(void 0,t)}static updateTime(t){return new oi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function jf(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class jd{}function BA(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Hy(n.key,oi.none()):new Cu(n.key,n.data,oi.none());{const e=n.data,i=Mn.empty();let r=new Ye(on.comparator);for(let o of t.fields)if(!r.has(o)){let l=e.field(o);l===null&&o.length>1&&(o=o.popLast(),l=e.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new Wr(n.key,i,new qn(r.toArray()),oi.none())}}function xN(n,t,e){n instanceof Cu?(function(r,o,l){const u=r.value.clone(),f=cT(r.fieldTransforms,o,l.transformResults);u.setAll(f),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(n,t,e):n instanceof Wr?(function(r,o,l){if(!jf(r.precondition,o))return void o.convertToUnknownDocument(l.version);const u=cT(r.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(FA(r)),f.setAll(u),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,t,e):(function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,t,e)}function $c(n,t,e,i){return n instanceof Cu?(function(o,l,u,f){if(!jf(o.precondition,l))return u;const d=o.value.clone(),p=uT(o.fieldTransforms,f,l);return d.setAll(p),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null})(n,t,e,i):n instanceof Wr?(function(o,l,u,f){if(!jf(o.precondition,l))return u;const d=uT(o.fieldTransforms,f,l),p=l.data;return p.setAll(FA(o)),p.setAll(d),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(n,t,e,i):(function(o,l,u){return jf(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(n,t,e)}function TN(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),o=LA(i.transform,r||null);o!=null&&(e===null&&(e=Mn.empty()),e.set(i.field,o))}return e||null}function lT(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ol(i,r,((o,l)=>bN(o,l)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Cu extends jd{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Wr extends jd{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function FA(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}})),t}function cT(n,t,e){const i=new Map;Zt(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let r=0;r<e.length;r++){const o=n[r],l=o.transform,u=t.data.field(o.field);i.set(o.field,_N(l,u,e[r]))}return i}function uT(n,t,e){const i=new Map;for(const r of n){const o=r.transform,l=e.data.field(r.field);i.set(r.field,yN(o,l,t))}return i}class Hy extends jd{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EN extends jd{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(t.key)&&xN(o,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=$c(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=$c(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=PA();return this.mutations.forEach((r=>{const o=t.get(r.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=e.has(r.key)?null:u;const f=BA(l,u);f!==null&&i.set(r.key,f),l.isValidDocument()||l.convertToNoDocument(wt.min())})),i}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Ft())}isEqual(t){return this.batchId===t.batchId&&ol(this.mutations,t.mutations,((e,i)=>lT(e,i)))&&ol(this.baseMutations,t.baseMutations,((e,i)=>lT(e,i)))}}class qy{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Zt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=(function(){return fN})();const o=t.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new qy(t,e,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,Yt;function RN(n){switch(n){case rt.OK:return St(64938);case rt.CANCELLED:case rt.UNKNOWN:case rt.DEADLINE_EXCEEDED:case rt.RESOURCE_EXHAUSTED:case rt.INTERNAL:case rt.UNAVAILABLE:case rt.UNAUTHENTICATED:return!1;case rt.INVALID_ARGUMENT:case rt.NOT_FOUND:case rt.ALREADY_EXISTS:case rt.PERMISSION_DENIED:case rt.FAILED_PRECONDITION:case rt.ABORTED:case rt.OUT_OF_RANGE:case rt.UNIMPLEMENTED:case rt.DATA_LOSS:return!0;default:return St(15467,{code:n})}}function HA(n){if(n===void 0)return js("GRPC error has no .code"),rt.UNKNOWN;switch(n){case ze.OK:return rt.OK;case ze.CANCELLED:return rt.CANCELLED;case ze.UNKNOWN:return rt.UNKNOWN;case ze.DEADLINE_EXCEEDED:return rt.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return rt.RESOURCE_EXHAUSTED;case ze.INTERNAL:return rt.INTERNAL;case ze.UNAVAILABLE:return rt.UNAVAILABLE;case ze.UNAUTHENTICATED:return rt.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return rt.INVALID_ARGUMENT;case ze.NOT_FOUND:return rt.NOT_FOUND;case ze.ALREADY_EXISTS:return rt.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return rt.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return rt.FAILED_PRECONDITION;case ze.ABORTED:return rt.ABORTED;case ze.OUT_OF_RANGE:return rt.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return rt.UNIMPLEMENTED;case ze.DATA_LOSS:return rt.DATA_LOSS;default:return St(39323,{code:n})}}(Yt=ze||(ze={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=new Lr([4294967295,4294967295],0);function hT(n){const t=CN().encode(n),e=new rA;return e.update(t),new Uint8Array(e.digest())}function fT(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Lr([e,i],0),new Lr([r,o],0)]}class Gy{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new jc(`Invalid padding: ${e}`);if(i<0)throw new jc(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new jc(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new jc(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Lr.fromNumber(this.ge)}ye(t,e,i){let r=t.add(e.multiply(Lr.fromNumber(i)));return r.compare(IN)===1&&(r=new Lr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=hT(t),[i,r]=fT(e);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,r,o);if(!this.we(l))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),l=new Gy(o,r,e);return i.forEach((u=>l.insert(u))),l}insert(t){if(this.ge===0)return;const e=hT(t),[i,r]=fT(e);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,r,o);this.Se(l)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class jc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,Iu.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new zd(wt.min(),r,new be(Bt),zs(),Ft())}}class Iu{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Iu(i,e,Ft(),Ft(),Ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(t,e,i,r){this.be=t,this.removedTargetIds=e,this.key=i,this.De=r}}class qA{constructor(t,e){this.targetId=t,this.Ce=e}}class GA{constructor(t,e,i=ln.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class dT{constructor(){this.ve=0,this.Fe=gT(),this.Me=ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ft(),e=Ft(),i=Ft();return this.Fe.forEach(((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:St(38017,{changeType:o})}})),new Iu(this.Me,this.xe,t,e,i)}qe(){this.Oe=!1,this.Fe=gT()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Zt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class DN{constructor(t){this.Ge=t,this.ze=new Map,this.je=zs(),this.Je=pf(),this.He=pf(),this.Ye=new be(Bt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:St(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((i,r)=>{this.rt(r)&&e(r)}))}st(t){const e=t.targetId,i=t.Ce.count,r=this.ot(e);if(r){const o=r.target;if(Kp(o))if(i===0){const l=new _t(o.path);this.et(e,l,gn.newNoDocument(l,wt.min()))}else Zt(i===1,20013,{expectedCount:i});else{const l=this._t(e);if(l!==i){const u=this.ut(t),f=u?this.ct(u,t,l):1;if(f!==0){this.it(e);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,d)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e;let l,u;try{l=Fr(i).toUint8Array()}catch(f){if(f instanceof yA)return al("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{u=new Gy(l,r,o)}catch(f){return al(f instanceof jc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return u.ge===0?null:u}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let r=0;return i.forEach((o=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;t.mightContain(u)||(this.et(e,o,null),r++)})),r}Tt(t){const e=new Map;this.ze.forEach(((o,l)=>{const u=this.ot(l);if(u){if(o.current&&Kp(u.target)){const f=new _t(u.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,gn.newNoDocument(f,t))}o.Be&&(e.set(l,o.ke()),o.qe())}}));let i=Ft();this.He.forEach(((o,l)=>{let u=!0;l.forEachWhile((f=>{const d=this.ot(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(i=i.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(t)));const r=new zd(t,e,this.Ye,this.je,i);return this.je=zs(),this.Je=pf(),this.He=pf(),this.Ye=new be(Bt),r}Xe(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,i),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,e)?r.Qe(e,1):r.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new dT,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Ye(Bt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Ye(Bt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||ft("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new dT),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function pf(){return new be(_t.comparator)}function gT(){return new be(_t.comparator)}const MN={asc:"ASCENDING",desc:"DESCENDING"},NN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ON={and:"AND",or:"OR"};class kN{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Wp(n,t){return n.useProto3Json||Md(t)?t:{value:t}}function hd(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function YA(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function PN(n,t){return hd(n,t.toTimestamp())}function Zi(n){return Zt(!!n,49232),wt.fromTimestamp((function(e){const i=Br(e);return new Jt(i.seconds,i.nanos)})(n))}function Yy(n,t){return Qp(n,t).canonicalString()}function Qp(n,t){const e=(function(r){return new fe(["projects",r.projectId,"databases",r.database])})(n).child("documents");return t===void 0?e:e.child(t)}function KA(n){const t=fe.fromString(n);return Zt(JA(t),10190,{key:t.toString()}),t}function $p(n,t){return Yy(n.databaseId,t.path)}function mp(n,t){const e=KA(t);if(e.get(1)!==n.databaseId.projectId)throw new mt(rt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new mt(rt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new _t(WA(e))}function XA(n,t){return Yy(n.databaseId,t)}function VN(n){const t=KA(n);return t.length===4?fe.emptyPath():WA(t)}function Jp(n){return new fe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WA(n){return Zt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function mT(n,t,e){return{name:$p(n,t),fields:e.value.mapValue.fields}}function LN(n,t){let e;if("targetChange"in t){t.targetChange;const i=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:St(39313,{state:d})})(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=(function(d,p){return d.useProto3Json?(Zt(p===void 0||typeof p=="string",58123),ln.fromBase64String(p||"")):(Zt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ln.fromUint8Array(p||new Uint8Array))})(n,t.targetChange.resumeToken),l=t.targetChange.cause,u=l&&(function(d){const p=d.code===void 0?rt.UNKNOWN:HA(d.code);return new mt(p,d.message||"")})(l);e=new GA(i,r,o,u||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=mp(n,i.document.name),o=Zi(i.document.updateTime),l=i.document.createTime?Zi(i.document.createTime):wt.min(),u=new Mn({mapValue:{fields:i.document.fields}}),f=gn.newFoundDocument(r,o,l,u),d=i.targetIds||[],p=i.removedTargetIds||[];e=new zf(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=mp(n,i.document),o=i.readTime?Zi(i.readTime):wt.min(),l=gn.newNoDocument(r,o),u=i.removedTargetIds||[];e=new zf([],u,l.key,l)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=mp(n,i.document),o=i.removedTargetIds||[];e=new zf([],o,r,null)}else{if(!("filter"in t))return St(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new wN(r,o),u=i.targetId;e=new qA(u,l)}}return e}function jN(n,t){let e;if(t instanceof Cu)e={update:mT(n,t.key,t.value)};else if(t instanceof Hy)e={delete:$p(n,t.key)};else if(t instanceof Wr)e={update:mT(n,t.key,t.data),updateMask:KN(t.fieldMask)};else{if(!(t instanceof EN))return St(16599,{Vt:t.type});e={verify:$p(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((i=>(function(o,l){const u=l.transform;if(u instanceof cd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof uu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof hu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ud)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw St(20930,{transform:l.transform})})(0,i)))),t.precondition.isNone||(e.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:PN(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:St(27497)})(n,t.precondition)),e}function zN(n,t){return n&&n.length>0?(Zt(t!==void 0,14353),n.map((e=>(function(r,o){let l=r.updateTime?Zi(r.updateTime):Zi(o);return l.isEqual(wt.min())&&(l=Zi(o)),new vN(l,r.transformResults||[])})(e,t)))):[]}function UN(n,t){return{documents:[XA(n,t.path)]}}function BN(n,t){const e={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=XA(n,r);const o=(function(d){if(d.length!==0)return $A(ss.create(d,"and"))})(t.filters);o&&(e.structuredQuery.where=o);const l=(function(d){if(d.length!==0)return d.map((p=>(function(b){return{field:$o(b.field),direction:qN(b.dir)}})(p)))})(t.orderBy);l&&(e.structuredQuery.orderBy=l);const u=Wp(n,t.limit);return u!==null&&(e.structuredQuery.limit=u),t.startAt&&(e.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(t.endAt)),{ft:e,parent:r}}function FN(n){let t=VN(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Zt(i===1,65062);const p=e.from[0];p.allDescendants?r=p.collectionId:t=t.child(p.collectionId)}let o=[];e.where&&(o=(function(_){const b=QA(_);return b instanceof ss&&RA(b)?b.getFilters():[b]})(e.where));let l=[];e.orderBy&&(l=(function(_){return _.map((b=>(function(w){return new ld(Jo(w.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(b)))})(e.orderBy));let u=null;e.limit&&(u=(function(_){let b;return b=typeof _=="object"?_.value:_,Md(b)?null:b})(e.limit));let f=null;e.startAt&&(f=(function(_){const b=!!_.before,E=_.values||[];return new od(E,b)})(e.startAt));let d=null;return e.endAt&&(d=(function(_){const b=!_.before,E=_.values||[];return new od(E,b)})(e.endAt)),aN(t,r,l,o,u,"F",f,d)}function HN(n,t){const e=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return St(28987,{purpose:r})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function QA(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Jo(e.unaryFilter.field);return qe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Jo(e.unaryFilter.field);return qe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Jo(e.unaryFilter.field);return qe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Jo(e.unaryFilter.field);return qe.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return St(61313);default:return St(60726)}})(n):n.fieldFilter!==void 0?(function(e){return qe.create(Jo(e.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return St(58110);default:return St(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return ss.create(e.compositeFilter.filters.map((i=>QA(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return St(1026)}})(e.compositeFilter.op))})(n):St(30097,{filter:n})}function qN(n){return MN[n]}function GN(n){return NN[n]}function YN(n){return ON[n]}function $o(n){return{fieldPath:n.canonicalString()}}function Jo(n){return on.fromServerFormat(n.fieldPath)}function $A(n){return n instanceof qe?(function(e){if(e.op==="=="){if(nT(e.value))return{unaryFilter:{field:$o(e.field),op:"IS_NAN"}};if(eT(e.value))return{unaryFilter:{field:$o(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(nT(e.value))return{unaryFilter:{field:$o(e.field),op:"IS_NOT_NAN"}};if(eT(e.value))return{unaryFilter:{field:$o(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$o(e.field),op:GN(e.op),value:e.value}}})(n):n instanceof ss?(function(e){const i=e.getFilters().map((r=>$A(r)));return i.length===1?i[0]:{compositeFilter:{op:YN(e.op),filters:i}}})(n):St(54877,{filter:n})}function KN(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function JA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(t,e,i,r,o=wt.min(),l=wt.min(),u=ln.EMPTY_BYTE_STRING,f=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=f}withSequenceNumber(t){return new Cr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(t){this.yt=t}}function WN(n){const t=FN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.Cn=new $N}addToCollectionParentIndex(t,e){return this.Cn.add(e),st.resolve()}getCollectionParents(t,e){return st.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return st.resolve()}deleteFieldIndex(t,e){return st.resolve()}deleteAllFieldIndexes(t){return st.resolve()}createTargetIndexes(t,e){return st.resolve()}getDocumentsMatchingTarget(t,e){return st.resolve(null)}getIndexType(t,e){return st.resolve(0)}getFieldIndexes(t,e){return st.resolve([])}getNextCollectionGroupToUpdate(t){return st.resolve(null)}getMinOffset(t,e){return st.resolve(Ur.min())}getMinOffsetFromCollectionGroup(t,e){return st.resolve(Ur.min())}updateCollectionGroup(t,e,i){return st.resolve()}updateIndexEntries(t,e){return st.resolve()}}class $N{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Ye(fe.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Ye(fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZA=41943040;class Dn{static withCacheSize(t){return new Dn(t,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(ZA,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ul(0)}static cr(){return new ul(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="LruGarbageCollector",JN=1048576;function _T([n,t],[e,i]){const r=Bt(n,e);return r===0?Bt(t,i):r}class ZN{constructor(t){this.Ir=t,this.buffer=new Ye(_T),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();_T(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class tO{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ft(yT,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){xl(e)?ft(yT,"Ignoring IndexedDB error during garbage collection: ",e):await vl(e)}await this.Vr(3e5)}))}}class eO{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((i=>Math.floor(e/100*i)))}nthSequenceNumber(t,e){if(e===0)return st.resolve(Dd.ce);const i=new ZN(e);return this.mr.forEachTarget(t,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(t,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(t,e,i){return this.mr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),st.resolve(pT)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pT):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let i,r,o,l,u,f,d;const p=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,l=Date.now(),this.nthSequenceNumber(t,r)))).next((_=>(i=_,u=Date.now(),this.removeTargets(t,i,e)))).next((_=>(o=_,f=Date.now(),this.removeOrphanedDocuments(t,i)))).next((_=>(d=Date.now(),Wo()<=Ut.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${r} in `+(u-l)+`ms
	Removed ${o} targets in `+(f-u)+`ms
	Removed ${_} documents in `+(d-f)+`ms
Total Duration: ${d-p}ms`),st.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_}))))}}function nO(n,t){return new eO(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this.changes=new Za((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,gn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?st.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(i=r,this.remoteDocumentCache.getEntry(t,e)))).next((r=>(i!==null&&$c(i.mutation,r,qn.empty(),Jt.now()),r)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.getLocalViewOfDocuments(t,i,Ft()).next((()=>i))))}getLocalViewOfDocuments(t,e,i=Ft()){const r=Va();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,i).next((o=>{let l=Lc();return o.forEach(((u,f)=>{l=l.insert(u,f.overlayedDocument)})),l}))))}getOverlayedDocuments(t,e){const i=Va();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,Ft())))}populateOverlays(t,e,i){const r=[];return i.forEach((o=>{e.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(t,r).next((o=>{o.forEach(((l,u)=>{e.set(l,u)}))}))}computeViews(t,e,i,r){let o=zs();const l=Qc(),u=(function(){return Qc()})();return e.forEach(((f,d)=>{const p=i.get(d.key);r.has(d.key)&&(p===void 0||p.mutation instanceof Wr)?o=o.insert(d.key,d):p!==void 0?(l.set(d.key,p.mutation.getFieldMask()),$c(p.mutation,d,p.mutation.getFieldMask(),Jt.now())):l.set(d.key,qn.empty())})),this.recalculateAndSaveOverlays(t,o).next((f=>(f.forEach(((d,p)=>l.set(d,p))),e.forEach(((d,p)=>u.set(d,new sO(p,l.get(d)??null)))),u)))}recalculateAndSaveOverlays(t,e){const i=Qc();let r=new be(((l,u)=>l-u)),o=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((l=>{for(const u of l)u.keys().forEach((f=>{const d=e.get(f);if(d===null)return;let p=i.get(f)||qn.empty();p=u.applyToLocalView(d,p),i.set(f,p);const _=(r.get(u.batchId)||Ft()).add(f);r=r.insert(u.batchId,_)}))})).next((()=>{const l=[],u=r.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),d=f.key,p=f.value,_=PA();p.forEach((b=>{if(!o.has(b)){const E=BA(e.get(b),i.get(b));E!==null&&_.set(b,E),o=o.add(b)}})),l.push(this.documentOverlayCache.saveOverlays(t,d,_))}return st.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,e,i,r){return(function(l){return _t.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):oN(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next((o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):st.resolve(Va());let u=au,f=o;return l.next((d=>st.forEach(d,((p,_)=>(u<_.largestBatchId&&(u=_.largestBatchId),o.get(p)?st.resolve():this.remoteDocumentCache.getEntry(t,p).next((b=>{f=f.insert(p,b)}))))).next((()=>this.populateOverlays(t,d,o))).next((()=>this.computeViews(t,f,d,Ft()))).next((p=>({batchId:u,changes:kA(p)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new _t(e)).next((i=>{let r=Lc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const o=e.collectionGroup;let l=Lc();return this.indexManager.getCollectionParents(t,o).next((u=>st.forEach(u,(f=>{const d=(function(_,b){return new Od(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(e,f.child(o));return this.getDocumentsMatchingCollectionQuery(t,d,i,r).next((p=>{p.forEach(((_,b)=>{l=l.insert(_,b)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r)))).next((l=>{o.forEach(((f,d)=>{const p=d.getKey();l.get(p)===null&&(l=l.insert(p,gn.newInvalidDocument(p)))}));let u=Lc();return l.forEach(((f,d)=>{const p=o.get(f);p!==void 0&&$c(p.mutation,d,qn.empty(),Jt.now()),Vd(e,d)&&(u=u.insert(f,d))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return st.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(r){return{id:r.id,version:r.version,createTime:Zi(r.createTime)}})(e)),st.resolve()}getNamedQuery(t,e){return st.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(r){return{name:r.name,query:WN(r.bundledQuery),readTime:Zi(r.readTime)}})(e)),st.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(){this.overlays=new be(_t.comparator),this.qr=new Map}getOverlay(t,e){return st.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Va();return st.forEach(e,(r=>this.getOverlay(t,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(t,e,i){return i.forEach(((r,o)=>{this.St(t,e,o)})),st.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),st.resolve()}getOverlaysForCollection(t,e,i){const r=Va(),o=e.length+1,l=new _t(e.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const f=u.getNext().value,d=f.getKey();if(!e.isPrefixOf(d.path))break;d.path.length===o&&f.largestBatchId>i&&r.set(f.getKey(),f)}return st.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new be(((d,p)=>d-p));const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===e&&d.largestBatchId>i){let p=o.get(d.largestBatchId);p===null&&(p=Va(),o=o.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const u=Va(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((d,p)=>u.set(d,p))),!(u.size()>=r)););return st.resolve(u)}St(t,e,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new AN(e,i));let o=this.qr.get(e);o===void 0&&(o=Ft(),this.qr.set(e,o)),this.qr.set(e,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(t){return st.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,st.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(){this.Qr=new Ye($e.$r),this.Ur=new Ye($e.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const i=new $e(t,e);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,e){t.forEach((i=>this.addReference(i,e)))}removeReference(t,e){this.Gr(new $e(t,e))}zr(t,e){t.forEach((i=>this.removeReference(i,e)))}jr(t){const e=new _t(new fe([])),i=new $e(e,t),r=new $e(e,t+1),o=[];return this.Ur.forEachInRange([i,r],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new _t(new fe([])),i=new $e(e,t),r=new $e(e,t+1);let o=Ft();return this.Ur.forEachInRange([i,r],(l=>{o=o.add(l.key)})),o}containsKey(t){const e=new $e(t,0),i=this.Qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class $e{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return _t.comparator(t.key,e.key)||Bt(t.Yr,e.Yr)}static Kr(t,e){return Bt(t.Yr,e.Yr)||_t.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Ye($e.$r)}checkEmpty(t){return st.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new SN(o,e,i,r);this.mutationQueue.push(l);for(const u of r)this.Zr=this.Zr.add(new $e(u.key,o)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast());return st.resolve(l)}lookupMutationBatch(t,e){return st.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.ei(i),o=r<0?0:r;return st.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return st.resolve(this.mutationQueue.length===0?Ly:this.tr-1)}getAllMutationBatches(t){return st.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new $e(e,0),r=new $e(e,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],(l=>{const u=this.Xr(l.Yr);o.push(u)})),st.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ye(Bt);return e.forEach((r=>{const o=new $e(r,0),l=new $e(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(u=>{i=i.add(u.Yr)}))})),st.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let o=i;_t.isDocumentKey(o)||(o=o.child(""));const l=new $e(new _t(o),0);let u=new Ye(Bt);return this.Zr.forEachWhile((f=>{const d=f.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(u=u.add(f.Yr)),!0)}),l),st.resolve(this.ti(u))}ti(t){const e=[];return t.forEach((i=>{const r=this.Xr(i);r!==null&&e.push(r)})),e}removeMutationBatch(t,e){Zt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return st.forEach(e.mutations,(r=>{const o=new $e(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Zr=i}))}ir(t){}containsKey(t,e){const i=new $e(e,0),r=this.Zr.firstAfterOrEqual(i);return st.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,st.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(t){this.ri=t,this.docs=(function(){return new be(_t.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),o=r?r.size:0,l=this.ri(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return st.resolve(i?i.document.mutableCopy():gn.newInvalidDocument(e))}getEntries(t,e){let i=zs();return e.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():gn.newInvalidDocument(r))})),st.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=zs();const l=e.path,u=new _t(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:d,value:{document:p}}=f.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||jM(LM(p),i)<=0||(r.has(p.key)||Vd(e,p))&&(o=o.insert(p.key,p.mutableCopy()))}return st.resolve(o)}getAllFromCollectionGroup(t,e,i,r){St(9500)}ii(t,e){return st.forEach(this.docs,(i=>e(i)))}newChangeBuffer(t){return new hO(this)}getSize(t){return st.resolve(this.size)}}class hO extends iO{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?e.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)})),st.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(t){this.persistence=t,this.si=new Za((e=>Uy(e)),By),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.oi=0,this._i=new Ky,this.targetCount=0,this.ai=ul.ur()}forEachTarget(t,e){return this.si.forEach(((i,r)=>e(r))),st.resolve()}getLastRemoteSnapshotVersion(t){return st.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return st.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),st.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.oi&&(this.oi=e),st.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new ul(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,st.resolve()}updateTargetData(t,e){return this.Pr(e),st.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,st.resolve()}removeTargets(t,e,i){let r=0;const o=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=e&&i.get(u.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(t,u.targetId)),r++)})),st.waitFor(o).next((()=>r))}getTargetCount(t){return st.resolve(this.targetCount)}getTargetData(t,e){const i=this.si.get(e)||null;return st.resolve(i)}addMatchingKeys(t,e,i){return this._i.Wr(e,i),st.resolve()}removeMatchingKeys(t,e,i){this._i.zr(e,i);const r=this.persistence.referenceDelegate,o=[];return r&&e.forEach((l=>{o.push(r.markPotentiallyOrphaned(t,l))})),st.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),st.resolve()}getMatchingKeysForTargetId(t,e){const i=this._i.Hr(e);return st.resolve(i)}containsKey(t,e){return st.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(t,e){this.ui={},this.overlays={},this.ci=new Dd(0),this.li=!1,this.li=!0,this.hi=new lO,this.referenceDelegate=t(this),this.Pi=new fO(this),this.indexManager=new QN,this.remoteDocumentCache=(function(r){return new uO(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new XN(e),this.Ii=new aO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new oO,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ui[t.toKey()];return i||(i=new cO(e,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,i){ft("MemoryPersistence","Starting transaction:",t);const r=new dO(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ai(t,e){return st.or(Object.values(this.ui).map((i=>()=>i.containsKey(t,e))))}}class dO extends UM{constructor(t){super(),this.currentSequenceNumber=t}}class Xy{constructor(t){this.persistence=t,this.Ri=new Ky,this.Vi=null}static mi(t){return new Xy(t)}get fi(){if(this.Vi)return this.Vi;throw St(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.fi.delete(i.toString()),st.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.fi.add(i.toString()),st.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),st.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((r=>{r.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return st.forEach(this.fi,(i=>{const r=_t.fromPath(i);return this.gi(t,r).next((o=>{o||e.removeEntry(r,wt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((i=>{i?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return st.or([()=>st.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class fd{constructor(t,e){this.persistence=t,this.pi=new Za((i=>HM(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=nO(this,e)}static mi(t,e){return new fd(t,e)}Ei(){}di(t){return st.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>e.next((r=>i+r))))}wr(t){let e=0;return this.pr(t,(i=>{e++})).next((()=>e))}pr(t,e){return st.forEach(this.pi,((i,r)=>this.br(t,i,r).next((o=>o?st.resolve():e(r)))))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(t,(l=>this.br(t,l,e).next((u=>{u||(i++,o.removeEntry(l,wt.min()))})))).next((()=>o.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),st.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),st.resolve()}removeReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),st.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),st.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Vf(t.data.value)),e}br(t,e,i){return st.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.pi.get(e);return st.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Es=i,this.ds=r}static As(t,e){let i=Ft(),r=Ft();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Wy(t,e.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return HC()?8:BM(pn())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,r){const o={result:null};return this.ys(t,e).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(t,e,r,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new gO;return this.Ss(t,e,l).next((u=>{if(o.result=u,this.Vs)return this.bs(t,e,l,u.size)}))})).next((()=>o.result))}bs(t,e,i,r){return i.documentReadCount<this.fs?(Wo()<=Ut.DEBUG&&ft("QueryEngine","SDK will not create cache indexes for query:",Qo(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),st.resolve()):(Wo()<=Ut.DEBUG&&ft("QueryEngine","Query:",Qo(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Wo()<=Ut.DEBUG&&ft("QueryEngine","The SDK decides to create cache indexes for query:",Qo(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ji(e))):st.resolve())}ys(t,e){if(aT(e))return st.resolve(null);let i=Ji(e);return this.indexManager.getIndexType(t,i).next((r=>r===0?null:(e.limit!==null&&r===1&&(e=Xp(e,null,"F"),i=Ji(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next((o=>{const l=Ft(...o);return this.ps.getDocuments(t,l).next((u=>this.indexManager.getMinOffset(t,i).next((f=>{const d=this.Ds(e,u);return this.Cs(e,d,l,f.readTime)?this.ys(t,Xp(e,null,"F")):this.vs(t,d,e,f)}))))})))))}ws(t,e,i,r){return aT(e)||r.isEqual(wt.min())?st.resolve(null):this.ps.getDocuments(t,i).next((o=>{const l=this.Ds(e,o);return this.Cs(e,l,i,r)?st.resolve(null):(Wo()<=Ut.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qo(e)),this.vs(t,l,e,VM(r,au)).next((u=>u)))}))}Ds(t,e){let i=new Ye(NA(t));return e.forEach(((r,o)=>{Vd(t,o)&&(i=i.add(o))})),i}Cs(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(t,e,i){return Wo()<=Ut.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",Qo(e)),this.ps.getDocumentsMatchingQuery(t,e,Ur.min(),i)}vs(t,e,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next((o=>(e.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="LocalStore",pO=3e8;class yO{constructor(t,e,i,r){this.persistence=t,this.Fs=e,this.serializer=r,this.Ms=new be(Bt),this.xs=new Za((o=>Uy(o)),By),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new rO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function _O(n,t,e,i){return new yO(n,t,e,i)}async function ew(n,t){const e=It(n);return await e.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,e.Bs(t),e.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],u=[];let f=Ft();for(const d of r){l.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}for(const d of o){u.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}return e.localDocuments.getDocuments(i,f).next((d=>({Ls:d,removedBatchIds:l,addedBatchIds:u})))}))}))}function bO(n,t){const e=It(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=t.batch.keys(),o=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,f,d,p){const _=d.batch,b=_.keys();let E=st.resolve();return b.forEach((w=>{E=E.next((()=>p.getEntry(f,w))).next((A=>{const R=d.docVersions.get(w);Zt(R!==null,48541),A.version.compareTo(R)<0&&(_.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),p.addEntry(A)))}))})),E.next((()=>u.mutationQueue.removeMutationBatch(f,_)))})(e,i,t,o).next((()=>o.apply(i))).next((()=>e.mutationQueue.performConsistencyCheck(i))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(u){let f=Ft();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(f=f.add(u.batch.mutations[d].key));return f})(t)))).next((()=>e.localDocuments.getDocuments(i,r)))}))}function nw(n){const t=It(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function vO(n,t){const e=It(n),i=t.snapshotVersion;let r=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=e.Ns.newChangeBuffer({trackRemovals:!0});r=e.Ms;const u=[];t.targetChanges.forEach(((p,_)=>{const b=r.get(_);if(!b)return;u.push(e.Pi.removeMatchingKeys(o,p.removedDocuments,_).next((()=>e.Pi.addMatchingKeys(o,p.addedDocuments,_))));let E=b.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(_)!==null?E=E.withResumeToken(ln.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,i)),r=r.insert(_,E),(function(A,R,O){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=pO?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(b,E,p)&&u.push(e.Pi.updateTargetData(o,E))}));let f=zs(),d=Ft();if(t.documentUpdates.forEach((p=>{t.resolvedLimboDocuments.has(p)&&u.push(e.persistence.referenceDelegate.updateLimboDocument(o,p))})),u.push(xO(o,l,t.documentUpdates).next((p=>{f=p.ks,d=p.qs}))),!i.isEqual(wt.min())){const p=e.Pi.getLastRemoteSnapshotVersion(o).next((_=>e.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));u.push(p)}return st.waitFor(u).next((()=>l.apply(o))).next((()=>e.localDocuments.getLocalViewOfDocuments(o,f,d))).next((()=>f))})).then((o=>(e.Ms=r,o)))}function xO(n,t,e){let i=Ft(),r=Ft();return e.forEach((o=>i=i.add(o))),t.getEntries(n,i).next((o=>{let l=zs();return e.forEach(((u,f)=>{const d=o.get(u);f.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(u)),f.isNoDocument()&&f.version.isEqual(wt.min())?(t.removeEntry(u,f.readTime),l=l.insert(u,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(f),l=l.insert(u,f)):ft(Qy,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",f.version)})),{ks:l,qs:r}}))}function TO(n,t){const e=It(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=Ly),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function EO(n,t){const e=It(n);return e.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return e.Pi.getTargetData(i,t).next((o=>o?(r=o,st.resolve(r)):e.Pi.allocateTargetId(i).next((l=>(r=new Cr(t,l,"TargetPurposeListen",i.currentSequenceNumber),e.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=e.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(i.targetId,i),e.xs.set(t,i.targetId)),i}))}async function Zp(n,t,e){const i=It(n),r=i.Ms.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!xl(l))throw l;ft(Qy,`Failed to update sequence numbers for target ${t}: ${l}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function bT(n,t,e){const i=It(n);let r=wt.min(),o=Ft();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,d,p){const _=It(f),b=_.xs.get(p);return b!==void 0?st.resolve(_.Ms.get(b)):_.Pi.getTargetData(d,p)})(i,l,Ji(t)).next((u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,u.targetId).next((f=>{o=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,t,e?r:wt.min(),e?o:Ft()))).next((u=>(SO(i,cN(t),u),{documents:u,Qs:o})))))}function SO(n,t,e){let i=n.Os.get(t)||wt.min();e.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Os.set(t,i)}class vT{constructor(){this.activeTargetIds=mN()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class AO{constructor(){this.Mo=new vT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,i){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new vT,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="ConnectivityMonitor";class TT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ft(xT,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ft(xT,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yf=null;function ty(){return yf===null?yf=(function(){return 268435456+Math.round(2147483648*Math.random())})():yf++,"0x"+yf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="RestConnection",RO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CO{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===rd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,e,i,r,o){const l=ty(),u=this.zo(t,e.toUriEncodedString());ft(pp,`Sending RPC '${t}' ${l}:`,u,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,r,o);const{host:d}=new URL(u),p=pl(d);return this.Jo(t,u,f,i,p).then((_=>(ft(pp,`Received RPC '${t}' ${l}: `,_),_)),(_=>{throw al(pp,`RPC '${t}' ${l} failed with error: `,_,"url: ",u,"request:",i),_}))}Ho(t,e,i,r,o,l){return this.Go(t,e,i,r,o)}jo(t,e,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((r,o)=>t[o]=r)),i&&i.headers.forEach(((r,o)=>t[o]=r))}zo(t,e){const i=RO[t];return`${this.Uo}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class DO extends CO{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,r,o){const l=ty();return new Promise(((u,f)=>{const d=new aA;d.setWithCredentials(!0),d.listenOnce(oA.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Pf.NO_ERROR:const _=d.getResponseJson();ft(un,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(_)),u(_);break;case Pf.TIMEOUT:ft(un,`RPC '${t}' ${l} timed out`),f(new mt(rt.DEADLINE_EXCEEDED,"Request time out"));break;case Pf.HTTP_ERROR:const b=d.getStatus();if(ft(un,`RPC '${t}' ${l} failed with status:`,b,"response text:",d.getResponseText()),b>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const w=E==null?void 0:E.error;if(w&&w.status&&w.message){const A=(function(O){const q=O.toLowerCase().replace(/_/g,"-");return Object.values(rt).indexOf(q)>=0?q:rt.UNKNOWN})(w.status);f(new mt(A,w.message))}else f(new mt(rt.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new mt(rt.UNAVAILABLE,"Connection failed."));break;default:St(9055,{l_:t,streamId:l,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ft(un,`RPC '${t}' ${l} completed.`)}}));const p=JSON.stringify(r);ft(un,`RPC '${t}' ${l} sending request:`,r),d.send(e,"POST",p,i,15)}))}T_(t,e,i){const r=ty(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=uA(),u=cA(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,e,i),f.encodeInitMessageHeaders=!0;const p=o.join("");ft(un,`Creating RPC '${t}' stream ${r}: ${p}`,f);const _=l.createWebChannel(p,f);this.I_(_);let b=!1,E=!1;const w=new IO({Yo:R=>{E?ft(un,`Not sending because RPC '${t}' stream ${r} is closed:`,R):(b||(ft(un,`Opening RPC '${t}' stream ${r} transport.`),_.open(),b=!0),ft(un,`RPC '${t}' stream ${r} sending:`,R),_.send(R))},Zo:()=>_.close()}),A=(R,O,q)=>{R.listen(O,(j=>{try{q(j)}catch(B){setTimeout((()=>{throw B}),0)}}))};return A(_,Vc.EventType.OPEN,(()=>{E||(ft(un,`RPC '${t}' stream ${r} transport opened.`),w.o_())})),A(_,Vc.EventType.CLOSE,(()=>{E||(E=!0,ft(un,`RPC '${t}' stream ${r} transport closed`),w.a_(),this.E_(_))})),A(_,Vc.EventType.ERROR,(R=>{E||(E=!0,al(un,`RPC '${t}' stream ${r} transport errored. Name:`,R.name,"Message:",R.message),w.a_(new mt(rt.UNAVAILABLE,"The operation could not be completed")))})),A(_,Vc.EventType.MESSAGE,(R=>{var O;if(!E){const q=R.data[0];Zt(!!q,16349);const j=q,B=(j==null?void 0:j.error)||((O=j[0])==null?void 0:O.error);if(B){ft(un,`RPC '${t}' stream ${r} received error:`,B);const U=B.status;let Y=(function(N){const V=ze[N];if(V!==void 0)return HA(V)})(U),I=B.message;Y===void 0&&(Y=rt.INTERNAL,I="Unknown error status: "+U+" with message "+B.message),E=!0,w.a_(new mt(Y,I)),_.close()}else ft(un,`RPC '${t}' stream ${r} received:`,q),w.u_(q)}})),A(u,lA.STAT_EVENT,(R=>{R.stat===Fp.PROXY?ft(un,`RPC '${t}' stream ${r} detected buffering proxy`):R.stat===Fp.NOPROXY&&ft(un,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{w.__()}),0),w}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function yp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(n){return new kN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(t,e,i=1e3,r=1.5,o=6e4){this.Mi=t,this.timerId=e,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,e-i);r>0&&ft("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="PersistentStream";class sw{constructor(t,e,i,r,o,l,u,f){this.Mi=t,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iw(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===rt.RESOURCE_EXHAUSTED?(js(e.toString()),js("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===rt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===e&&this.G_(i,r)}),(i=>{t((()=>{const r=new mt(rt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(t,e){const i=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return ft(ET,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(ft(ET,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class MO extends sw{constructor(t,e,i,r,o,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,l),this.serializer=o}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=LN(this.serializer,t),i=(function(o){if(!("targetChange"in o))return wt.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?wt.min():l.readTime?Zi(l.readTime):wt.min()})(t);return this.listener.H_(e,i)}Y_(t){const e={};e.database=Jp(this.serializer),e.addTarget=(function(o,l){let u;const f=l.target;if(u=Kp(f)?{documents:UN(o,f)}:{query:BN(o,f).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=YA(o,l.resumeToken);const d=Wp(o,l.expectedCount);d!==null&&(u.expectedCount=d)}else if(l.snapshotVersion.compareTo(wt.min())>0){u.readTime=hd(o,l.snapshotVersion.toTimestamp());const d=Wp(o,l.expectedCount);d!==null&&(u.expectedCount=d)}return u})(this.serializer,t);const i=HN(this.serializer,t);i&&(e.labels=i),this.q_(e)}Z_(t){const e={};e.database=Jp(this.serializer),e.removeTarget=t,this.q_(e)}}class NO extends sw{constructor(t,e,i,r,o,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return Zt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Zt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Zt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=zN(t.writeResults,t.commitTime),i=Zi(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=Jp(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((i=>jN(this.serializer,i)))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{}class kO extends OO{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new mt(rt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(t,Qp(e,i),r,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new mt(rt.UNKNOWN,o.toString())}))}Ho(t,e,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(t,Qp(e,i),r,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new mt(rt.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class PO{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(js(e),this.aa=!1):ft("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="RemoteStore";class VO{constructor(t,e,i,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{to(this)&&(ft(Xa,"Restarting streams for network reachability change."),await(async function(f){const d=It(f);d.Ea.add(4),await Du(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Bd(d)})(this))}))})),this.Ra=new PO(i,r)}}async function Bd(n){if(to(n))for(const t of n.da)await t(!0)}async function Du(n){for(const t of n.da)await t(!1)}function rw(n,t){const e=It(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),t_(e)?Zy(e):Tl(e).O_()&&Jy(e,t))}function $y(n,t){const e=It(n),i=Tl(e);e.Ia.delete(t),i.O_()&&aw(e,t),e.Ia.size===0&&(i.O_()?i.L_():to(e)&&e.Ra.set("Unknown"))}function Jy(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(wt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Tl(n).Y_(t)}function aw(n,t){n.Va.Ue(t),Tl(n).Z_(t)}function Zy(n){n.Va=new DN({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),Tl(n).start(),n.Ra.ua()}function t_(n){return to(n)&&!Tl(n).x_()&&n.Ia.size>0}function to(n){return It(n).Ea.size===0}function ow(n){n.Va=void 0}async function LO(n){n.Ra.set("Online")}async function jO(n){n.Ia.forEach(((t,e)=>{Jy(n,t)}))}async function zO(n,t){ow(n),t_(n)?(n.Ra.ha(t),Zy(n)):n.Ra.set("Unknown")}async function UO(n,t,e){if(n.Ra.set("Online"),t instanceof GA&&t.state===2&&t.cause)try{await(async function(r,o){const l=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,l),r.Ia.delete(u),r.Va.removeTarget(u))})(n,t)}catch(i){ft(Xa,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await dd(n,i)}else if(t instanceof zf?n.Va.Ze(t):t instanceof qA?n.Va.st(t):n.Va.tt(t),!e.isEqual(wt.min()))try{const i=await nw(n.localStore);e.compareTo(i)>=0&&await(function(o,l){const u=o.Va.Tt(l);return u.targetChanges.forEach(((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const p=o.Ia.get(d);p&&o.Ia.set(d,p.withResumeToken(f.resumeToken,l))}})),u.targetMismatches.forEach(((f,d)=>{const p=o.Ia.get(f);if(!p)return;o.Ia.set(f,p.withResumeToken(ln.EMPTY_BYTE_STRING,p.snapshotVersion)),aw(o,f);const _=new Cr(p.target,f,d,p.sequenceNumber);Jy(o,_)})),o.remoteSyncer.applyRemoteEvent(u)})(n,e)}catch(i){ft(Xa,"Failed to raise snapshot:",i),await dd(n,i)}}async function dd(n,t,e){if(!xl(t))throw t;n.Ea.add(1),await Du(n),n.Ra.set("Offline"),e||(e=()=>nw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ft(Xa,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await Bd(n)}))}function lw(n,t){return t().catch((e=>dd(n,e,t)))}async function Fd(n){const t=It(n),e=qr(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ly;for(;BO(t);)try{const r=await TO(t.localStore,i);if(r===null){t.Ta.length===0&&e.L_();break}i=r.batchId,FO(t,r)}catch(r){await dd(t,r)}cw(t)&&uw(t)}function BO(n){return to(n)&&n.Ta.length<10}function FO(n,t){n.Ta.push(t);const e=qr(n);e.O_()&&e.X_&&e.ea(t.mutations)}function cw(n){return to(n)&&!qr(n).x_()&&n.Ta.length>0}function uw(n){qr(n).start()}async function HO(n){qr(n).ra()}async function qO(n){const t=qr(n);for(const e of n.Ta)t.ea(e.mutations)}async function GO(n,t,e){const i=n.Ta.shift(),r=qy.from(i,t,e);await lw(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Fd(n)}async function YO(n,t){t&&qr(n).X_&&await(async function(i,r){if((function(l){return RN(l)&&l!==rt.ABORTED})(r.code)){const o=i.Ta.shift();qr(i).B_(),await lw(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Fd(i)}})(n,t),cw(n)&&uw(n)}async function ST(n,t){const e=It(n);e.asyncQueue.verifyOperationInProgress(),ft(Xa,"RemoteStore received new credentials");const i=to(e);e.Ea.add(3),await Du(e),i&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Bd(e)}async function KO(n,t){const e=It(n);t?(e.Ea.delete(2),await Bd(e)):t||(e.Ea.add(2),await Du(e),e.Ra.set("Unknown"))}function Tl(n){return n.ma||(n.ma=(function(e,i,r){const o=It(e);return o.sa(),new MO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:LO.bind(null,n),t_:jO.bind(null,n),r_:zO.bind(null,n),H_:UO.bind(null,n)}),n.da.push((async t=>{t?(n.ma.B_(),t_(n)?Zy(n):n.Ra.set("Unknown")):(await n.ma.stop(),ow(n))}))),n.ma}function qr(n){return n.fa||(n.fa=(function(e,i,r){const o=It(e);return o.sa(),new NO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:HO.bind(null,n),r_:YO.bind(null,n),ta:qO.bind(null,n),na:GO.bind(null,n)}),n.da.push((async t=>{t?(n.fa.B_(),await Fd(n)):(await n.fa.stop(),n.Ta.length>0&&(ft(Xa,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){const l=Date.now()+i,u=new e_(t,e,l,r,o);return u.start(i),u}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new mt(rt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function n_(n,t){if(js("AsyncQueue",`${t}: ${n}`),xl(n))return new mt(rt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{static emptySet(t){return new il(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||_t.comparator(e.key,i.key):(e,i)=>_t.comparator(e.key,i.key),this.keyedMap=Lc(),this.sortedSet=new be(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,i)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof il)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new il;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.ga=new be(_t.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):St(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,i)=>{t.push(i)})),t}}class hl{constructor(t,e,i,r,o,l,u,f,d){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(t,e,i,r,o){const l=[];return e.forEach((u=>{l.push({type:0,doc:u})})),new hl(t,e,il.emptySet(e),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Pd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class WO{constructor(){this.queries=wT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const r=It(e),o=r.queries;r.queries=wT(),o.forEach(((l,u)=>{for(const f of u.Sa)f.onError(i)}))})(this,new mt(rt.ABORTED,"Firestore shutting down"))}}function wT(){return new Za((n=>MA(n)),Pd)}async function i_(n,t){const e=It(n);let i=3;const r=t.query;let o=e.queries.get(r);o?!o.ba()&&t.Da()&&(i=2):(o=new XO,i=t.Da()?0:1);try{switch(i){case 0:o.wa=await e.onListen(r,!0);break;case 1:o.wa=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(l){const u=n_(l,`Initialization of query '${Qo(t.query)}' failed`);return void t.onError(u)}e.queries.set(r,o),o.Sa.push(t),t.va(e.onlineState),o.wa&&t.Fa(o.wa)&&r_(e)}async function s_(n,t){const e=It(n),i=t.query;let r=3;const o=e.queries.get(i);if(o){const l=o.Sa.indexOf(t);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?r=t.Da()?0:1:!o.ba()&&t.Da()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function QO(n,t){const e=It(n);let i=!1;for(const r of t){const o=r.query,l=e.queries.get(o);if(l){for(const u of l.Sa)u.Fa(r)&&(i=!0);l.wa=r}}i&&r_(e)}function $O(n,t,e){const i=It(n),r=i.queries.get(t);if(r)for(const o of r.Sa)o.onError(e);i.queries.delete(t)}function r_(n){n.Ca.forEach((t=>{t.next()}))}var ey,RT;(RT=ey||(ey={})).Ma="default",RT.Cache="cache";class a_{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new hl(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=hl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==ey.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(t){this.key=t}}class fw{constructor(t){this.key=t}}class JO{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ft(),this.mutatedKeys=Ft(),this.eu=NA(t),this.tu=new il(this.eu)}get nu(){return this.Ya}ru(t,e){const i=e?e.iu:new AT,r=e?e.tu:this.tu;let o=e?e.mutatedKeys:this.mutatedKeys,l=r,u=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((p,_)=>{const b=r.get(p),E=Vd(this.query,_)?_:null,w=!!b&&this.mutatedKeys.has(b.key),A=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let R=!1;b&&E?b.data.isEqual(E.data)?w!==A&&(i.track({type:3,doc:E}),R=!0):this.su(b,E)||(i.track({type:2,doc:E}),R=!0,(f&&this.eu(E,f)>0||d&&this.eu(E,d)<0)&&(u=!0)):!b&&E?(i.track({type:0,doc:E}),R=!0):b&&!E&&(i.track({type:1,doc:b}),R=!0,(f||d)&&(u=!0)),R&&(E?(l=l.add(E),o=A?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{tu:l,iu:i,Cs:u,mutatedKeys:o}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const l=t.iu.ya();l.sort(((p,_)=>(function(E,w){const A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return St(20277,{Rt:R})}};return A(E)-A(w)})(p.type,_.type)||this.eu(p.doc,_.doc))),this.ou(i),r=r??!1;const u=e&&!r?this._u():[],f=this.Xa.size===0&&this.current&&!r?1:0,d=f!==this.Za;return this.Za=f,l.length!==0||d?{snapshot:new hl(this.query,t.tu,o,l,t.mutatedKeys,f===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new AT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ft(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const e=[];return t.forEach((i=>{this.Xa.has(i)||e.push(new fw(i))})),this.Xa.forEach((i=>{t.has(i)||e.push(new hw(i))})),e}cu(t){this.Ya=t.Qs,this.Xa=Ft();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return hl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const o_="SyncEngine";class ZO{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class tk{constructor(t){this.key=t,this.hu=!1}}class ek{constructor(t,e,i,r,o,l){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Za((u=>MA(u)),Pd),this.Iu=new Map,this.Eu=new Set,this.du=new be(_t.comparator),this.Au=new Map,this.Ru=new Ky,this.Vu={},this.mu=new Map,this.fu=ul.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nk(n,t,e=!0){const i=_w(n);let r;const o=i.Tu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await dw(i,t,e,!0),r}async function ik(n,t){const e=_w(n);await dw(e,t,!0,!1)}async function dw(n,t,e,i){const r=await EO(n.localStore,Ji(t)),o=r.targetId,l=n.sharedClientState.addLocalQueryTarget(o,e);let u;return i&&(u=await sk(n,t,o,l==="current",r.resumeToken)),n.isPrimaryClient&&e&&rw(n.remoteStore,r),u}async function sk(n,t,e,i,r){n.pu=(_,b,E)=>(async function(A,R,O,q){let j=R.view.ru(O);j.Cs&&(j=await bT(A.localStore,R.query,!1).then((({documents:I})=>R.view.ru(I,j))));const B=q&&q.targetChanges.get(R.targetId),U=q&&q.targetMismatches.get(R.targetId)!=null,Y=R.view.applyChanges(j,A.isPrimaryClient,B,U);return IT(A,R.targetId,Y.au),Y.snapshot})(n,_,b,E);const o=await bT(n.localStore,t,!0),l=new JO(t,o.Qs),u=l.ru(o.documents),f=Iu.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),d=l.applyChanges(u,n.isPrimaryClient,f);IT(n,e,d.au);const p=new ZO(t,e,l);return n.Tu.set(t,p),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),d.snapshot}async function rk(n,t,e){const i=It(n),r=i.Tu.get(t),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter((l=>!Pd(l,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Zp(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),e&&$y(i.remoteStore,r.targetId),ny(i,r.targetId)})).catch(vl)):(ny(i,r.targetId),await Zp(i.localStore,r.targetId,!0))}async function ak(n,t){const e=It(n),i=e.Tu.get(t),r=e.Iu.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),$y(e.remoteStore,i.targetId))}async function ok(n,t,e){const i=gk(n);try{const r=await(function(l,u){const f=It(l),d=Jt.now(),p=u.reduce(((E,w)=>E.add(w.key)),Ft());let _,b;return f.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let w=zs(),A=Ft();return f.Ns.getEntries(E,p).next((R=>{w=R,w.forEach(((O,q)=>{q.isValidDocument()||(A=A.add(O))}))})).next((()=>f.localDocuments.getOverlayedDocuments(E,w))).next((R=>{_=R;const O=[];for(const q of u){const j=TN(q,_.get(q.key).overlayedDocument);j!=null&&O.push(new Wr(q.key,j,SA(j.value.mapValue),oi.exists(!0)))}return f.mutationQueue.addMutationBatch(E,d,O,u)})).next((R=>{b=R;const O=R.applyToLocalDocumentSet(_,A);return f.documentOverlayCache.saveOverlays(E,R.batchId,O)}))})).then((()=>({batchId:b.batchId,changes:kA(_)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),(function(l,u,f){let d=l.Vu[l.currentUser.toKey()];d||(d=new be(Bt)),d=d.insert(u,f),l.Vu[l.currentUser.toKey()]=d})(i,r.batchId,e),await Mu(i,r.changes),await Fd(i.remoteStore)}catch(r){const o=n_(r,"Failed to persist write");e.reject(o)}}async function gw(n,t){const e=It(n);try{const i=await vO(e.localStore,t);t.targetChanges.forEach(((r,o)=>{const l=e.Au.get(o);l&&(Zt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.hu=!0:r.modifiedDocuments.size>0?Zt(l.hu,14607):r.removedDocuments.size>0&&(Zt(l.hu,42227),l.hu=!1))})),await Mu(e,i,t)}catch(i){await vl(i)}}function CT(n,t,e){const i=It(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const r=[];i.Tu.forEach(((o,l)=>{const u=l.view.va(t);u.snapshot&&r.push(u.snapshot)})),(function(l,u){const f=It(l);f.onlineState=u;let d=!1;f.queries.forEach(((p,_)=>{for(const b of _.Sa)b.va(u)&&(d=!0)})),d&&r_(f)})(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function lk(n,t,e){const i=It(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Au.get(t),o=r&&r.key;if(o){let l=new be(_t.comparator);l=l.insert(o,gn.newNoDocument(o,wt.min()));const u=Ft().add(o),f=new zd(wt.min(),new Map,new be(Bt),l,u);await gw(i,f),i.du=i.du.remove(o),i.Au.delete(t),l_(i)}else await Zp(i.localStore,t,!1).then((()=>ny(i,t,e))).catch(vl)}async function ck(n,t){const e=It(n),i=t.batch.batchId;try{const r=await bO(e.localStore,t);pw(e,i,null),mw(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Mu(e,r)}catch(r){await vl(r)}}async function uk(n,t,e){const i=It(n);try{const r=await(function(l,u){const f=It(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let p;return f.mutationQueue.lookupMutationBatch(d,u).next((_=>(Zt(_!==null,37113),p=_.keys(),f.mutationQueue.removeMutationBatch(d,_)))).next((()=>f.mutationQueue.performConsistencyCheck(d))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(d,p,u))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p))).next((()=>f.localDocuments.getDocuments(d,p)))}))})(i.localStore,t);pw(i,t,e),mw(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Mu(i,r)}catch(r){await vl(r)}}function mw(n,t){(n.mu.get(t)||[]).forEach((e=>{e.resolve()})),n.mu.delete(t)}function pw(n,t,e){const i=It(n);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function ny(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Iu.get(t))n.Tu.delete(i),e&&n.Pu.yu(i,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach((i=>{n.Ru.containsKey(i)||yw(n,i)}))}function yw(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&($y(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),l_(n))}function IT(n,t,e){for(const i of e)i instanceof hw?(n.Ru.addReference(i.key,t),hk(n,i)):i instanceof fw?(ft(o_,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,t),n.Ru.containsKey(i.key)||yw(n,i.key)):St(19791,{wu:i})}function hk(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Eu.has(i)||(ft(o_,"New document in limbo: "+e),n.Eu.add(i),l_(n))}function l_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new _t(fe.fromString(t)),i=n.fu.next();n.Au.set(i,new tk(e)),n.du=n.du.insert(e,i),rw(n.remoteStore,new Cr(Ji(kd(e.path)),i,"TargetPurposeLimboResolution",Dd.ce))}}async function Mu(n,t,e){const i=It(n),r=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((u,f)=>{l.push(i.pu(f,t,e).then((d=>{var p;if((d||e)&&i.isPrimaryClient){const _=d?!d.fromCache:(p=e==null?void 0:e.targetChanges.get(f.targetId))==null?void 0:p.current;i.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(d){r.push(d);const _=Wy.As(f.targetId,d);o.push(_)}})))})),await Promise.all(l),i.Pu.H_(r),await(async function(f,d){const p=It(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>st.forEach(d,(b=>st.forEach(b.Es,(E=>p.persistence.referenceDelegate.addReference(_,b.targetId,E))).next((()=>st.forEach(b.ds,(E=>p.persistence.referenceDelegate.removeReference(_,b.targetId,E)))))))))}catch(_){if(!xl(_))throw _;ft(Qy,"Failed to update sequence numbers: "+_)}for(const _ of d){const b=_.targetId;if(!_.fromCache){const E=p.Ms.get(b),w=E.snapshotVersion,A=E.withLastLimboFreeSnapshotVersion(w);p.Ms=p.Ms.insert(b,A)}}})(i.localStore,o))}async function fk(n,t){const e=It(n);if(!e.currentUser.isEqual(t)){ft(o_,"User change. New user:",t.toKey());const i=await ew(e.localStore,t);e.currentUser=t,(function(o,l){o.mu.forEach((u=>{u.forEach((f=>{f.reject(new mt(rt.CANCELLED,l))}))})),o.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Mu(e,i.Ls)}}function dk(n,t){const e=It(n),i=e.Au.get(t);if(i&&i.hu)return Ft().add(i.key);{let r=Ft();const o=e.Iu.get(t);if(!o)return r;for(const l of o){const u=e.Tu.get(l);r=r.unionWith(u.view.nu)}return r}}function _w(n){const t=It(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=gw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=dk.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=lk.bind(null,t),t.Pu.H_=QO.bind(null,t.eventManager),t.Pu.yu=$O.bind(null,t.eventManager),t}function gk(n){const t=It(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ck.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=uk.bind(null,t),t}class gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ud(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return _O(this.persistence,new mO,t.initialUser,this.serializer)}Cu(t){return new tw(Xy.mi,this.serializer)}Du(t){return new AO}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gd.provider={build:()=>new gd};class mk extends gd{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Zt(this.persistence.referenceDelegate instanceof fd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new tO(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new tw((i=>fd.mi(i,e)),this.serializer)}}class iy{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>CT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fk.bind(null,this.syncEngine),await KO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new WO})()}createDatastore(t){const e=Ud(t.databaseInfo.databaseId),i=(function(o){return new DO(o)})(t.databaseInfo);return(function(o,l,u,f){return new kO(o,l,u,f)})(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return(function(i,r,o,l,u){return new VO(i,r,o,l,u)})(this.localStore,this.datastore,t.asyncQueue,(e=>CT(this.syncEngine,e,0)),(function(){return TT.v()?new TT:new wO})())}createSyncEngine(t,e){return(function(r,o,l,u,f,d,p){const _=new ek(r,o,l,u,f,d);return p&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await(async function(r){const o=It(r);ft(Xa,"RemoteStore shutting down."),o.Ea.add(5),await Du(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}iy.provider={build:()=>new iy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):js("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="FirestoreClient";class pk{constructor(t,e,i,r,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=fn.UNAUTHENTICATED,this.clientId=Py.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{ft(Gr,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(ft(Gr,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=n_(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function _p(n,t){n.asyncQueue.verifyOperationInProgress(),ft(Gr,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await ew(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function DT(n,t){n.asyncQueue.verifyOperationInProgress();const e=await yk(n);ft(Gr,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((i=>ST(t.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>ST(t.remoteStore,r))),n._onlineComponents=t}async function yk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ft(Gr,"Using user provided OfflineComponentProvider");try{await _p(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(r){return r.name==="FirebaseError"?r.code===rt.FAILED_PRECONDITION||r.code===rt.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(e))throw e;al("Error using user provided cache. Falling back to memory cache: "+e),await _p(n,new gd)}}else ft(Gr,"Using default OfflineComponentProvider"),await _p(n,new mk(void 0));return n._offlineComponents}async function bw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ft(Gr,"Using user provided OnlineComponentProvider"),await DT(n,n._uninitializedComponentsProvider._online)):(ft(Gr,"Using default OnlineComponentProvider"),await DT(n,new iy))),n._onlineComponents}function _k(n){return bw(n).then((t=>t.syncEngine))}async function md(n){const t=await bw(n),e=t.eventManager;return e.onListen=nk.bind(null,t.syncEngine),e.onUnlisten=rk.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=ik.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=ak.bind(null,t.syncEngine),e}function bk(n,t,e={}){const i=new ks;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,f,d){const p=new c_({next:b=>{p.Nu(),l.enqueueAndForget((()=>s_(o,_)));const E=b.docs.has(u);!E&&b.fromCache?d.reject(new mt(rt.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&b.fromCache&&f&&f.source==="server"?d.reject(new mt(rt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(b)},error:b=>d.reject(b)}),_=new a_(kd(u.path),p,{includeMetadataChanges:!0,qa:!0});return i_(o,_)})(await md(n),n.asyncQueue,t,e,i))),i.promise}function vk(n,t,e={}){const i=new ks;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,f,d){const p=new c_({next:b=>{p.Nu(),l.enqueueAndForget((()=>s_(o,_))),b.fromCache&&f.source==="server"?d.reject(new mt(rt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(b)},error:b=>d.reject(b)}),_=new a_(u,p,{includeMetadataChanges:!0,qa:!0});return i_(o,_)})(await md(n),n.asyncQueue,t,e,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="firestore.googleapis.com",NT=!0;class OT{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new mt(rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xw,this.ssl=NT}else this.host=t.host,this.ssl=t.ssl??NT;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=ZA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<JN)throw new mt(rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}PM("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vw(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new mt(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new mt(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new mt(rt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Hd{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new mt(rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new mt(rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OT(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new AM;switch(i.type){case"firstParty":return new IM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new mt(rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const i=MT.get(e);i&&(ft("ComponentProvider","Removing Datastore"),MT.delete(e),i.terminate())})(this),Promise.resolve()}}function xk(n,t,e,i={}){var d;n=On(n,Hd);const r=pl(t),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},u=`${t}:${e}`;r&&(yS(`https://${u}`),_S("Firestore",!0)),o.host!==xw&&o.host!==u&&al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:u,ssl:r,emulatorOptions:i};if(!Ha(f,l)&&(n._setSettings(f),i.mockUserToken)){let p,_;if(typeof i.mockUserToken=="string")p=i.mockUserToken,_=fn.MOCK_USER;else{p=kC(i.mockUserToken,(d=n._app)==null?void 0:d.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new mt(rt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new fn(b)}n._authCredentials=new wM(new fA(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Nu(this.firestore,t,this._query)}}class Ce{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ce(this.firestore,t,this._key)}toJSON(){return{type:Ce._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(Ru(e,Ce._jsonSchema))return new Ce(t,i||null,new _t(fe.fromString(e.referencePath)))}}Ce._jsonSchemaVersion="firestore/documentReference/1.0",Ce._jsonSchema={type:Ue("string",Ce._jsonSchemaVersion),referencePath:Ue("string")};class jr extends Nu{constructor(t,e,i){super(t,e,kd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ce(this.firestore,null,new _t(t))}withConverter(t){return new jr(this.firestore,t,this._path)}}function sy(n,t,...e){if(n=Ke(n),dA("collection","path",t),n instanceof Hd){const i=fe.fromString(t,...e);return Kx(i),new jr(n,null,i)}{if(!(n instanceof Ce||n instanceof jr))throw new mt(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(fe.fromString(t,...e));return Kx(i),new jr(n.firestore,null,i)}}function Wa(n,t,...e){if(n=Ke(n),arguments.length===1&&(t=Py.newId()),dA("doc","path",t),n instanceof Hd){const i=fe.fromString(t,...e);return Yx(i),new Ce(n,null,new _t(i))}{if(!(n instanceof Ce||n instanceof jr))throw new mt(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(fe.fromString(t,...e));return Yx(i),new Ce(n.firestore,n instanceof jr?n.converter:null,new _t(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="AsyncQueue";class PT{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iw(this,"async_queue_retry"),this._c=()=>{const i=yp();i&&ft(kT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=yp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=yp();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new ks;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!xl(t))throw t;ft(kT,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,js("INTERNAL UNHANDLED ERROR: ",VT(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const r=e_.createAndSchedule(this,t,e,i,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&St(47125,{Pc:VT(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,i)=>e.targetTimeMs-i.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function VT(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(n){return(function(e,i){if(typeof e!="object"||e===null)return!1;const r=e;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(n,["next","error","complete"])}class Us extends Hd{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new PT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new PT(t),this._firestoreClient=void 0,await t}}}function Tk(n,t){const e=typeof n=="object"?n:TS(),i=typeof n=="string"?n:rd,r=Ay(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=NC("firestore");o&&xk(r,...o)}return r}function qd(n){if(n._terminated)throw new mt(rt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ek(n),n._firestoreClient}function Ek(n){var i,r,o;const t=n._freezeSettings(),e=(function(u,f,d,p){return new YM(u,f,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,vw(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,t);n._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((o=t.localCache)!=null&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new pk(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(u){const f=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ai(ln.fromBase64String(t))}catch(e){throw new mt(rt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new ai(ln.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ai._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ru(t,ai._jsonSchema))return ai.fromBase64String(t.bytes)}}ai._jsonSchemaVersion="firestore/bytes/1.0",ai._jsonSchema={type:Ue("string",ai._jsonSchemaVersion),bytes:Ue("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new mt(rt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new mt(rt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new mt(rt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Bt(this._lat,t._lat)||Bt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ts._jsonSchemaVersion}}static fromJSON(t){if(Ru(t,ts._jsonSchema))return new ts(t.latitude,t.longitude)}}ts._jsonSchemaVersion="firestore/geoPoint/1.0",ts._jsonSchema={type:Ue("string",ts._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,t._values)}toJSON(){return{type:es._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ru(t,es._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new es(t.vectorValues);throw new mt(rt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}es._jsonSchemaVersion="firestore/vectorValue/1.0",es._jsonSchema={type:Ue("string",es._jsonSchemaVersion),vectorValues:Ue("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=/^__.*__$/;class Ak{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Wr(t,this.data,this.fieldMask,e,this.fieldTransforms):new Cu(t,this.data,e,this.fieldTransforms)}}class Tw{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Wr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Ew(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw St(40011,{Ac:n})}}class h_{constructor(t,e,i,r,o,l){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new h_({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const e=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:e,fc:!1});return i.gc(t),i}yc(t){var r;const e=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:e,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return pd(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Ew(this.Ac)&&Sk.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class wk{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Ud(t)}Cc(t,e,i,r=!1){return new h_({Ac:t,methodName:e,Dc:i,path:on.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function f_(n){const t=n._freezeSettings(),e=Ud(n._databaseId);return new wk(n._databaseId,!!t.ignoreUndefinedProperties,e)}function Sw(n,t,e,i,r,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,t,e,r);d_("Data must be an object, but it was:",l,i);const u=Aw(i,l);let f,d;if(o.merge)f=new qn(l.fieldMask),d=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const _ of o.mergeFields){const b=ry(t,_,e);if(!l.contains(b))throw new mt(rt.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Rw(p,b)||p.push(b)}f=new qn(p),d=l.fieldTransforms.filter((_=>f.covers(_.field)))}else f=null,d=l.fieldTransforms;return new Ak(new Mn(u),f,d)}class Yd extends u_{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Yd}}function Rk(n,t,e,i){const r=n.Cc(1,t,e);d_("Data must be an object, but it was:",r,i);const o=[],l=Mn.empty();Xr(i,((f,d)=>{const p=g_(t,f,e);d=Ke(d);const _=r.yc(p);if(d instanceof Yd)o.push(p);else{const b=Kd(d,_);b!=null&&(o.push(p),l.set(p,b))}}));const u=new qn(o);return new Tw(l,u,r.fieldTransforms)}function Ck(n,t,e,i,r,o){const l=n.Cc(1,t,e),u=[ry(t,i,e)],f=[r];if(o.length%2!=0)throw new mt(rt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)u.push(ry(t,o[b])),f.push(o[b+1]);const d=[],p=Mn.empty();for(let b=u.length-1;b>=0;--b)if(!Rw(d,u[b])){const E=u[b];let w=f[b];w=Ke(w);const A=l.yc(E);if(w instanceof Yd)d.push(E);else{const R=Kd(w,A);R!=null&&(d.push(E),p.set(E,R))}}const _=new qn(d);return new Tw(p,_,l.fieldTransforms)}function Kd(n,t){if(ww(n=Ke(n)))return d_("Unsupported field value:",t,n),Aw(n,t);if(n instanceof u_)return(function(i,r){if(!Ew(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(i,r){const o=[];let l=0;for(const u of i){let f=Kd(u,r.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}})(n,t)}return(function(i,r){if((i=Ke(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return pN(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Jt.fromDate(i);return{timestampValue:hd(r.serializer,o)}}if(i instanceof Jt){const o=new Jt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:hd(r.serializer,o)}}if(i instanceof ts)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ai)return{bytesValue:YA(r.serializer,i._byteString)};if(i instanceof Ce){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Yy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof es)return(function(l,u){return{mapValue:{fields:{[TA]:{stringValue:EA},[ad]:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw u.Sc("VectorValues must only contain numeric values.");return Fy(u.serializer,d)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${Vy(i)}`)})(n,t)}function Aw(n,t){const e={};return pA(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xr(n,((i,r)=>{const o=Kd(r,t.mc(i));o!=null&&(e[i]=o)})),{mapValue:{fields:e}}}function ww(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Jt||n instanceof ts||n instanceof ai||n instanceof Ce||n instanceof u_||n instanceof es)}function d_(n,t,e){if(!ww(e)||!gA(e)){const i=Vy(e);throw i==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+i)}}function ry(n,t,e){if((t=Ke(t))instanceof Gd)return t._internalPath;if(typeof t=="string")return g_(n,t);throw pd("Field path arguments must be of type string or ",n,!1,void 0,e)}const Ik=new RegExp("[~\\*/\\[\\]]");function g_(n,t,e){if(t.search(Ik)>=0)throw pd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Gd(...t.split("."))._internalPath}catch{throw pd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function pd(n,t,e,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let u=`Function ${t}() called with invalid data`;e&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${i}`),l&&(f+=` in document ${r}`),f+=")"),new mt(rt.INVALID_ARGUMENT,u+n+f)}function Rw(n,t){return n.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Dk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Iw("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class Dk extends Cw{data(){return super.data()}}function Iw(n,t){return typeof t=="string"?g_(n,t):t instanceof Gd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dw(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new mt(rt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mk{convertValue(t,e="none"){switch(Hr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Re(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Fr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw St(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Xr(t,((r,o)=>{i[r]=this.convertValue(o,e)})),i}convertVectorValue(t){var i,r,o;const e=(o=(r=(i=t.fields)==null?void 0:i[ad].arrayValue)==null?void 0:r.values)==null?void 0:o.map((l=>Re(l.doubleValue)));return new es(e)}convertGeoPoint(t){return new ts(Re(t.latitude),Re(t.longitude))}convertArray(t,e){return(t.values||[]).map((i=>this.convertValue(i,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Nd(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(ou(t));default:return null}}convertTimestamp(t){const e=Br(t);return new Jt(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=fe.fromString(t);Zt(JA(i),9688,{name:t});const r=new lu(i.get(1),i.get(3)),o=new _t(i.popFirst(5));return r.isEqual(e)||js(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(n,t,e){let i;return i=n?n.toFirestore(t):t,i}class zc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ja extends Cw{constructor(t,e,i,r,o,l){super(t,e,i,r,l),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(Iw("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new mt(rt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=ja._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}ja._jsonSchemaVersion="firestore/documentSnapshot/1.0",ja._jsonSchema={type:Ue("string",ja._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class Uf extends ja{data(t={}){return super.data(t)}}class za{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new zc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((i=>{t.call(e,new Uf(this._firestore,this._userDataWriter,i.key,i,new zc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new mt(rt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((u=>{const f=new Uf(r._firestore,r._userDataWriter,u.doc.key,u.doc,new zc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const f=new Uf(r._firestore,r._userDataWriter,u.doc.key,u.doc,new zc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,p=-1;return u.type!==0&&(d=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),p=l.indexOf(u.doc.key)),{type:Nk(u.type),doc:f,oldIndex:d,newIndex:p}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new mt(rt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=za._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Py.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(e.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Nk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return St(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(n){n=On(n,Ce);const t=On(n.firestore,Us);return bk(qd(t),n._key).then((e=>Nw(t,n,e)))}za._jsonSchemaVersion="firestore/querySnapshot/1.0",za._jsonSchema={type:Ue("string",za._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class m_ extends Mk{constructor(t){super(),this.firestore=t}convertBytes(t){return new ai(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ce(this.firestore,null,e)}}function jT(n){n=On(n,Nu);const t=On(n.firestore,Us),e=qd(t),i=new m_(t);return Dw(n._query),vk(e,n._query).then((r=>new za(t,i,n,r)))}function kk(n,t,e){n=On(n,Ce);const i=On(n.firestore,Us),r=Mw(n.converter,t);return Xd(i,[Sw(f_(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,oi.none())])}function Pk(n,t,e,...i){n=On(n,Ce);const r=On(n.firestore,Us),o=f_(r);let l;return l=typeof(t=Ke(t))=="string"||t instanceof Gd?Ck(o,"updateDoc",n._key,t,e,i):Rk(o,"updateDoc",n._key,t),Xd(r,[l.toMutation(n._key,oi.exists(!0))])}function p_(n){return Xd(On(n.firestore,Us),[new Hy(n._key,oi.none())])}function Vk(n,t){const e=On(n.firestore,Us),i=Wa(n),r=Mw(n.converter,t);return Xd(e,[Sw(f_(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,oi.exists(!1))]).then((()=>i))}function Lk(n,...t){var f,d,p;n=Ke(n);let e={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||LT(t[i])||(e=t[i++]);const r={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(LT(t[i])){const _=t[i];t[i]=(f=_.next)==null?void 0:f.bind(_),t[i+1]=(d=_.error)==null?void 0:d.bind(_),t[i+2]=(p=_.complete)==null?void 0:p.bind(_)}let o,l,u;if(n instanceof Ce)l=On(n.firestore,Us),u=kd(n._key.path),o={next:_=>{t[i]&&t[i](Nw(l,n,_))},error:t[i+1],complete:t[i+2]};else{const _=On(n,Nu);l=On(_.firestore,Us),u=_._query;const b=new m_(l);o={next:E=>{t[i]&&t[i](new za(l,b,_,E))},error:t[i+1],complete:t[i+2]},Dw(n._query)}return(function(b,E,w,A){const R=new c_(A),O=new a_(E,R,w);return b.asyncQueue.enqueueAndForget((async()=>i_(await md(b),O))),()=>{R.Nu(),b.asyncQueue.enqueueAndForget((async()=>s_(await md(b),O)))}})(qd(l),u,r,o)}function Xd(n,t){return(function(i,r){const o=new ks;return i.asyncQueue.enqueueAndForget((async()=>ok(await _k(i),r,o))),o.promise})(qd(n),t)}function Nw(n,t,e){const i=e.docs.get(t._key),r=new m_(n);return new ja(n,r,t._key,i,new zc(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){bl=r})(yl),rl(new qa("firestore",((i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),u=new Us(new RM(i.getProvider("auth-internal")),new DM(l,i.getProvider("app-check-internal")),(function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new mt(rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lu(d.options.projectId,p)})(l,r),l);return o={useFetchStreams:e,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Vr(Fx,Hx,t),Vr(Fx,Hx,"esm2020")})();var jk="firebase",zk="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr(jk,zk,"app");const Uk={apiKey:"AIzaSyCgkd0TylEP3JJmvl5x5lC6qNH3Ce0t_us",authDomain:"order-target-planning.firebaseapp.com",projectId:"order-target-planning",storageBucket:"order-target-planning.appspot.com",messagingSenderId:"524933553639",appId:"1:524933553639:web:55c3d46598cdb9f3d0f142"},Ua="order-target-planning",Ow=xS(Uk),yd=EM(Ow),Ps=Tk(Ow),kw=()=>sy(Ps,`artifacts/${Ua}/public/data/plans`),Pw=n=>Wa(Ps,`artifacts/${Ua}/users/${n}/userProfiles/${n}`),Bk=async n=>{try{const t=Wa(Ps,`artifacts/${Ua}/public/data/plans`,n);await p_(t)}catch(t){throw console.error("Error deleting plan:",t),t}},Fk=async()=>{try{const n=sy(Ps,`artifacts/${Ua}/users`),t=await jT(n),e=[];for(const i of t.docs){const r=i.id,o=Wa(Ps,`artifacts/${Ua}/users/${r}/userProfiles/${r}`);(await jT(sy(Ps,`artifacts/${Ua}/users/${r}/userProfiles`))).forEach(u=>{e.push({id:r,...u.data()})})}return e}catch(n){throw console.error("Error fetching user profiles:",n),n}},Hk=async n=>{try{const t=Wa(Ps,`artifacts/${Ua}/users/${n}/userProfiles/${n}`);await p_(t)}catch(t){throw console.error("Error deleting user profile:",t),t}},y_="https://www.ginzalimited.com/cdn/shop/files/Ginza_logo.jpg?v=1668509673&width=500",fu="Ginza Industries Limited",qk=["Ahmedabad","Bangalore","Delhi","Jaipur","Kolkata","Ludhiana","Mumbai","Surat","Ulhasnagar","Tirupur"],Vw=["CKU","WARP","EMB","HOOK & EYE","ELASTIC","TLU","CROCHET","VAU","PRINTING","CUP"],Ou=({fullScreen:n=!1})=>n?S.jsxs("div",{className:"fixed inset-0 bg-gray-50 flex items-center justify-center z-50",children:[S.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary"}),S.jsx("p",{className:"text-secondary ml-4",children:"Loading..."})]}):S.jsx("div",{className:"flex items-center justify-center p-8",children:S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}),Gk=()=>{const[n,t]=ht.useState(!0),[e,i]=ht.useState(!1),[r,o]=ht.useState(""),[l,u]=ht.useState(!1),[f,d]=ht.useState(""),[p,_]=ht.useState(""),b=async w=>{w.preventDefault(),i(!0),o("");const A=new FormData(w.currentTarget),R=A.get("email"),O=A.get("password");try{await oD(yd,R,O)}catch(q){o(q.message||"Login failed. Please try again.")}finally{i(!1)}},E=async w=>{w.preventDefault(),i(!0),o("");const A=new FormData(w.currentTarget),R=A.get("firstname"),O=A.get("lastname"),q=A.get("email"),j=A.get("password"),B=A.get("confirmPassword"),U=p,Y=f;if(j!==B){o("Passwords do not match."),i(!1);return}try{const D=(await aD(yd,q,j)).user,N=U==="Master"?"All Branches":Y,V={uid:D.uid,firstName:R,lastName:O,fullName:`${R} ${O}`.trim(),email:q,branch:N,role:U,createdAt:Jt.now()};await kk(Pw(D.uid),V),await lD(D),alert("Registration successful! Verification email sent.")}catch(I){o(I.message||"Registration failed. Please try again.")}finally{i(!1)}};return S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:S.jsxs("div",{className:"max-w-md w-full space-y-6 bg-white p-8 shadow-2xl rounded-xl",children:[e&&S.jsx(Ou,{}),S.jsxs("div",{className:"text-center",children:[S.jsx("img",{className:"mx-auto h-16 w-auto rounded-lg",src:y_,alt:fu}),S.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:n?"Sign in to your account":"Create New Account"}),S.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[fu," Sales Portal"]})]}),r&&S.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:r}),n?S.jsxs("form",{className:"mt-8 space-y-6",onSubmit:b,children:[S.jsxs("div",{className:"rounded-md shadow-sm space-y-3",children:[S.jsx("input",{name:"email",type:"email",required:!0,className:"rounded-md block w-full px-3 py-3 border border-gray-300 text-gray-900",placeholder:"Email address"}),S.jsx("input",{name:"password",type:"password",required:!0,className:"rounded-md block w-full px-3 py-3 border border-gray-300 text-gray-900",placeholder:"Password"})]}),S.jsx("button",{type:"submit",className:"w-full py-3 px-4 rounded-md text-sm font-medium",style:{backgroundColor:"#2563eb",color:"white"},children:"Sign in"})]}):S.jsxs("form",{className:"mt-8 space-y-6",onSubmit:E,children:[S.jsxs("div",{className:"rounded-md shadow-sm space-y-3",children:[S.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[S.jsx("input",{name:"firstname",type:"text",required:!0,className:"rounded-md px-3 py-3 border border-gray-300 text-gray-900",placeholder:"First Name"}),S.jsx("input",{name:"lastname",type:"text",required:!0,className:"rounded-md px-3 py-3 border border-gray-300 text-gray-900",placeholder:"Last Name"})]}),S.jsx("input",{name:"email",type:"email",required:!0,className:"rounded-md px-3 py-3 border border-gray-300 text-gray-900",placeholder:"Email"}),S.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[S.jsx("input",{id:"reg-password",name:"password",type:l?"text":"password",required:!0,className:"rounded-md px-3 py-3 border border-gray-300 text-gray-900",placeholder:"Password"}),S.jsx("input",{id:"reg-confirm-password",name:"confirmPassword",type:l?"text":"password",required:!0,className:"rounded-md px-3 py-3 border border-gray-300 text-gray-900",placeholder:"Confirm Password"})]}),S.jsxs("div",{className:"flex items-center text-sm gap-3",children:[S.jsx("input",{id:"reg-show-pass",type:"checkbox",className:"h-4 w-4",checked:l,onChange:()=>u(!l)}),S.jsx("label",{htmlFor:"reg-show-pass",className:"text-xs text-gray-600",children:"Show Password"})]}),S.jsxs("select",{name:"branch",required:!0,value:f,onChange:w=>d(w.target.value),className:"rounded-md px-3 py-3 border border-gray-300 text-gray-900",children:[S.jsx("option",{value:"",children:"Select Branch"}),p==="Master"&&S.jsx("option",{value:"All Branches",children:"All Branches"}),qk.map(w=>S.jsx("option",{value:w,children:w},w))]}),S.jsxs("select",{name:"role",required:!0,value:p,onChange:w=>{const A=w.target.value;_(A),A==="Master"?d("All Branches"):f==="All Branches"&&d("")},className:"rounded-md px-3 py-3 border border-gray-300 text-gray-900",children:[S.jsx("option",{value:"",children:"Select Role"}),S.jsx("option",{value:"Sales Person",children:"Sales Person"}),S.jsx("option",{value:"Branch Head",children:"Branch Head"}),S.jsx("option",{value:"Master",children:"Master"})]})]}),S.jsx("button",{type:"submit",className:"w-full py-3 px-4 rounded-md text-sm font-medium",style:{backgroundColor:"#facc15",color:"white"},children:"Register & Sign in"})]}),S.jsx("div",{className:"text-center",children:S.jsx("button",{onClick:()=>{t(!n),o(""),d(""),_("")},className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition",children:n?"Don't have an account? Register Now":"Already have an account? Sign In"})})]})})},zT=(n,t="auto")=>{if(n==null||isNaN(n))return"0";const e=Number(n);return t==="K"?(e/1e3).toLocaleString("en-IN",{maximumFractionDigits:2})+"K":t==="M"?(e/1e6).toLocaleString("en-IN",{maximumFractionDigits:2})+"M":Math.abs(e)>=1e6?(e/1e6).toLocaleString("en-IN",{maximumFractionDigits:2})+"M":Math.abs(e)>=1e3?(e/1e3).toLocaleString("en-IN",{maximumFractionDigits:2})+"K":e.toLocaleString("en-IN")},fl=n=>{if(!n)return"N/A";try{let t;if(typeof(n==null?void 0:n.toDate)=="function"?t=n.toDate():typeof n=="object"&&n!==null&&"seconds"in n?t=new Date(n.seconds*1e3):t=new Date(n),!isNaN(t.getTime())){const e=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getFullYear());return`${e}/${i}/${r}`}}catch{}return"Invalid Date"},Yk=n=>{if(!n||n.length===0)return"";const t=Object.keys(n[0]),e=[t.join(",")];for(const i of n){const r=t.map(o=>`"${(""+i[o]).replace(/"/g,'""')}"`);e.push(r.join(","))}return e.join(`
`)},Kk=n=>{if(n.length===0){alert("No completed reports found to download.");return}const t=n.map(l=>{const u=l.unitTargets.reduce((_,b)=>_+(b.target||0),0),f=l.unitActuals.reduce((_,b)=>_+(b.actual||0),0),d=u>0?(f/u*100).toFixed(2):"0.00",p={ID:l.id,Salesperson:l.salespersonName,Branch:l.branch,"Start Date":fl(l.startDate),"End Date":fl(l.endDate),Status:l.status,"Total Target":u,"Total Actual":f,"Achievement (%)":d};return Vw.forEach(_=>{const b=l.unitTargets.find(w=>w.unit===_),E=l.unitActuals.find(w=>w.unit===_);p[`${_}_Target`]=b?b.target:0,p[`${_}_Actual`]=E?E.actual:0}),p["Customer Visits"]=l.customers.map(_=>`${_.name} (${_.visitStatus})`).join("; "),p}),e=Yk(t),i=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(i),o=document.createElement("a");o.setAttribute("href",r),o.setAttribute("download",`Sales_Report_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild(o),o.click(),document.body.removeChild(o)},__=(n,t)=>{if(!t)return[];const{role:e,branch:i,uid:r}=t;return e==="Master"?n:e==="Branch Head"?n.filter(o=>o.branch===i):e==="Sales Person"?n.filter(o=>o.salespersonId===r):[]};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ku(n){return n+.5|0}const Ir=(n,t,e)=>Math.max(Math.min(n,e),t);function Uc(n){return Ir(ku(n*2.55),0,255)}function zr(n){return Ir(ku(n*255),0,255)}function Rs(n){return Ir(ku(n/2.55)/100,0,1)}function UT(n){return Ir(ku(n*100),0,100)}const si={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ay=[..."0123456789ABCDEF"],Xk=n=>ay[n&15],Wk=n=>ay[(n&240)>>4]+ay[n&15],_f=n=>(n&240)>>4===(n&15),Qk=n=>_f(n.r)&&_f(n.g)&&_f(n.b)&&_f(n.a);function $k(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&si[n[1]]*17,g:255&si[n[2]]*17,b:255&si[n[3]]*17,a:t===5?si[n[4]]*17:255}:(t===7||t===9)&&(e={r:si[n[1]]<<4|si[n[2]],g:si[n[3]]<<4|si[n[4]],b:si[n[5]]<<4|si[n[6]],a:t===9?si[n[7]]<<4|si[n[8]]:255})),e}const Jk=(n,t)=>n<255?t(n):"";function Zk(n){var t=Qk(n)?Xk:Wk;return n?"#"+t(n.r)+t(n.g)+t(n.b)+Jk(n.a,t):void 0}const tP=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Lw(n,t,e){const i=t*Math.min(e,1-e),r=(o,l=(o+n/30)%12)=>e-i*Math.max(Math.min(l-3,9-l,1),-1);return[r(0),r(8),r(4)]}function eP(n,t,e){const i=(r,o=(r+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function nP(n,t,e){const i=Lw(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function iP(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function b_(n){const e=n.r/255,i=n.g/255,r=n.b/255,o=Math.max(e,i,r),l=Math.min(e,i,r),u=(o+l)/2;let f,d,p;return o!==l&&(p=o-l,d=u>.5?p/(2-o-l):p/(o+l),f=iP(e,i,r,p,o),f=f*60+.5),[f|0,d||0,u]}function v_(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(zr)}function x_(n,t,e){return v_(Lw,n,t,e)}function sP(n,t,e){return v_(nP,n,t,e)}function rP(n,t,e){return v_(eP,n,t,e)}function jw(n){return(n%360+360)%360}function aP(n){const t=tP.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Uc(+t[5]):zr(+t[5]));const r=jw(+t[2]),o=+t[3]/100,l=+t[4]/100;return t[1]==="hwb"?i=sP(r,o,l):t[1]==="hsv"?i=rP(r,o,l):i=x_(r,o,l),{r:i[0],g:i[1],b:i[2],a:e}}function oP(n,t){var e=b_(n);e[0]=jw(e[0]+t),e=x_(e),n.r=e[0],n.g=e[1],n.b=e[2]}function lP(n){if(!n)return;const t=b_(n),e=t[0],i=UT(t[1]),r=UT(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${Rs(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const BT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},FT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function cP(){const n={},t=Object.keys(FT),e=Object.keys(BT);let i,r,o,l,u;for(i=0;i<t.length;i++){for(l=u=t[i],r=0;r<e.length;r++)o=e[r],u=u.replace(o,BT[o]);o=parseInt(FT[l],16),n[u]=[o>>16&255,o>>8&255,o&255]}return n}let bf;function uP(n){bf||(bf=cP(),bf.transparent=[0,0,0,0]);const t=bf[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const hP=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function fP(n){const t=hP.exec(n);let e=255,i,r,o;if(t){if(t[7]!==i){const l=+t[7];e=t[8]?Uc(l):Ir(l*255,0,255)}return i=+t[1],r=+t[3],o=+t[5],i=255&(t[2]?Uc(i):Ir(i,0,255)),r=255&(t[4]?Uc(r):Ir(r,0,255)),o=255&(t[6]?Uc(o):Ir(o,0,255)),{r:i,g:r,b:o,a:e}}}function dP(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Rs(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const bp=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Ko=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function gP(n,t,e){const i=Ko(Rs(n.r)),r=Ko(Rs(n.g)),o=Ko(Rs(n.b));return{r:zr(bp(i+e*(Ko(Rs(t.r))-i))),g:zr(bp(r+e*(Ko(Rs(t.g))-r))),b:zr(bp(o+e*(Ko(Rs(t.b))-o))),a:n.a+e*(t.a-n.a)}}function vf(n,t,e){if(n){let i=b_(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=x_(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function zw(n,t){return n&&Object.assign(t||{},n)}function HT(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=zr(n[3]))):(t=zw(n,{r:0,g:0,b:0,a:1}),t.a=zr(t.a)),t}function mP(n){return n.charAt(0)==="r"?fP(n):aP(n)}class du{constructor(t){if(t instanceof du)return t;const e=typeof t;let i;e==="object"?i=HT(t):e==="string"&&(i=$k(t)||uP(t)||mP(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=zw(this._rgb);return t&&(t.a=Rs(t.a)),t}set rgb(t){this._rgb=HT(t)}rgbString(){return this._valid?dP(this._rgb):void 0}hexString(){return this._valid?Zk(this._rgb):void 0}hslString(){return this._valid?lP(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let o;const l=e===o?.5:e,u=2*l-1,f=i.a-r.a,d=((u*f===-1?u:(u+f)/(1+u*f))+1)/2;o=1-d,i.r=255&d*i.r+o*r.r+.5,i.g=255&d*i.g+o*r.g+.5,i.b=255&d*i.b+o*r.b+.5,i.a=l*i.a+(1-l)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=gP(this._rgb,t._rgb,e)),this}clone(){return new du(this.rgb)}alpha(t){return this._rgb.a=zr(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=ku(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return vf(this._rgb,2,t),this}darken(t){return vf(this._rgb,2,-t),this}saturate(t){return vf(this._rgb,1,t),this}desaturate(t){return vf(this._rgb,1,-t),this}rotate(t){return oP(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ss(){}const pP=(()=>{let n=0;return()=>n++})();function Vt(n){return n==null}function ye(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ht(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Te(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Hn(n,t){return Te(n)?n:t}function Ct(n,t){return typeof n>"u"?t:n}const yP=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,Uw=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function ce(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function ie(n,t,e,i){let r,o,l;if(ye(n))for(o=n.length,r=0;r<o;r++)t.call(e,n[r],r);else if(Ht(n))for(l=Object.keys(n),o=l.length,r=0;r<o;r++)t.call(e,n[l[r]],l[r])}function _d(n,t){let e,i,r,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],o=t[e],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function bd(n){if(ye(n))return n.map(bd);if(Ht(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=bd(n[e[r]]);return t}return n}function Bw(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function _P(n,t,e,i){if(!Bw(n))return;const r=t[n],o=e[n];Ht(r)&&Ht(o)?gu(r,o,i):t[n]=bd(o)}function gu(n,t,e){const i=ye(t)?t:[t],r=i.length;if(!Ht(n))return n;e=e||{};const o=e.merger||_P;let l;for(let u=0;u<r;++u){if(l=i[u],!Ht(l))continue;const f=Object.keys(l);for(let d=0,p=f.length;d<p;++d)o(f[d],n,l,e)}return n}function Jc(n,t){return gu(n,t,{merger:bP})}function bP(n,t,e){if(!Bw(n))return;const i=t[n],r=e[n];Ht(i)&&Ht(r)?Jc(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=bd(r))}const qT={"":n=>n,x:n=>n.x,y:n=>n.y};function vP(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function xP(n){const t=vP(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Yr(n,t){return(qT[t]||(qT[t]=xP(t)))(n)}function T_(n){return n.charAt(0).toUpperCase()+n.slice(1)}const mu=n=>typeof n<"u",Kr=n=>typeof n=="function",GT=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function TP(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Wt=Math.PI,de=2*Wt,EP=de+Wt,vd=Number.POSITIVE_INFINITY,SP=Wt/180,Ie=Wt/2,Ca=Wt/4,YT=Wt*2/3,Dr=Math.log10,ns=Math.sign;function Zc(n,t,e){return Math.abs(n-t)<e}function KT(n){const t=Math.round(n);n=Zc(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Dr(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function AP(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,o)=>r-o).pop(),t}function wP(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function dl(n){return!wP(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function RP(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function Fw(n,t,e){let i,r,o;for(i=0,r=n.length;i<r;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function xi(n){return n*(Wt/180)}function E_(n){return n*(180/Wt)}function XT(n){if(!Te(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function Hw(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*Wt&&(o+=de),{angle:o,distance:r}}function oy(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function CP(n,t){return(n-t+EP)%de-Wt}function dn(n){return(n%de+de)%de}function pu(n,t,e,i){const r=dn(n),o=dn(t),l=dn(e),u=dn(o-r),f=dn(l-r),d=dn(r-o),p=dn(r-l);return r===o||r===l||i&&o===l||u>f&&d<p}function Je(n,t,e){return Math.max(t,Math.min(e,n))}function IP(n){return Je(n,-32768,32767)}function Ds(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function S_(n,t,e){e=e||(l=>n[l]<t);let i=n.length-1,r=0,o;for(;i-r>1;)o=r+i>>1,e(o)?r=o:i=o;return{lo:r,hi:i}}const Ms=(n,t,e,i)=>S_(n,e,i?r=>{const o=n[r][t];return o<e||o===e&&n[r+1][t]===e}:r=>n[r][t]<e),DP=(n,t,e)=>S_(n,e,i=>n[i][t]>=e);function MP(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const qw=["push","pop","shift","splice","unshift"];function NP(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),qw.forEach(e=>{const i="_onData"+T_(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const l=r.apply(this,o);return n._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...o)}),l}})})}function WT(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(qw.forEach(o=>{delete n[o]}),delete n._chartjs)}function Gw(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const Yw=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function Kw(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,Yw.call(window,()=>{i=!1,n.apply(t,e)}))}}function OP(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const A_=n=>n==="start"?"left":n==="end"?"right":"center",hn=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,kP=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function Xw(n,t,e){const i=t.length;let r=0,o=i;if(n._sorted){const{iScale:l,vScale:u,_parsed:f}=n,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,p=l.axis,{min:_,max:b,minDefined:E,maxDefined:w}=l.getUserBounds();if(E){if(r=Math.min(Ms(f,p,_).lo,e?i:Ms(t,p,l.getPixelForValue(_)).lo),d){const A=f.slice(0,r+1).reverse().findIndex(R=>!Vt(R[u.axis]));r-=Math.max(0,A)}r=Je(r,0,i-1)}if(w){let A=Math.max(Ms(f,l.axis,b,!0).hi+1,e?0:Ms(t,p,l.getPixelForValue(b),!0).hi+1);if(d){const R=f.slice(A-1).findIndex(O=>!Vt(O[u.axis]));A+=Math.max(0,R)}o=Je(A,r,i)-r}else o=i-r}return{start:r,count:o}}function Ww(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),o}const xf=n=>n===0||n===1,QT=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*de/e)),$T=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*de/e)+1,tu={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Ie)+1,easeOutSine:n=>Math.sin(n*Ie),easeInOutSine:n=>-.5*(Math.cos(Wt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>xf(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>xf(n)?n:QT(n,.075,.3),easeOutElastic:n=>xf(n)?n:$T(n,.075,.3),easeInOutElastic(n){return xf(n)?n:n<.5?.5*QT(n*2,.1125,.45):.5+.5*$T(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-tu.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?tu.easeInBounce(n*2)*.5:tu.easeOutBounce(n*2-1)*.5+.5};function w_(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function JT(n){return w_(n)?n:new du(n)}function vp(n){return w_(n)?n:new du(n).saturate(.5).darken(.1).hexString()}const PP=["x","y","borderWidth","radius","tension"],VP=["color","borderColor","backgroundColor"];function LP(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:VP},numbers:{type:"number",properties:PP}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function jP(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ZT=new Map;function zP(n,t){t=t||{};const e=n+JSON.stringify(t);let i=ZT.get(e);return i||(i=new Intl.NumberFormat(n,t),ZT.set(e,i)),i}function Pu(n,t,e){return zP(t,e).format(n)}const Qw={values(n){return ye(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let r,o=n;if(e.length>1){const d=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),o=UP(n,e)}const l=Dr(Math.abs(o)),u=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),f={notation:r,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(f,this.options.ticks.format),Pu(n,i,f)},logarithmic(n,t,e){if(n===0)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(Dr(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?Qw.numeric.call(this,n,t,e):""}};function UP(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Wd={formatters:Qw};function BP(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Wd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Qa=Object.create(null),ly=Object.create(null);function eu(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function xp(n,t,e){return typeof t=="string"?gu(eu(n,t),e):gu(eu(n,""),t)}class FP{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>vp(r.backgroundColor),this.hoverBorderColor=(i,r)=>vp(r.borderColor),this.hoverColor=(i,r)=>vp(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return xp(this,t,e)}get(t){return eu(this,t)}describe(t,e){return xp(ly,t,e)}override(t,e){return xp(Qa,t,e)}route(t,e,i,r){const o=eu(this,t),l=eu(this,i),u="_"+e;Object.defineProperties(o,{[u]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const f=this[u],d=l[r];return Ht(f)?Object.assign({},d,f):Ct(f,d)},set(f){this[u]=f}}})}apply(t){t.forEach(e=>e(this))}}var _e=new FP({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[LP,jP,BP]);function HP(n){return!n||Vt(n.size)||Vt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function xd(n,t,e,i,r){let o=t[r];return o||(o=t[r]=n.measureText(r).width,e.push(r)),o>i&&(i=o),i}function qP(n,t,e,i){i=i||{};let r=i.data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},o=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let l=0;const u=e.length;let f,d,p,_,b;for(f=0;f<u;f++)if(_=e[f],_!=null&&!ye(_))l=xd(n,r,o,l,_);else if(ye(_))for(d=0,p=_.length;d<p;d++)b=_[d],b!=null&&!ye(b)&&(l=xd(n,r,o,l,b));n.restore();const E=o.length/2;if(E>e.length){for(f=0;f<E;f++)delete r[o[f]];o.splice(0,E)}return l}function Ia(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function tE(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function cy(n,t,e,i){$w(n,t,e,i,null)}function $w(n,t,e,i,r){let o,l,u,f,d,p,_,b;const E=t.pointStyle,w=t.rotation,A=t.radius;let R=(w||0)*SP;if(E&&typeof E=="object"&&(o=E.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(R),n.drawImage(E,-E.width/2,-E.height/2,E.width,E.height),n.restore();return}if(!(isNaN(A)||A<=0)){switch(n.beginPath(),E){default:r?n.ellipse(e,i,r/2,A,0,0,de):n.arc(e,i,A,0,de),n.closePath();break;case"triangle":p=r?r/2:A,n.moveTo(e+Math.sin(R)*p,i-Math.cos(R)*A),R+=YT,n.lineTo(e+Math.sin(R)*p,i-Math.cos(R)*A),R+=YT,n.lineTo(e+Math.sin(R)*p,i-Math.cos(R)*A),n.closePath();break;case"rectRounded":d=A*.516,f=A-d,l=Math.cos(R+Ca)*f,_=Math.cos(R+Ca)*(r?r/2-d:f),u=Math.sin(R+Ca)*f,b=Math.sin(R+Ca)*(r?r/2-d:f),n.arc(e-_,i-u,d,R-Wt,R-Ie),n.arc(e+b,i-l,d,R-Ie,R),n.arc(e+_,i+u,d,R,R+Ie),n.arc(e-b,i+l,d,R+Ie,R+Wt),n.closePath();break;case"rect":if(!w){f=Math.SQRT1_2*A,p=r?r/2:f,n.rect(e-p,i-f,2*p,2*f);break}R+=Ca;case"rectRot":_=Math.cos(R)*(r?r/2:A),l=Math.cos(R)*A,u=Math.sin(R)*A,b=Math.sin(R)*(r?r/2:A),n.moveTo(e-_,i-u),n.lineTo(e+b,i-l),n.lineTo(e+_,i+u),n.lineTo(e-b,i+l),n.closePath();break;case"crossRot":R+=Ca;case"cross":_=Math.cos(R)*(r?r/2:A),l=Math.cos(R)*A,u=Math.sin(R)*A,b=Math.sin(R)*(r?r/2:A),n.moveTo(e-_,i-u),n.lineTo(e+_,i+u),n.moveTo(e+b,i-l),n.lineTo(e-b,i+l);break;case"star":_=Math.cos(R)*(r?r/2:A),l=Math.cos(R)*A,u=Math.sin(R)*A,b=Math.sin(R)*(r?r/2:A),n.moveTo(e-_,i-u),n.lineTo(e+_,i+u),n.moveTo(e+b,i-l),n.lineTo(e-b,i+l),R+=Ca,_=Math.cos(R)*(r?r/2:A),l=Math.cos(R)*A,u=Math.sin(R)*A,b=Math.sin(R)*(r?r/2:A),n.moveTo(e-_,i-u),n.lineTo(e+_,i+u),n.moveTo(e+b,i-l),n.lineTo(e-b,i+l);break;case"line":l=r?r/2:Math.cos(R)*A,u=Math.sin(R)*A,n.moveTo(e-l,i-u),n.lineTo(e+l,i+u);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(R)*(r?r/2:A),i+Math.sin(R)*A);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Ns(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Qd(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function $d(n){n.restore()}function GP(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if(r==="middle"){const o=(t.x+e.x)/2;n.lineTo(o,t.y),n.lineTo(o,e.y)}else r==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function YP(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function KP(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Vt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function XP(n,t,e,i,r){if(r.strikethrough||r.underline){const o=n.measureText(i),l=t-o.actualBoundingBoxLeft,u=t+o.actualBoundingBoxRight,f=e-o.actualBoundingBoxAscent,d=e+o.actualBoundingBoxDescent,p=r.strikethrough?(f+d)/2:d;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(l,p),n.lineTo(u,p),n.stroke()}}function WP(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function $a(n,t,e,i,r,o={}){const l=ye(t)?t:[t],u=o.strokeWidth>0&&o.strokeColor!=="";let f,d;for(n.save(),n.font=r.string,KP(n,o),f=0;f<l.length;++f)d=l[f],o.backdrop&&WP(n,o.backdrop),u&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),Vt(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(d,e,i,o.maxWidth)),n.fillText(d,e,i,o.maxWidth),XP(n,e,i,d,o),i+=Number(r.lineHeight);n.restore()}function yu(n,t){const{x:e,y:i,w:r,h:o,radius:l}=t;n.arc(e+l.topLeft,i+l.topLeft,l.topLeft,1.5*Wt,Wt,!0),n.lineTo(e,i+o-l.bottomLeft),n.arc(e+l.bottomLeft,i+o-l.bottomLeft,l.bottomLeft,Wt,Ie,!0),n.lineTo(e+r-l.bottomRight,i+o),n.arc(e+r-l.bottomRight,i+o-l.bottomRight,l.bottomRight,Ie,0,!0),n.lineTo(e+r,i+l.topRight),n.arc(e+r-l.topRight,i+l.topRight,l.topRight,0,-Ie,!0),n.lineTo(e+l.topLeft,i)}const QP=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,$P=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function JP(n,t){const e=(""+n).match(QP);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const ZP=n=>+n||0;function R_(n,t){const e={},i=Ht(t),r=i?Object.keys(t):t,o=Ht(n)?i?l=>Ct(n[l],n[t[l]]):l=>n[l]:()=>n;for(const l of r)e[l]=ZP(o(l));return e}function Jw(n){return R_(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ba(n){return R_(n,["topLeft","topRight","bottomLeft","bottomRight"])}function yn(n){const t=Jw(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ge(n,t){n=n||{},t=t||_e.font;let e=Ct(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Ct(n.style,t.style);i&&!(""+i).match($P)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Ct(n.family,t.family),lineHeight:JP(Ct(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Ct(n.weight,t.weight),string:""};return r.string=HP(r),r}function Bc(n,t,e,i){let r,o,l;for(r=0,o=n.length;r<o;++r)if(l=n[r],l!==void 0&&l!==void 0)return l}function tV(n,t,e){const{min:i,max:r}=n,o=Uw(t,(r-i)/2),l=(u,f)=>e&&u===0?0:u+f;return{min:l(i,-Math.abs(o)),max:l(r,o)}}function Qr(n,t){return Object.assign(Object.create(n),t)}function C_(n,t=[""],e,i,r=()=>n[0]){const o=e||n;typeof i>"u"&&(i=n1("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:r,override:u=>C_([u,...n],t,o,i)};return new Proxy(l,{deleteProperty(u,f){return delete u[f],delete u._keys,delete n[0][f],!0},get(u,f){return t1(u,f,()=>lV(f,t,n,u))},getOwnPropertyDescriptor(u,f){return Reflect.getOwnPropertyDescriptor(u._scopes[0],f)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(u,f){return nE(u).includes(f)},ownKeys(u){return nE(u)},set(u,f,d){const p=u._storage||(u._storage=r());return u[f]=p[f]=d,delete u._keys,!0}})}function gl(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Zw(n,i),setContext:o=>gl(n,o,e,i),override:o=>gl(n.override(o),t,e,i)};return new Proxy(r,{deleteProperty(o,l){return delete o[l],delete n[l],!0},get(o,l,u){return t1(o,l,()=>nV(o,l,u))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(o,l,u){return n[l]=u,delete o[l],!0}})}function Zw(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:Kr(e)?e:()=>e,isIndexable:Kr(i)?i:()=>i}}const eV=(n,t)=>n?n+T_(t):t,I_=(n,t)=>Ht(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function t1(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function nV(n,t,e){const{_proxy:i,_context:r,_subProxy:o,_descriptors:l}=n;let u=i[t];return Kr(u)&&l.isScriptable(t)&&(u=iV(t,u,n,e)),ye(u)&&u.length&&(u=sV(t,u,n,l.isIndexable)),I_(t,u)&&(u=gl(u,r,o&&o[t],l)),u}function iV(n,t,e,i){const{_proxy:r,_context:o,_subProxy:l,_stack:u}=e;if(u.has(n))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+n);u.add(n);let f=t(o,l||i);return u.delete(n),I_(n,f)&&(f=D_(r._scopes,r,n,f)),f}function sV(n,t,e,i){const{_proxy:r,_context:o,_subProxy:l,_descriptors:u}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(Ht(t[0])){const f=t,d=r._scopes.filter(p=>p!==f);t=[];for(const p of f){const _=D_(d,r,n,p);t.push(gl(_,o,l&&l[n],u))}}return t}function e1(n,t,e){return Kr(n)?n(t,e):n}const rV=(n,t)=>n===!0?t:typeof n=="string"?Yr(t,n):void 0;function aV(n,t,e,i,r){for(const o of t){const l=rV(e,o);if(l){n.add(l);const u=e1(l._fallback,e,r);if(typeof u<"u"&&u!==e&&u!==i)return u}else if(l===!1&&typeof i<"u"&&e!==i)return null}return!1}function D_(n,t,e,i){const r=t._rootScopes,o=e1(t._fallback,e,i),l=[...n,...r],u=new Set;u.add(i);let f=eE(u,l,e,o||e,i);return f===null||typeof o<"u"&&o!==e&&(f=eE(u,l,o,f,i),f===null)?!1:C_(Array.from(u),[""],r,o,()=>oV(t,e,i))}function eE(n,t,e,i,r){for(;e;)e=aV(n,t,e,i,r);return e}function oV(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return ye(r)&&Ht(e)?e:r||{}}function lV(n,t,e,i){let r;for(const o of t)if(r=n1(eV(o,n),e),typeof r<"u")return I_(n,r)?D_(e,i,n,r):r}function n1(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function nE(n){let t=n._keys;return t||(t=n._keys=cV(n._scopes)),t}function cV(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function i1(n,t,e,i){const{iScale:r}=n,{key:o="r"}=this._parsing,l=new Array(i);let u,f,d,p;for(u=0,f=i;u<f;++u)d=u+e,p=t[d],l[u]={r:r.parse(Yr(p,o),d)};return l}const uV=Number.EPSILON||1e-14,ml=(n,t)=>t<n.length&&!n[t].skip&&n[t],s1=n=>n==="x"?"y":"x";function hV(n,t,e,i){const r=n.skip?t:n,o=t,l=e.skip?t:e,u=oy(o,r),f=oy(l,o);let d=u/(u+f),p=f/(u+f);d=isNaN(d)?0:d,p=isNaN(p)?0:p;const _=i*d,b=i*p;return{previous:{x:o.x-_*(l.x-r.x),y:o.y-_*(l.y-r.y)},next:{x:o.x+b*(l.x-r.x),y:o.y+b*(l.y-r.y)}}}function fV(n,t,e){const i=n.length;let r,o,l,u,f,d=ml(n,0);for(let p=0;p<i-1;++p)if(f=d,d=ml(n,p+1),!(!f||!d)){if(Zc(t[p],0,uV)){e[p]=e[p+1]=0;continue}r=e[p]/t[p],o=e[p+1]/t[p],u=Math.pow(r,2)+Math.pow(o,2),!(u<=9)&&(l=3/Math.sqrt(u),e[p]=r*l*t[p],e[p+1]=o*l*t[p])}}function dV(n,t,e="x"){const i=s1(e),r=n.length;let o,l,u,f=ml(n,0);for(let d=0;d<r;++d){if(l=u,u=f,f=ml(n,d+1),!u)continue;const p=u[e],_=u[i];l&&(o=(p-l[e])/3,u[`cp1${e}`]=p-o,u[`cp1${i}`]=_-o*t[d]),f&&(o=(f[e]-p)/3,u[`cp2${e}`]=p+o,u[`cp2${i}`]=_+o*t[d])}}function gV(n,t="x"){const e=s1(t),i=n.length,r=Array(i).fill(0),o=Array(i);let l,u,f,d=ml(n,0);for(l=0;l<i;++l)if(u=f,f=d,d=ml(n,l+1),!!f){if(d){const p=d[t]-f[t];r[l]=p!==0?(d[e]-f[e])/p:0}o[l]=u?d?ns(r[l-1])!==ns(r[l])?0:(r[l-1]+r[l])/2:r[l-1]:r[l]}fV(n,r,o),dV(n,o,t)}function Tf(n,t,e){return Math.max(Math.min(n,e),t)}function mV(n,t){let e,i,r,o,l,u=Ns(n[0],t);for(e=0,i=n.length;e<i;++e)l=o,o=u,u=e<i-1&&Ns(n[e+1],t),o&&(r=n[e],l&&(r.cp1x=Tf(r.cp1x,t.left,t.right),r.cp1y=Tf(r.cp1y,t.top,t.bottom)),u&&(r.cp2x=Tf(r.cp2x,t.left,t.right),r.cp2y=Tf(r.cp2y,t.top,t.bottom)))}function pV(n,t,e,i,r){let o,l,u,f;if(t.spanGaps&&(n=n.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")gV(n,r);else{let d=i?n[n.length-1]:n[0];for(o=0,l=n.length;o<l;++o)u=n[o],f=hV(d,u,n[Math.min(o+1,l-(i?0:1))%l],t.tension),u.cp1x=f.previous.x,u.cp1y=f.previous.y,u.cp2x=f.next.x,u.cp2y=f.next.y,d=u}t.capBezierPoints&&mV(n,e)}function M_(){return typeof window<"u"&&typeof document<"u"}function N_(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Td(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const Jd=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function yV(n,t){return Jd(n).getPropertyValue(t)}const _V=["top","right","bottom","left"];function Fa(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const o=_V[r];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const bV=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function vV(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:o}=i;let l=!1,u,f;if(bV(r,o,n.target))u=r,f=o;else{const d=t.getBoundingClientRect();u=i.clientX-d.left,f=i.clientY-d.top,l=!0}return{x:u,y:f,box:l}}function ka(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=Jd(e),o=r.boxSizing==="border-box",l=Fa(r,"padding"),u=Fa(r,"border","width"),{x:f,y:d,box:p}=vV(n,e),_=l.left+(p&&u.left),b=l.top+(p&&u.top);let{width:E,height:w}=t;return o&&(E-=l.width+u.width,w-=l.height+u.height),{x:Math.round((f-_)/E*e.width/i),y:Math.round((d-b)/w*e.height/i)}}function xV(n,t,e){let i,r;if(t===void 0||e===void 0){const o=n&&N_(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const l=o.getBoundingClientRect(),u=Jd(o),f=Fa(u,"border","width"),d=Fa(u,"padding");t=l.width-d.width-f.width,e=l.height-d.height-f.height,i=Td(u.maxWidth,o,"clientWidth"),r=Td(u.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||vd,maxHeight:r||vd}}const Mr=n=>Math.round(n*10)/10;function TV(n,t,e,i){const r=Jd(n),o=Fa(r,"margin"),l=Td(r.maxWidth,n,"clientWidth")||vd,u=Td(r.maxHeight,n,"clientHeight")||vd,f=xV(n,t,e);let{width:d,height:p}=f;if(r.boxSizing==="content-box"){const b=Fa(r,"border","width"),E=Fa(r,"padding");d-=E.width+b.width,p-=E.height+b.height}return d=Math.max(0,d-o.width),p=Math.max(0,i?d/i:p-o.height),d=Mr(Math.min(d,l,f.maxWidth)),p=Mr(Math.min(p,u,f.maxHeight)),d&&!p&&(p=Mr(d/2)),(t!==void 0||e!==void 0)&&i&&f.height&&p>f.height&&(p=f.height,d=Mr(Math.floor(p*i))),{width:d,height:p}}function iE(n,t,e){const i=t||1,r=Mr(n.height*i),o=Mr(n.width*i);n.height=Mr(n.height),n.width=Mr(n.width);const l=n.canvas;return l.style&&(e||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||l.height!==r||l.width!==o?(n.currentDevicePixelRatio=i,l.height=r,l.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const EV=(function(){let n=!1;try{const t={get passive(){return n=!0,!1}};M_()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n})();function sE(n,t){const e=yV(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Pa(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function SV(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function AV(n,t,e,i){const r={x:n.cp2x,y:n.cp2y},o={x:t.cp1x,y:t.cp1y},l=Pa(n,r,e),u=Pa(r,o,e),f=Pa(o,t,e),d=Pa(l,u,e),p=Pa(u,f,e);return Pa(d,p,e)}const wV=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},RV=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function sl(n,t,e){return n?wV(t,e):RV()}function r1(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function a1(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function o1(n){return n==="angle"?{between:pu,compare:CP,normalize:dn}:{between:Ds,compare:(t,e)=>t-e,normalize:t=>t}}function rE({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:r}}function CV(n,t,e){const{property:i,start:r,end:o}=e,{between:l,normalize:u}=o1(i),f=t.length;let{start:d,end:p,loop:_}=n,b,E;if(_){for(d+=f,p+=f,b=0,E=f;b<E&&l(u(t[d%f][i]),r,o);++b)d--,p--;d%=f,p%=f}return p<d&&(p+=f),{start:d,end:p,loop:_,style:n.style}}function l1(n,t,e){if(!e)return[n];const{property:i,start:r,end:o}=e,l=t.length,{compare:u,between:f,normalize:d}=o1(i),{start:p,end:_,loop:b,style:E}=CV(n,t,e),w=[];let A=!1,R=null,O,q,j;const B=()=>f(r,j,O)&&u(r,j)!==0,U=()=>u(o,O)===0||f(o,j,O),Y=()=>A||B(),I=()=>!A||U();for(let D=p,N=p;D<=_;++D)q=t[D%l],!q.skip&&(O=d(q[i]),O!==j&&(A=f(O,r,o),R===null&&Y()&&(R=u(O,r)===0?D:N),R!==null&&I()&&(w.push(rE({start:R,end:D,loop:b,count:l,style:E})),R=null),N=D,j=O));return R!==null&&w.push(rE({start:R,end:_,loop:b,count:l,style:E})),w}function c1(n,t){const e=[],i=n.segments;for(let r=0;r<i.length;r++){const o=l1(i[r],n.points,t);o.length&&e.push(...o)}return e}function IV(n,t,e,i){let r=0,o=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(o+=r);o>r&&n[o%t].skip;)o--;return o%=t,{start:r,end:o}}function DV(n,t,e,i){const r=n.length,o=[];let l=t,u=n[t],f;for(f=t+1;f<=e;++f){const d=n[f%r];d.skip||d.stop?u.skip||(i=!1,o.push({start:t%r,end:(f-1)%r,loop:i}),t=l=d.stop?f:null):(l=f,u.skip&&(t=f)),u=d}return l!==null&&o.push({start:t%r,end:l%r,loop:i}),o}function MV(n,t){const e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];const o=!!n._loop,{start:l,end:u}=IV(e,r,o,i);if(i===!0)return aE(n,[{start:l,end:u,loop:o}],e,t);const f=u<l?u+r:u,d=!!n._fullLoop&&l===0&&u===r-1;return aE(n,DV(e,l,f,d),e,t)}function aE(n,t,e,i){return!i||!i.setContext||!e?t:NV(n,t,e,i)}function NV(n,t,e,i){const r=n._chart.getContext(),o=oE(n.options),{_datasetIndex:l,options:{spanGaps:u}}=n,f=e.length,d=[];let p=o,_=t[0].start,b=_;function E(w,A,R,O){const q=u?-1:1;if(w!==A){for(w+=f;e[w%f].skip;)w-=q;for(;e[A%f].skip;)A+=q;w%f!==A%f&&(d.push({start:w%f,end:A%f,loop:R,style:O}),p=O,_=A%f)}}for(const w of t){_=u?_:w.start;let A=e[_%f],R;for(b=_+1;b<=w.end;b++){const O=e[b%f];R=oE(i.setContext(Qr(r,{type:"segment",p0:A,p1:O,p0DataIndex:(b-1)%f,p1DataIndex:b%f,datasetIndex:l}))),OV(R,p)&&E(_,b-1,w.loop,p),A=O,p=R}_<b-1&&E(_,b-1,w.loop,p)}return d}function oE(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function OV(n,t){if(!t)return!1;const e=[],i=function(r,o){return w_(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function Ef(n,t,e){return n.options.clip?n[e]:t[e]}function kV(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Ef(e,t,"left"),right:Ef(e,t,"right"),top:Ef(i,t,"top"),bottom:Ef(i,t,"bottom")}:t}function u1(n,t){const e=t._clip;if(e.disabled)return!1;const i=kV(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class PV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const o=e.listeners[r],l=e.duration;o.forEach(u=>u({chart:t,initial:e.initial,numSteps:l,currentStep:Math.min(i-e.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=Yw.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const o=i.items;let l=o.length-1,u=!1,f;for(;l>=0;--l)f=o[l],f._active?(f._total>i.duration&&(i.duration=f._total),f.tick(t),u=!0):(o[l]=o[o.length-1],o.pop());u&&(r.draw(),this._notify(r,i,t,"progress")),o.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var As=new PV;const lE="transparent",VV={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=JT(n||lE),r=i.valid&&JT(t||lE);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class LV{constructor(t,e,i,r){const o=e[i];r=Bc([t.to,r,o,t.from]);const l=Bc([t.from,o,r]);this._active=!0,this._fn=t.fn||VV[t.type||typeof l],this._easing=tu[t.easing]||tu.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=l,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],o=i-this._start,l=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(l,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Bc([t.to,e,r,t.from]),this._from=Bc([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,o=this._from,l=this._loop,u=this._to;let f;if(this._active=o!==u&&(l||e<i),!this._active){this._target[r]=u,this._notify(!0);return}if(e<0){this._target[r]=o;return}f=e/i%2,f=l&&f>1?2-f:f,f=this._easing(Math.min(1,Math.max(0,f))),this._target[r]=this._fn(o,u,f)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class h1{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ht(t))return;const e=Object.keys(_e.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const o=t[r];if(!Ht(o))return;const l={};for(const u of e)l[u]=o[u];(ye(o.properties)&&o.properties||[r]).forEach(u=>{(u===r||!i.has(u))&&i.set(u,l)})})}_animateOptions(t,e){const i=e.options,r=zV(t,i);if(!r)return[];const o=this._createAnimations(r,i);return i.$shared&&jV(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,r=[],o=t.$animations||(t.$animations={}),l=Object.keys(e),u=Date.now();let f;for(f=l.length-1;f>=0;--f){const d=l[f];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(t,e));continue}const p=e[d];let _=o[d];const b=i.get(d);if(_)if(b&&_.active()){_.update(b,p,u);continue}else _.cancel();if(!b||!b.duration){t[d]=p;continue}o[d]=_=new LV(b,t,d,p),r.push(_)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return As.add(this._chart,i),!0}}function jV(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const o=n[i[r]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function zV(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function cE(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:r,end:i?r:o}}function UV(n,t,e){if(e===!1)return!1;const i=cE(n,e),r=cE(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function BV(n){let t,e,i,r;return Ht(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function f1(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,o;for(r=0,o=i.length;r<o;++r)e.push(i[r].index);return e}function uE(n,t,e,i={}){const r=n.keys,o=i.mode==="single";let l,u,f,d;if(t===null)return;let p=!1;for(l=0,u=r.length;l<u;++l){if(f=+r[l],f===e){if(p=!0,i.all)continue;break}d=n.values[f],Te(d)&&(o||t===0||ns(t)===ns(d))&&(t+=d)}return!p&&!i.all?0:t}function FV(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",l=Object.keys(n),u=new Array(l.length);let f,d,p;for(f=0,d=l.length;f<d;++f)p=l[f],u[f]={[r]:p,[o]:n[p]};return u}function Tp(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function HV(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function qV(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function GV(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function hE(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const o=n[r.index];if(e&&o>0||!e&&o<0)return r.index}return null}function fE(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:o,vScale:l,index:u}=i,f=o.axis,d=l.axis,p=HV(o,l,i),_=t.length;let b;for(let E=0;E<_;++E){const w=t[E],{[f]:A,[d]:R}=w,O=w._stacks||(w._stacks={});b=O[d]=GV(r,p,A),b[u]=R,b._top=hE(b,l,!0,i.type),b._bottom=hE(b,l,!1,i.type);const q=b._visualValues||(b._visualValues={});q[u]=R}}function Ep(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function YV(n,t){return Qr(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function KV(n,t,e){return Qr(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Ic(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const o=r._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const Sp=n=>n==="reset"||n==="none",dE=(n,t)=>t?n:Object.assign({},n),XV=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:f1(e,!0),values:null};class Ti{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Tp(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ic(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(_,b,E,w)=>_==="x"?b:_==="r"?w:E,o=e.xAxisID=Ct(i.xAxisID,Ep(t,"x")),l=e.yAxisID=Ct(i.yAxisID,Ep(t,"y")),u=e.rAxisID=Ct(i.rAxisID,Ep(t,"r")),f=e.indexAxis,d=e.iAxisID=r(f,o,l,u),p=e.vAxisID=r(f,l,o,u);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(l),e.rScale=this.getScaleForId(u),e.iScale=this.getScaleForId(d),e.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&WT(this._data,this),t._stacked&&Ic(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Ht(e)){const r=this._cachedMeta;this._data=FV(e,r)}else if(i!==e){if(i){WT(i,this);const r=this._cachedMeta;Ic(r),r._parsed=[]}e&&Object.isExtensible(e)&&NP(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const o=e._stacked;e._stacked=Tp(e.vScale,e),e.stack!==i.stack&&(r=!0,Ic(e),e.stack=i.stack),this._resyncElements(t),(r||o!==e._stacked)&&(fE(this,e._parsed),e._stacked=Tp(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:o,_stacked:l}=i,u=o.axis;let f=t===0&&e===r.length?!0:i._sorted,d=t>0&&i._parsed[t-1],p,_,b;if(this._parsing===!1)i._parsed=r,i._sorted=!0,b=r;else{ye(r[t])?b=this.parseArrayData(i,r,t,e):Ht(r[t])?b=this.parseObjectData(i,r,t,e):b=this.parsePrimitiveData(i,r,t,e);const E=()=>_[u]===null||d&&_[u]<d[u];for(p=0;p<e;++p)i._parsed[p+t]=_=b[p],f&&(E()&&(f=!1),d=_);i._sorted=f}l&&fE(this,b)}parsePrimitiveData(t,e,i,r){const{iScale:o,vScale:l}=t,u=o.axis,f=l.axis,d=o.getLabels(),p=o===l,_=new Array(r);let b,E,w;for(b=0,E=r;b<E;++b)w=b+i,_[b]={[u]:p||o.parse(d[w],w),[f]:l.parse(e[w],w)};return _}parseArrayData(t,e,i,r){const{xScale:o,yScale:l}=t,u=new Array(r);let f,d,p,_;for(f=0,d=r;f<d;++f)p=f+i,_=e[p],u[f]={x:o.parse(_[0],p),y:l.parse(_[1],p)};return u}parseObjectData(t,e,i,r){const{xScale:o,yScale:l}=t,{xAxisKey:u="x",yAxisKey:f="y"}=this._parsing,d=new Array(r);let p,_,b,E;for(p=0,_=r;p<_;++p)b=p+i,E=e[b],d[p]={x:o.parse(Yr(E,u),b),y:l.parse(Yr(E,f),b)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,o=this._cachedMeta,l=e[t.axis],u={keys:f1(r,!0),values:e._stacks[t.axis]._visualValues};return uE(u,l,o.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const o=i[e.axis];let l=o===null?NaN:o;const u=r&&i._stacks[e.axis];r&&u&&(r.values=u,l=uE(r,o,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,o=i._sorted&&t===i.iScale,l=r.length,u=this._getOtherScale(t),f=XV(e,i,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:_}=qV(u);let b,E;function w(){E=r[b];const A=E[u.axis];return!Te(E[t.axis])||p>A||_<A}for(b=0;b<l&&!(!w()&&(this.updateRangeFromParsed(d,t,E,f),o));++b);if(o){for(b=l-1;b>=0;--b)if(!w()){this.updateRangeFromParsed(d,t,E,f);break}}return d}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,o,l;for(r=0,o=e.length;r<o;++r)l=e[r][t.axis],Te(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=BV(Ct(this.options.clip,UV(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],o=e.chartArea,l=[],u=this._drawStart||0,f=this._drawCount||r.length-u,d=this.options.drawActiveElementsOnTop;let p;for(i.dataset&&i.dataset.draw(t,o,u,f),p=u;p<u+f;++p){const _=r[p];_.hidden||(_.active&&d?l.push(_):_.draw(t,o))}for(p=0;p<l.length;++p)l[p].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];o=l.$context||(l.$context=KV(this.getContext(),t,l)),o.parsed=this.getParsed(t),o.raw=r.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=YV(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",o=this._cachedDataOpts,l=t+"-"+e,u=o[l],f=this.enableOptionSharing&&mu(i);if(u)return dE(u,f);const d=this.chart.config,p=d.datasetElementScopeKeys(this._type,t),_=r?[`${t}Hover`,"hover",t,""]:[t,""],b=d.getOptionScopes(this.getDataset(),p),E=Object.keys(_e.elements[t]),w=()=>this.getContext(i,r,e),A=d.resolveNamedOptions(b,E,w,_);return A.$shared&&(A.$shared=f,o[l]=Object.freeze(dE(A,f))),A}_resolveAnimations(t,e,i){const r=this.chart,o=this._cachedDataOpts,l=`animation-${e}`,u=o[l];if(u)return u;let f;if(r.options.animation!==!1){const p=this.chart.config,_=p.datasetAnimationScopeKeys(this._type,e),b=p.getOptionScopes(this.getDataset(),_);f=p.createResolver(b,this.getContext(t,i,e))}const d=new h1(r,f&&f.animations);return f&&f._cacheable&&(o[l]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Sp(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,o=this.getSharedOptions(i),l=this.includeOptions(e,o)||o!==r;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:l}}updateElement(t,e,i,r){Sp(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!Sp(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const o=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[u,f,d]of this._syncList)this[u](f,d);this._syncList=[];const r=i.length,o=e.length,l=Math.min(o,r);l&&this.parse(0,l),o>r?this._insertElements(r,o-r,t):o<r&&this._removeElements(o,r-o)}_insertElements(t,e,i=!0){const r=this._cachedMeta,o=r.data,l=t+e;let u;const f=d=>{for(d.length+=e,u=d.length-1;u>=l;u--)d[u]=d[u-e]};for(f(o),u=t;u<l;++u)o[u]=new this.dataElementType;this._parsing&&f(r._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&Ic(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ct(Ti,"defaults",{}),ct(Ti,"datasetElementType",null),ct(Ti,"dataElementType",null);function WV(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let r=0,o=e.length;r<o;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=Gw(i.sort((r,o)=>r-o))}return n._cache.$bar}function QV(n){const t=n.iScale,e=WV(t,n.type);let i=t._length,r,o,l,u;const f=()=>{l===32767||l===-32768||(mu(u)&&(i=Math.min(i,Math.abs(l-u)||i)),u=l)};for(r=0,o=e.length;r<o;++r)l=t.getPixelForValue(e[r]),f();for(u=void 0,r=0,o=t.ticks.length;r<o;++r)l=t.getPixelForTick(r),f();return i}function $V(n,t,e,i){const r=e.barThickness;let o,l;return Vt(r)?(o=t.min*e.categoryPercentage,l=e.barPercentage):(o=r*i,l=1),{chunk:o/i,ratio:l,start:t.pixels[n]-o/2}}function JV(n,t,e,i){const r=t.pixels,o=r[n];let l=n>0?r[n-1]:null,u=n<r.length-1?r[n+1]:null;const f=e.categoryPercentage;l===null&&(l=o-(u===null?t.end-t.start:u-o)),u===null&&(u=o+o-l);const d=o-(o-Math.min(l,u))/2*f;return{chunk:Math.abs(u-l)/2*f/i,ratio:e.barPercentage,start:d}}function ZV(n,t,e,i){const r=e.parse(n[0],i),o=e.parse(n[1],i),l=Math.min(r,o),u=Math.max(r,o);let f=l,d=u;Math.abs(l)>Math.abs(u)&&(f=u,d=l),t[e.axis]=d,t._custom={barStart:f,barEnd:d,start:r,end:o,min:l,max:u}}function d1(n,t,e,i){return ye(n)?ZV(n,t,e,i):t[e.axis]=e.parse(n,i),t}function gE(n,t,e,i){const r=n.iScale,o=n.vScale,l=r.getLabels(),u=r===o,f=[];let d,p,_,b;for(d=e,p=e+i;d<p;++d)b=t[d],_={},_[r.axis]=u||r.parse(l[d],d),f.push(d1(b,_,o,d));return f}function Ap(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function t4(n,t,e){return n!==0?ns(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function e4(n){let t,e,i,r,o;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",o="start"):(r="start",o="end"),{start:e,end:i,reverse:t,top:r,bottom:o}}function n4(n,t,e,i){let r=t.borderSkipped;const o={};if(!r){n.borderSkipped=o;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:u,reverse:f,top:d,bottom:p}=e4(n);r==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=d:(e._bottom||0)===i?r=p:(o[mE(p,l,u,f)]=!0,r=d)),o[mE(r,l,u,f)]=!0,n.borderSkipped=o}function mE(n,t,e,i){return i?(n=i4(n,t,e),n=pE(n,e,t)):n=pE(n,t,e),n}function i4(n,t,e){return n===t?e:n===e?t:n}function pE(n,t,e){return n==="start"?t:n==="end"?e:n}function s4(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class Bf extends Ti{parsePrimitiveData(t,e,i,r){return gE(t,e,i,r)}parseArrayData(t,e,i,r){return gE(t,e,i,r)}parseObjectData(t,e,i,r){const{iScale:o,vScale:l}=t,{xAxisKey:u="x",yAxisKey:f="y"}=this._parsing,d=o.axis==="x"?u:f,p=l.axis==="x"?u:f,_=[];let b,E,w,A;for(b=i,E=i+r;b<E;++b)A=e[b],w={},w[o.axis]=o.parse(Yr(A,d),b),_.push(d1(Yr(A,p),w,l,b));return _}updateRangeFromParsed(t,e,i,r){super.updateRangeFromParsed(t,e,i,r);const o=i._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:r}=e,o=this.getParsed(t),l=o._custom,u=Ap(l)?"["+l.start+", "+l.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,r){const o=r==="reset",{index:l,_cachedMeta:{vScale:u}}=this,f=u.getBasePixel(),d=u.isHorizontal(),p=this._getRuler(),{sharedOptions:_,includeOptions:b}=this._getSharedOptions(e,r);for(let E=e;E<e+i;E++){const w=this.getParsed(E),A=o||Vt(w[u.axis])?{base:f,head:f}:this._calculateBarValuePixels(E),R=this._calculateBarIndexPixels(E,p),O=(w._stacks||{})[u.axis],q={horizontal:d,base:A.base,enableBorderRadius:!O||Ap(w._custom)||l===O._top||l===O._bottom,x:d?A.head:R.center,y:d?R.center:A.head,height:d?R.size:Math.abs(A.size),width:d?Math.abs(A.size):R.size};b&&(q.options=_||this.resolveDataElementOptions(E,t[E].active?"active":r));const j=q.options||t[E].options;n4(q,j,O,l),s4(q,j,p.ratio),this.updateElement(t[E],E,q,r)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),o=i.options.stacked,l=[],u=this._cachedMeta.controller.getParsed(e),f=u&&u[i.axis],d=p=>{const _=p._parsed.find(E=>E[i.axis]===f),b=_&&_[p.vScale.axis];if(Vt(b)||isNaN(b))return!0};for(const p of r)if(!(e!==void 0&&d(p))&&((o===!1||l.indexOf(p.stack)===-1||o===void 0&&p.stack===void 0)&&l.push(p.stack),p.index===t))break;return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[Ct(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){const r=this._getStacks(t,i),o=e!==void 0?r.indexOf(e):-1;return o===-1?r.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,r=[];let o,l;for(o=0,l=e.data.length;o<l;++o)r.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const u=t.barThickness;return{min:u||QV(e),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:u?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:r},options:{base:o,minBarLength:l}}=this,u=o||0,f=this.getParsed(t),d=f._custom,p=Ap(d);let _=f[e.axis],b=0,E=i?this.applyStack(e,f,i):_,w,A;E!==_&&(b=E-_,E=_),p&&(_=d.barStart,E=d.barEnd-d.barStart,_!==0&&ns(_)!==ns(d.barEnd)&&(b=0),b+=_);const R=!Vt(o)&&!p?o:b;let O=e.getPixelForValue(R);if(this.chart.getDataVisibility(t)?w=e.getPixelForValue(b+E):w=O,A=w-O,Math.abs(A)<l){A=t4(A,e,u)*l,_===u&&(O-=A/2);const q=e.getPixelForDecimal(0),j=e.getPixelForDecimal(1),B=Math.min(q,j),U=Math.max(q,j);O=Math.max(Math.min(O,U),B),w=O+A,i&&!p&&(f._stacks[e.axis]._visualValues[r]=e.getValueForPixel(w)-e.getValueForPixel(O))}if(O===e.getPixelForValue(u)){const q=ns(A)*e.getLineWidthForValue(u)/2;O+=q,A-=q}return{size:A,base:O,head:w,center:w+A/2}}_calculateBarIndexPixels(t,e){const i=e.scale,r=this.options,o=r.skipNull,l=Ct(r.maxBarThickness,1/0);let u,f;const d=this._getAxisCount();if(e.grouped){const p=o?this._getStackCount(t):e.stackCount,_=r.barThickness==="flex"?JV(t,e,r,p*d):$V(t,e,r,p*d),b=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,E=this._getAxis().indexOf(Ct(b,this.getFirstScaleIdForIndexAxis())),w=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+E;u=_.start+_.chunk*w+_.chunk/2,f=Math.min(l,_.chunk*_.ratio)}else u=i.getPixelForValue(this.getParsed(t)[i.axis],t),f=Math.min(l,e.min*e.ratio);return{base:u-f/2,head:u+f/2,center:u,size:f}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,r=i.length;let o=0;for(;o<r;++o)this.getParsed(o)[e.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}ct(Bf,"id","bar"),ct(Bf,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ct(Bf,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Ff extends Ti{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,r){const o=super.parsePrimitiveData(t,e,i,r);for(let l=0;l<o.length;l++)o[l]._custom=this.resolveDataElementOptions(l+i).radius;return o}parseArrayData(t,e,i,r){const o=super.parseArrayData(t,e,i,r);for(let l=0;l<o.length;l++){const u=e[i+l];o[l]._custom=Ct(u[2],this.resolveDataElementOptions(l+i).radius)}return o}parseObjectData(t,e,i,r){const o=super.parseObjectData(t,e,i,r);for(let l=0;l<o.length;l++){const u=e[i+l];o[l]._custom=Ct(u&&u.r&&+u.r,this.resolveDataElementOptions(l+i).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:o}=e,l=this.getParsed(t),u=r.getLabelForValue(l.x),f=o.getLabelForValue(l.y),d=l._custom;return{label:i[t]||"",value:"("+u+", "+f+(d?", "+d:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,r){const o=r==="reset",{iScale:l,vScale:u}=this._cachedMeta,{sharedOptions:f,includeOptions:d}=this._getSharedOptions(e,r),p=l.axis,_=u.axis;for(let b=e;b<e+i;b++){const E=t[b],w=!o&&this.getParsed(b),A={},R=A[p]=o?l.getPixelForDecimal(.5):l.getPixelForValue(w[p]),O=A[_]=o?u.getBasePixel():u.getPixelForValue(w[_]);A.skip=isNaN(R)||isNaN(O),d&&(A.options=f||this.resolveDataElementOptions(b,E.active?"active":r),o&&(A.options.radius=0)),this.updateElement(E,b,A,r)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const o=r.radius;return e!=="active"&&(r.radius=0),r.radius+=Ct(i&&i._custom,o),r}}ct(Ff,"id","bubble"),ct(Ff,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),ct(Ff,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function r4(n,t,e){let i=1,r=1,o=0,l=0;if(t<de){const u=n,f=u+t,d=Math.cos(u),p=Math.sin(u),_=Math.cos(f),b=Math.sin(f),E=(j,B,U)=>pu(j,u,f,!0)?1:Math.max(B,B*e,U,U*e),w=(j,B,U)=>pu(j,u,f,!0)?-1:Math.min(B,B*e,U,U*e),A=E(0,d,_),R=E(Ie,p,b),O=w(Wt,d,_),q=w(Wt+Ie,p,b);i=(A-O)/2,r=(R-q)/2,o=-(A+O)/2,l=-(R+q)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:l}}class La extends Ti{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let o=f=>+i[f];if(Ht(i[t])){const{key:f="value"}=this._parsing;o=d=>+Yr(i[d],f)}let l,u;for(l=t,u=t+e;l<u;++l)r._parsed[l]=o(l)}}_getRotation(){return xi(this.options.rotation-90)}_getCircumference(){return xi(this.options.circumference)}_getRotationExtents(){let t=de,e=-de;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,o=r._getRotation(),l=r._getCircumference();t=Math.min(t,o),e=Math.max(e,o+l)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,r=this._cachedMeta,o=r.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(i.width,i.height)-l)/2,0),f=Math.min(yP(this.options.cutout,u),1),d=this._getRingWeight(this.index),{circumference:p,rotation:_}=this._getRotationExtents(),{ratioX:b,ratioY:E,offsetX:w,offsetY:A}=r4(_,p,f),R=(i.width-l)/b,O=(i.height-l)/E,q=Math.max(Math.min(R,O)/2,0),j=Uw(this.options.radius,q),B=Math.max(j*f,0),U=(j-B)/this._getVisibleDatasetWeightTotal();this.offsetX=w*j,this.offsetY=A*j,r.total=this.calculateTotal(),this.outerRadius=j-U*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-U*d,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const i=this.options,r=this._cachedMeta,o=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*o/de)}updateElements(t,e,i,r){const o=r==="reset",l=this.chart,u=l.chartArea,d=l.options.animation,p=(u.left+u.right)/2,_=(u.top+u.bottom)/2,b=o&&d.animateScale,E=b?0:this.innerRadius,w=b?0:this.outerRadius,{sharedOptions:A,includeOptions:R}=this._getSharedOptions(e,r);let O=this._getRotation(),q;for(q=0;q<e;++q)O+=this._circumference(q,o);for(q=e;q<e+i;++q){const j=this._circumference(q,o),B=t[q],U={x:p+this.offsetX,y:_+this.offsetY,startAngle:O,endAngle:O+j,circumference:j,outerRadius:w,innerRadius:E};R&&(U.options=A||this.resolveDataElementOptions(q,B.active?"active":r)),O+=j,this.updateElement(B,q,U,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,r;for(r=0;r<e.length;r++){const o=t._parsed[r];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!e[r].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?de*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],o=Pu(e._parsed[t],i.options.locale);return{label:r[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const i=this.chart;let r,o,l,u,f;if(!t){for(r=0,o=i.data.datasets.length;r<o;++r)if(i.isDatasetVisible(r)){l=i.getDatasetMeta(r),t=l.data,u=l.controller;break}}if(!t)return 0;for(r=0,o=t.length;r<o;++r)f=u.resolveDataElementOptions(r),f.borderAlign!=="inner"&&(e=Math.max(e,f.borderWidth||0,f.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,r=t.length;i<r;++i){const o=this.resolveDataElementOptions(i);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(Ct(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ct(La,"id","doughnut"),ct(La,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ct(La,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),ct(La,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:i,textAlign:r,color:o,useBorderRadius:l,borderRadius:u}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((f,d)=>{const _=t.getDatasetMeta(0).controller.getStyle(d);return{text:f,fillStyle:_.backgroundColor,fontColor:o,hidden:!t.getDataVisibility(d),lineDash:_.borderDash,lineDashOffset:_.borderDashOffset,lineJoin:_.borderJoinStyle,lineWidth:_.borderWidth,strokeStyle:_.borderColor,textAlign:r,pointStyle:i,borderRadius:l&&(u||_.borderRadius),index:d}}):[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class Hf extends Ti{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:r=[],_dataset:o}=e,l=this.chart._animationsDisabled;let{start:u,count:f}=Xw(e,r,l);this._drawStart=u,this._drawCount=f,Ww(e)&&(u=0,f=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=r;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:d},t),this.updateElements(r,u,f,t)}updateElements(t,e,i,r){const o=r==="reset",{iScale:l,vScale:u,_stacked:f,_dataset:d}=this._cachedMeta,{sharedOptions:p,includeOptions:_}=this._getSharedOptions(e,r),b=l.axis,E=u.axis,{spanGaps:w,segment:A}=this.options,R=dl(w)?w:Number.POSITIVE_INFINITY,O=this.chart._animationsDisabled||o||r==="none",q=e+i,j=t.length;let B=e>0&&this.getParsed(e-1);for(let U=0;U<j;++U){const Y=t[U],I=O?Y:{};if(U<e||U>=q){I.skip=!0;continue}const D=this.getParsed(U),N=Vt(D[E]),V=I[b]=l.getPixelForValue(D[b],U),k=I[E]=o||N?u.getBasePixel():u.getPixelForValue(f?this.applyStack(u,D,f):D[E],U);I.skip=isNaN(V)||isNaN(k)||N,I.stop=U>0&&Math.abs(D[b]-B[b])>R,A&&(I.parsed=D,I.raw=d.data[U]),_&&(I.options=p||this.resolveDataElementOptions(U,Y.active?"active":r)),O||this.updateElement(Y,U,I,r),B=D}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const o=r[0].size(this.resolveDataElementOptions(0)),l=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,o,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}ct(Hf,"id","line"),ct(Hf,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ct(Hf,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class nu extends Ti{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],o=Pu(e._parsed[t].r,i.options.locale);return{label:r[t]||"",value:o}}parseObjectData(t,e,i,r){return i1.bind(this)(t,e,i,r)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,r)=>{const o=this.getParsed(r).r;!isNaN(o)&&this.chart.getDataVisibility(r)&&(o<e.min&&(e.min=o),o>e.max&&(e.max=o))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),o=Math.max(r/2,0),l=Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0),u=(o-l)/t.getVisibleDatasetCount();this.outerRadius=o-u*this.index,this.innerRadius=this.outerRadius-u}updateElements(t,e,i,r){const o=r==="reset",l=this.chart,f=l.options.animation,d=this._cachedMeta.rScale,p=d.xCenter,_=d.yCenter,b=d.getIndexAngle(0)-.5*Wt;let E=b,w;const A=360/this.countVisibleElements();for(w=0;w<e;++w)E+=this._computeAngle(w,r,A);for(w=e;w<e+i;w++){const R=t[w];let O=E,q=E+this._computeAngle(w,r,A),j=l.getDataVisibility(w)?d.getDistanceFromCenterForValue(this.getParsed(w).r):0;E=q,o&&(f.animateScale&&(j=0),f.animateRotate&&(O=q=b));const B={x:p,y:_,innerRadius:0,outerRadius:j,startAngle:O,endAngle:q,options:this.resolveDataElementOptions(w,R.active?"active":r)};this.updateElement(R,w,B,r)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?xi(this.resolveDataElementOptions(t,e).angle||i):0}}ct(nu,"id","polarArea"),ct(nu,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),ct(nu,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map((o,l)=>{const f=t.getDatasetMeta(0).controller.getStyle(l);return{text:o,fillStyle:f.backgroundColor,strokeStyle:f.borderColor,fontColor:r,lineWidth:f.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(l),index:l}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class uy extends La{}ct(uy,"id","pie"),ct(uy,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class qf extends Ti{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,r){return i1.bind(this)(t,e,i,r)}update(t){const e=this._cachedMeta,i=e.dataset,r=e.data||[],o=e.iScale.getLabels();if(i.points=r,t!=="resize"){const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0);const u={_loop:!0,_fullLoop:o.length===r.length,options:l};this.updateElement(i,void 0,u,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,i,r){const o=this._cachedMeta.rScale,l=r==="reset";for(let u=e;u<e+i;u++){const f=t[u],d=this.resolveDataElementOptions(u,f.active?"active":r),p=o.getPointPositionForValue(u,this.getParsed(u).r),_=l?o.xCenter:p.x,b=l?o.yCenter:p.y,E={x:_,y:b,angle:p.angle,skip:isNaN(_)||isNaN(b),options:d};this.updateElement(f,u,E,r)}}}ct(qf,"id","radar"),ct(qf,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ct(qf,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Gf extends Ti{getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:o}=e,l=this.getParsed(t),u=r.getLabelForValue(l.x),f=o.getLabelForValue(l.y);return{label:i[t]||"",value:"("+u+", "+f+")"}}update(t){const e=this._cachedMeta,{data:i=[]}=e,r=this.chart._animationsDisabled;let{start:o,count:l}=Xw(e,i,r);if(this._drawStart=o,this._drawCount=l,Ww(e)&&(o=0,l=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:u,_dataset:f}=e;u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!f._decimated,u.points=i;const d=this.resolveDatasetElementOptions(t);d.segment=this.options.segment,this.updateElement(u,void 0,{animated:!r,options:d},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,o,l,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,r){const o=r==="reset",{iScale:l,vScale:u,_stacked:f,_dataset:d}=this._cachedMeta,p=this.resolveDataElementOptions(e,r),_=this.getSharedOptions(p),b=this.includeOptions(r,_),E=l.axis,w=u.axis,{spanGaps:A,segment:R}=this.options,O=dl(A)?A:Number.POSITIVE_INFINITY,q=this.chart._animationsDisabled||o||r==="none";let j=e>0&&this.getParsed(e-1);for(let B=e;B<e+i;++B){const U=t[B],Y=this.getParsed(B),I=q?U:{},D=Vt(Y[w]),N=I[E]=l.getPixelForValue(Y[E],B),V=I[w]=o||D?u.getBasePixel():u.getPixelForValue(f?this.applyStack(u,Y,f):Y[w],B);I.skip=isNaN(N)||isNaN(V)||D,I.stop=B>0&&Math.abs(Y[E]-j[E])>O,R&&(I.parsed=Y,I.raw=d.data[B]),b&&(I.options=_||this.resolveDataElementOptions(B,U.active?"active":r)),q||this.updateElement(U,B,I,r),j=Y}this.updateSharedOptions(_,r,p)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let u=0;for(let f=e.length-1;f>=0;--f)u=Math.max(u,e[f].size(this.resolveDataElementOptions(f))/2);return u>0&&u}const i=t.dataset,r=i.options&&i.options.borderWidth||0;if(!e.length)return r;const o=e[0].size(this.resolveDataElementOptions(0)),l=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,o,l)/2}}ct(Gf,"id","scatter"),ct(Gf,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ct(Gf,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var a4=Object.freeze({__proto__:null,BarController:Bf,BubbleController:Ff,DoughnutController:La,LineController:Hf,PieController:uy,PolarAreaController:nu,RadarController:qf,ScatterController:Gf});function Da(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class O_{constructor(t){ct(this,"options");this.options=t||{}}static override(t){Object.assign(O_.prototype,t)}init(){}formats(){return Da()}parse(){return Da()}format(){return Da()}add(){return Da()}diff(){return Da()}startOf(){return Da()}endOf(){return Da()}}var o4={_date:O_};function l4(n,t,e,i){const{controller:r,data:o,_sorted:l}=n,u=r._cachedMeta.iScale,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(u&&t===u.axis&&t!=="r"&&l&&o.length){const d=u._reversePixels?DP:Ms;if(i){if(r._sharedOptions){const p=o[0],_=typeof p.getRange=="function"&&p.getRange(t);if(_){const b=d(o,t,e-_),E=d(o,t,e+_);return{lo:b.lo,hi:E.hi}}}}else{const p=d(o,t,e);if(f){const{vScale:_}=r._cachedMeta,{_parsed:b}=n,E=b.slice(0,p.lo+1).reverse().findIndex(A=>!Vt(A[_.axis]));p.lo-=Math.max(0,E);const w=b.slice(p.hi).findIndex(A=>!Vt(A[_.axis]));p.hi+=Math.max(0,w)}return p}}return{lo:0,hi:o.length-1}}function Zd(n,t,e,i,r){const o=n.getSortedVisibleDatasetMetas(),l=e[t];for(let u=0,f=o.length;u<f;++u){const{index:d,data:p}=o[u],{lo:_,hi:b}=l4(o[u],t,l,r);for(let E=_;E<=b;++E){const w=p[E];w.skip||i(w,d,E)}}}function c4(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const o=t?Math.abs(i.x-r.x):0,l=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function wp(n,t,e,i,r){const o=[];return!r&&!n.isPointInArea(t)||Zd(n,e,t,function(u,f,d){!r&&!Ns(u,n.chartArea,0)||u.inRange(t.x,t.y,i)&&o.push({element:u,datasetIndex:f,index:d})},!0),o}function u4(n,t,e,i){let r=[];function o(l,u,f){const{startAngle:d,endAngle:p}=l.getProps(["startAngle","endAngle"],i),{angle:_}=Hw(l,{x:t.x,y:t.y});pu(_,d,p)&&r.push({element:l,datasetIndex:u,index:f})}return Zd(n,e,t,o),r}function h4(n,t,e,i,r,o){let l=[];const u=c4(e);let f=Number.POSITIVE_INFINITY;function d(p,_,b){const E=p.inRange(t.x,t.y,r);if(i&&!E)return;const w=p.getCenterPoint(r);if(!(!!o||n.isPointInArea(w))&&!E)return;const R=u(t,w);R<f?(l=[{element:p,datasetIndex:_,index:b}],f=R):R===f&&l.push({element:p,datasetIndex:_,index:b})}return Zd(n,e,t,d),l}function Rp(n,t,e,i,r,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?u4(n,t,e,r):h4(n,t,e,i,r,o)}function yE(n,t,e,i,r){const o=[],l=e==="x"?"inXRange":"inYRange";let u=!1;return Zd(n,e,t,(f,d,p)=>{f[l]&&f[l](t[e],r)&&(o.push({element:f,datasetIndex:d,index:p}),u=u||f.inRange(t.x,t.y,r))}),i&&!u?[]:o}var f4={modes:{index(n,t,e,i){const r=ka(t,n),o=e.axis||"x",l=e.includeInvisible||!1,u=e.intersect?wp(n,r,o,i,l):Rp(n,r,o,!1,i,l),f=[];return u.length?(n.getSortedVisibleDatasetMetas().forEach(d=>{const p=u[0].index,_=d.data[p];_&&!_.skip&&f.push({element:_,datasetIndex:d.index,index:p})}),f):[]},dataset(n,t,e,i){const r=ka(t,n),o=e.axis||"xy",l=e.includeInvisible||!1;let u=e.intersect?wp(n,r,o,i,l):Rp(n,r,o,!1,i,l);if(u.length>0){const f=u[0].datasetIndex,d=n.getDatasetMeta(f).data;u=[];for(let p=0;p<d.length;++p)u.push({element:d[p],datasetIndex:f,index:p})}return u},point(n,t,e,i){const r=ka(t,n),o=e.axis||"xy",l=e.includeInvisible||!1;return wp(n,r,o,i,l)},nearest(n,t,e,i){const r=ka(t,n),o=e.axis||"xy",l=e.includeInvisible||!1;return Rp(n,r,o,e.intersect,i,l)},x(n,t,e,i){const r=ka(t,n);return yE(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=ka(t,n);return yE(n,r,"y",e.intersect,i)}}};const g1=["left","top","right","bottom"];function Dc(n,t){return n.filter(e=>e.pos===t)}function _E(n,t){return n.filter(e=>g1.indexOf(e.pos)===-1&&e.box.axis===t)}function Mc(n,t){return n.sort((e,i)=>{const r=t?i:e,o=t?e:i;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function d4(n){const t=[];let e,i,r,o,l,u;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:o,options:{stack:l,stackWeight:u=1}}=r,t.push({index:e,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:l&&o+l,stackWeight:u});return t}function g4(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:o}=e;if(!i||!g1.includes(r))continue;const l=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return t}function m4(n,t){const e=g4(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let o,l,u;for(o=0,l=n.length;o<l;++o){u=n[o];const{fullSize:f}=u.box,d=e[u.stack],p=d&&u.stackWeight/d.weight;u.horizontal?(u.width=p?p*i:f&&t.availableWidth,u.height=r):(u.width=i,u.height=p?p*r:f&&t.availableHeight)}return e}function p4(n){const t=d4(n),e=Mc(t.filter(d=>d.box.fullSize),!0),i=Mc(Dc(t,"left"),!0),r=Mc(Dc(t,"right")),o=Mc(Dc(t,"top"),!0),l=Mc(Dc(t,"bottom")),u=_E(t,"x"),f=_E(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:r.concat(f).concat(l).concat(u),chartArea:Dc(t,"chartArea"),vertical:i.concat(r).concat(f),horizontal:o.concat(l).concat(u)}}function bE(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function m1(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function y4(n,t,e,i){const{pos:r,box:o}=e,l=n.maxPadding;if(!Ht(r)){e.size&&(n[r]-=e.size);const _=i[e.stack]||{size:0,count:1};_.size=Math.max(_.size,e.horizontal?o.height:o.width),e.size=_.size/_.count,n[r]+=e.size}o.getPadding&&m1(l,o.getPadding());const u=Math.max(0,t.outerWidth-bE(l,n,"left","right")),f=Math.max(0,t.outerHeight-bE(l,n,"top","bottom")),d=u!==n.w,p=f!==n.h;return n.w=u,n.h=f,e.horizontal?{same:d,other:p}:{same:p,other:d}}function _4(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function b4(n,t){const e=t.maxPadding;function i(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(l=>{o[l]=Math.max(t[l],e[l])}),o}return i(n?["left","right"]:["top","bottom"])}function Fc(n,t,e,i){const r=[];let o,l,u,f,d,p;for(o=0,l=n.length,d=0;o<l;++o){u=n[o],f=u.box,f.update(u.width||t.w,u.height||t.h,b4(u.horizontal,t));const{same:_,other:b}=y4(t,e,u,i);d|=_&&r.length,p=p||b,f.fullSize||r.push(u)}return d&&Fc(r,t,e,i)||p}function Sf(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function vE(n,t,e,i){const r=e.padding;let{x:o,y:l}=t;for(const u of n){const f=u.box,d=i[u.stack]||{placed:0,weight:1},p=u.stackWeight/d.weight||1;if(u.horizontal){const _=t.w*p,b=d.size||f.height;mu(d.start)&&(l=d.start),f.fullSize?Sf(f,r.left,l,e.outerWidth-r.right-r.left,b):Sf(f,t.left+d.placed,l,_,b),d.start=l,d.placed+=_,l=f.bottom}else{const _=t.h*p,b=d.size||f.width;mu(d.start)&&(o=d.start),f.fullSize?Sf(f,o,r.top,b,e.outerHeight-r.bottom-r.top):Sf(f,o,t.top+d.placed,b,_),d.start=o,d.placed+=_,o=f.right}}t.x=o,t.y=l}var mn={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=yn(n.options.layout.padding),o=Math.max(t-r.width,0),l=Math.max(e-r.height,0),u=p4(n.boxes),f=u.vertical,d=u.horizontal;ie(n.boxes,A=>{typeof A.beforeLayout=="function"&&A.beforeLayout()});const p=f.reduce((A,R)=>R.box.options&&R.box.options.display===!1?A:A+1,0)||1,_=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/p,hBoxMaxHeight:l/2}),b=Object.assign({},r);m1(b,yn(i));const E=Object.assign({maxPadding:b,w:o,h:l,x:r.left,y:r.top},r),w=m4(f.concat(d),_);Fc(u.fullSize,E,_,w),Fc(f,E,_,w),Fc(d,E,_,w)&&Fc(f,E,_,w),_4(E),vE(u.leftAndTop,E,_,w),E.x+=E.w,E.y+=E.h,vE(u.rightAndBottom,E,_,w),n.chartArea={left:E.left,top:E.top,right:E.left+E.w,bottom:E.top+E.h,height:E.h,width:E.w},ie(u.chartArea,A=>{const R=A.box;Object.assign(R,n.chartArea),R.update(E.w,E.h,{left:0,top:0,right:0,bottom:0})})}};class p1{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class v4 extends p1{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Yf="$chartjs",x4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},xE=n=>n===null||n==="";function T4(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[Yf]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",xE(r)){const o=sE(n,"width");o!==void 0&&(n.width=o)}if(xE(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=sE(n,"height");o!==void 0&&(n.height=o)}return n}const y1=EV?{passive:!0}:!1;function E4(n,t,e){n&&n.addEventListener(t,e,y1)}function S4(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,y1)}function A4(n,t){const e=x4[n.type]||n.type,{x:i,y:r}=ka(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Ed(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function w4(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||Ed(u.addedNodes,i),l=l&&!Ed(u.removedNodes,i);l&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function R4(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||Ed(u.removedNodes,i),l=l&&!Ed(u.addedNodes,i);l&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const _u=new Map;let TE=0;function _1(){const n=window.devicePixelRatio;n!==TE&&(TE=n,_u.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function C4(n,t){_u.size||window.addEventListener("resize",_1),_u.set(n,t)}function I4(n){_u.delete(n),_u.size||window.removeEventListener("resize",_1)}function D4(n,t,e){const i=n.canvas,r=i&&N_(i);if(!r)return;const o=Kw((u,f)=>{const d=r.clientWidth;e(u,f),d<r.clientWidth&&e()},window),l=new ResizeObserver(u=>{const f=u[0],d=f.contentRect.width,p=f.contentRect.height;d===0&&p===0||o(d,p)});return l.observe(r),C4(n,o),l}function Cp(n,t,e){e&&e.disconnect(),t==="resize"&&I4(n)}function M4(n,t,e){const i=n.canvas,r=Kw(o=>{n.ctx!==null&&e(A4(o,n))},n);return E4(i,t,r),r}class N4 extends p1{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(T4(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Yf])return!1;const i=e[Yf].initial;["height","width"].forEach(o=>{const l=i[o];Vt(l)?e.removeAttribute(o):e.setAttribute(o,l)});const r=i.style||{};return Object.keys(r).forEach(o=>{e.style[o]=r[o]}),e.width=e.width,delete e[Yf],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),l={attach:w4,detach:R4,resize:D4}[e]||M4;r[e]=l(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:Cp,detach:Cp,resize:Cp}[e]||S4)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return TV(t,e,i,r)}isAttached(t){const e=t&&N_(t);return!!(e&&e.isConnected)}}function O4(n){return!M_()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?v4:N4}class Si{constructor(){ct(this,"x");ct(this,"y");ct(this,"active",!1);ct(this,"options");ct(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return dl(this.x)&&dl(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(o=>{r[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),r}}ct(Si,"defaults",{}),ct(Si,"defaultRoutes");function k4(n,t){const e=n.options.ticks,i=P4(n),r=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?L4(t):[],l=o.length,u=o[0],f=o[l-1],d=[];if(l>r)return j4(t,d,o,l/r),d;const p=V4(o,t,r);if(l>0){let _,b;const E=l>1?Math.round((f-u)/(l-1)):null;for(Af(t,d,p,Vt(E)?0:u-E,u),_=0,b=l-1;_<b;_++)Af(t,d,p,o[_],o[_+1]);return Af(t,d,p,f,Vt(E)?t.length:f+E),d}return Af(t,d,p),d}function P4(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function V4(n,t,e){const i=z4(n),r=t.length/e;if(!i)return Math.max(r,1);const o=AP(i);for(let l=0,u=o.length-1;l<u;l++){const f=o[l];if(f>r)return f}return Math.max(r,1)}function L4(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function j4(n,t,e,i){let r=0,o=e[0],l;for(i=Math.ceil(i),l=0;l<n.length;l++)l===o&&(t.push(n[l]),r++,o=e[r*i])}function Af(n,t,e,i,r){const o=Ct(i,0),l=Math.min(Ct(r,n.length),n.length);let u=0,f,d,p;for(e=Math.ceil(e),r&&(f=r-i,e=f/Math.floor(f/e)),p=o;p<0;)u++,p=Math.round(o+u*e);for(d=Math.max(o,0);d<l;d++)d===p&&(t.push(n[d]),u++,p=Math.round(o+u*e))}function z4(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const U4=n=>n==="left"?"right":n==="right"?"left":n,EE=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,SE=(n,t)=>Math.min(t||n,n);function AE(n,t){const e=[],i=n.length/t,r=n.length;let o=0;for(;o<r;o+=i)e.push(n[Math.floor(o)]);return e}function B4(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),o=n._startPixel,l=n._endPixel,u=1e-6;let f=n.getPixelForTick(r),d;if(!(e&&(i===1?d=Math.max(f-o,l-f):t===0?d=(n.getPixelForTick(1)-f)/2:d=(f-n.getPixelForTick(r-1))/2,f+=r<t?d:-d,f<o-u||f>l+u)))return f}function F4(n,t){ie(n,e=>{const i=e.gc,r=i.length/2;let o;if(r>t){for(o=0;o<r;++o)delete e.data[i[o]];i.splice(0,r)}})}function Nc(n){return n.drawTicks?n.tickLength:0}function wE(n,t){if(!n.display)return 0;const e=Ge(n.font,t),i=yn(n.padding);return(ye(n.text)?n.text.length:1)*e.lineHeight+i.height}function H4(n,t){return Qr(n,{scale:t,type:"scale"})}function q4(n,t,e){return Qr(n,{tick:e,index:t,type:"tick"})}function G4(n,t,e){let i=A_(n);return(e&&t!=="right"||!e&&t==="right")&&(i=U4(i)),i}function Y4(n,t,e,i){const{top:r,left:o,bottom:l,right:u,chart:f}=n,{chartArea:d,scales:p}=f;let _=0,b,E,w;const A=l-r,R=u-o;if(n.isHorizontal()){if(E=hn(i,o,u),Ht(e)){const O=Object.keys(e)[0],q=e[O];w=p[O].getPixelForValue(q)+A-t}else e==="center"?w=(d.bottom+d.top)/2+A-t:w=EE(n,e,t);b=u-o}else{if(Ht(e)){const O=Object.keys(e)[0],q=e[O];E=p[O].getPixelForValue(q)-R+t}else e==="center"?E=(d.left+d.right)/2-R+t:E=EE(n,e,t);w=hn(i,l,r),_=e==="left"?-Ie:Ie}return{titleX:E,titleY:w,maxWidth:b,rotation:_}}class eo extends Si{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=Hn(t,Number.POSITIVE_INFINITY),e=Hn(e,Number.NEGATIVE_INFINITY),i=Hn(i,Number.POSITIVE_INFINITY),r=Hn(r,Number.NEGATIVE_INFINITY),{min:Hn(t,i),max:Hn(e,r),minDefined:Te(t),maxDefined:Te(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:o}=this.getUserBounds(),l;if(r&&o)return{min:e,max:i};const u=this.getMatchingVisibleMetas();for(let f=0,d=u.length;f<d;++f)l=u[f].controller.getMinMax(this,t),r||(e=Math.min(e,l.min)),o||(i=Math.max(i,l.max));return e=o&&e>i?i:e,i=r&&e>i?e:i,{min:Hn(e,Hn(i,e)),max:Hn(i,Hn(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ce(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:o,ticks:l}=this.options,u=l.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=tV(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const f=u<this.ticks.length;this._convertTicksToLabels(f?AE(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=k4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),f&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ce(this.options.afterUpdate,[this])}beforeSetDimensions(){ce(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ce(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ce(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ce(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i],o.label=ce(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){ce(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ce(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=SE(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,o=e.maxRotation;let l=r,u,f,d;if(!this._isVisible()||!e.display||r>=o||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const p=this._getLabelSizes(),_=p.widest.width,b=p.highest.height,E=Je(this.chart.width-_,0,this.maxWidth);u=t.offset?this.maxWidth/i:E/(i-1),_+6>u&&(u=E/(i-(t.offset?.5:1)),f=this.maxHeight-Nc(t.grid)-e.padding-wE(t.title,this.chart.options.font),d=Math.sqrt(_*_+b*b),l=E_(Math.min(Math.asin(Je((p.highest.height+6)/u,-1,1)),Math.asin(Je(f/d,-1,1))-Math.asin(Je(b/d,-1,1)))),l=Math.max(r,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){ce(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ce(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:o}}=this,l=this._isVisible(),u=this.isHorizontal();if(l){const f=wE(r,e.options.font);if(u?(t.width=this.maxWidth,t.height=Nc(o)+f):(t.height=this.maxHeight,t.width=Nc(o)+f),i.display&&this.ticks.length){const{first:d,last:p,widest:_,highest:b}=this._getLabelSizes(),E=i.padding*2,w=xi(this.labelRotation),A=Math.cos(w),R=Math.sin(w);if(u){const O=i.mirror?0:R*_.width+A*b.height;t.height=Math.min(this.maxHeight,t.height+O+E)}else{const O=i.mirror?0:A*_.width+R*b.height;t.width=Math.min(this.maxWidth,t.width+O+E)}this._calculatePadding(d,p,R,A)}}this._handleMargins(),u?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:o,padding:l},position:u}=this.options,f=this.labelRotation!==0,d=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,_=this.right-this.getPixelForTick(this.ticks.length-1);let b=0,E=0;f?d?(b=r*t.width,E=i*e.height):(b=i*t.height,E=r*e.width):o==="start"?E=e.width:o==="end"?b=t.width:o!=="inner"&&(b=t.width/2,E=e.width/2),this.paddingLeft=Math.max((b-p+l)*this.width/(this.width-p),0),this.paddingRight=Math.max((E-_+l)*this.width/(this.width-_),0)}else{let p=e.height/2,_=t.height/2;o==="start"?(p=0,_=t.height):o==="end"&&(p=e.height,_=0),this.paddingTop=p+l,this.paddingBottom=_+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ce(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Vt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=AE(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:o}=this,l=[],u=[],f=Math.floor(e/SE(e,i));let d=0,p=0,_,b,E,w,A,R,O,q,j,B,U;for(_=0;_<e;_+=f){if(w=t[_].label,A=this._resolveTickFontOptions(_),r.font=R=A.string,O=o[R]=o[R]||{data:{},gc:[]},q=A.lineHeight,j=B=0,!Vt(w)&&!ye(w))j=xd(r,O.data,O.gc,j,w),B=q;else if(ye(w))for(b=0,E=w.length;b<E;++b)U=w[b],!Vt(U)&&!ye(U)&&(j=xd(r,O.data,O.gc,j,U),B+=q);l.push(j),u.push(B),d=Math.max(j,d),p=Math.max(B,p)}F4(o,e);const Y=l.indexOf(d),I=u.indexOf(p),D=N=>({width:l[N]||0,height:u[N]||0});return{first:D(0),last:D(e-1),widest:D(Y),highest:D(I),widths:l,heights:u}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return IP(this._alignToPixels?Ia(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=q4(this.getContext(),t,i))}return this.$context||(this.$context=H4(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=xi(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),o=this._getLabelSizes(),l=t.autoSkipPadding||0,u=o?o.widest.width+l:0,f=o?o.highest.height+l:0;return this.isHorizontal()?f*i>u*r?u/i:f/r:f*r<u*i?f/i:u/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:o,position:l,border:u}=r,f=o.offset,d=this.isHorizontal(),_=this.ticks.length+(f?1:0),b=Nc(o),E=[],w=u.setContext(this.getContext()),A=w.display?w.width:0,R=A/2,O=function($){return Ia(i,$,A)};let q,j,B,U,Y,I,D,N,V,k,z,P;if(l==="top")q=O(this.bottom),I=this.bottom-b,N=q-R,k=O(t.top)+R,P=t.bottom;else if(l==="bottom")q=O(this.top),k=t.top,P=O(t.bottom)-R,I=q+R,N=this.top+b;else if(l==="left")q=O(this.right),Y=this.right-b,D=q-R,V=O(t.left)+R,z=t.right;else if(l==="right")q=O(this.left),V=t.left,z=O(t.right)-R,Y=q+R,D=this.left+b;else if(e==="x"){if(l==="center")q=O((t.top+t.bottom)/2+.5);else if(Ht(l)){const $=Object.keys(l)[0],at=l[$];q=O(this.chart.scales[$].getPixelForValue(at))}k=t.top,P=t.bottom,I=q+R,N=I+b}else if(e==="y"){if(l==="center")q=O((t.left+t.right)/2);else if(Ht(l)){const $=Object.keys(l)[0],at=l[$];q=O(this.chart.scales[$].getPixelForValue(at))}Y=q-R,D=Y-b,V=t.left,z=t.right}const Ot=Ct(r.ticks.maxTicksLimit,_),At=Math.max(1,Math.ceil(_/Ot));for(j=0;j<_;j+=At){const $=this.getContext(j),at=o.setContext($),dt=u.setContext($),xt=at.lineWidth,Lt=at.color,F=dt.dash||[],et=dt.dashOffset,lt=at.tickWidth,ut=at.tickColor,bt=at.tickBorderDash||[],Tt=at.tickBorderDashOffset;B=B4(this,j,f),B!==void 0&&(U=Ia(i,B,xt),d?Y=D=V=z=U:I=N=k=P=U,E.push({tx1:Y,ty1:I,tx2:D,ty2:N,x1:V,y1:k,x2:z,y2:P,width:xt,color:Lt,borderDash:F,borderDashOffset:et,tickWidth:lt,tickColor:ut,tickBorderDash:bt,tickBorderDashOffset:Tt}))}return this._ticksLength=_,this._borderValue=q,E}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:o}=i,l=this.isHorizontal(),u=this.ticks,{align:f,crossAlign:d,padding:p,mirror:_}=o,b=Nc(i.grid),E=b+p,w=_?-p:E,A=-xi(this.labelRotation),R=[];let O,q,j,B,U,Y,I,D,N,V,k,z,P="middle";if(r==="top")Y=this.bottom-w,I=this._getXAxisLabelAlignment();else if(r==="bottom")Y=this.top+w,I=this._getXAxisLabelAlignment();else if(r==="left"){const At=this._getYAxisLabelAlignment(b);I=At.textAlign,U=At.x}else if(r==="right"){const At=this._getYAxisLabelAlignment(b);I=At.textAlign,U=At.x}else if(e==="x"){if(r==="center")Y=(t.top+t.bottom)/2+E;else if(Ht(r)){const At=Object.keys(r)[0],$=r[At];Y=this.chart.scales[At].getPixelForValue($)+E}I=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")U=(t.left+t.right)/2-E;else if(Ht(r)){const At=Object.keys(r)[0],$=r[At];U=this.chart.scales[At].getPixelForValue($)}I=this._getYAxisLabelAlignment(b).textAlign}e==="y"&&(f==="start"?P="top":f==="end"&&(P="bottom"));const Ot=this._getLabelSizes();for(O=0,q=u.length;O<q;++O){j=u[O],B=j.label;const At=o.setContext(this.getContext(O));D=this.getPixelForTick(O)+o.labelOffset,N=this._resolveTickFontOptions(O),V=N.lineHeight,k=ye(B)?B.length:1;const $=k/2,at=At.color,dt=At.textStrokeColor,xt=At.textStrokeWidth;let Lt=I;l?(U=D,I==="inner"&&(O===q-1?Lt=this.options.reverse?"left":"right":O===0?Lt=this.options.reverse?"right":"left":Lt="center"),r==="top"?d==="near"||A!==0?z=-k*V+V/2:d==="center"?z=-Ot.highest.height/2-$*V+V:z=-Ot.highest.height+V/2:d==="near"||A!==0?z=V/2:d==="center"?z=Ot.highest.height/2-$*V:z=Ot.highest.height-k*V,_&&(z*=-1),A!==0&&!At.showLabelBackdrop&&(U+=V/2*Math.sin(A))):(Y=D,z=(1-k)*V/2);let F;if(At.showLabelBackdrop){const et=yn(At.backdropPadding),lt=Ot.heights[O],ut=Ot.widths[O];let bt=z-et.top,Tt=0-et.left;switch(P){case"middle":bt-=lt/2;break;case"bottom":bt-=lt;break}switch(I){case"center":Tt-=ut/2;break;case"right":Tt-=ut;break;case"inner":O===q-1?Tt-=ut:O>0&&(Tt-=ut/2);break}F={left:Tt,top:bt,width:ut+et.width,height:lt+et.height,color:At.backdropColor}}R.push({label:B,font:N,textOffset:z,options:{rotation:A,color:at,strokeColor:dt,strokeWidth:xt,textAlign:Lt,textBaseline:P,translation:[U,Y],backdrop:F}})}return R}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-xi(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:o}}=this.options,l=this._getLabelSizes(),u=t+o,f=l.widest.width;let d,p;return e==="left"?r?(p=this.right+o,i==="near"?d="left":i==="center"?(d="center",p+=f/2):(d="right",p+=f)):(p=this.right-u,i==="near"?d="right":i==="center"?(d="center",p-=f/2):(d="left",p=this.left)):e==="right"?r?(p=this.left+o,i==="near"?d="right":i==="center"?(d="center",p-=f/2):(d="left",p-=f)):(p=this.left+u,i==="near"?d="left":i==="center"?(d="center",p+=f/2):(d="right",p=this.right)):d="right",{textAlign:d,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:o,height:l}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,o,l),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(o=>o.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,l;const u=(f,d,p)=>{!p.width||!p.color||(i.save(),i.lineWidth=p.width,i.strokeStyle=p.color,i.setLineDash(p.borderDash||[]),i.lineDashOffset=p.borderDashOffset,i.beginPath(),i.moveTo(f.x,f.y),i.lineTo(d.x,d.y),i.stroke(),i.restore())};if(e.display)for(o=0,l=r.length;o<l;++o){const f=r[o];e.drawOnChartArea&&u({x:f.x1,y:f.y1},{x:f.x2,y:f.y2},f),e.drawTicks&&u({x:f.tx1,y:f.ty1},{x:f.tx2,y:f.ty2},{color:f.tickColor,width:f.tickWidth,borderDash:f.tickBorderDash,borderDashOffset:f.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),l=i.display?o.width:0;if(!l)return;const u=r.setContext(this.getContext(0)).lineWidth,f=this._borderValue;let d,p,_,b;this.isHorizontal()?(d=Ia(t,this.left,l)-l/2,p=Ia(t,this.right,u)+u/2,_=b=f):(_=Ia(t,this.top,l)-l/2,b=Ia(t,this.bottom,u)+u/2,d=p=f),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(d,_),e.lineTo(p,b),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Qd(i,r);const o=this.getLabelItems(t);for(const l of o){const u=l.options,f=l.font,d=l.label,p=l.textOffset;$a(i,d,0,p,f,u)}r&&$d(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const o=Ge(i.font),l=yn(i.padding),u=i.align;let f=o.lineHeight/2;e==="bottom"||e==="center"||Ht(e)?(f+=l.bottom,ye(i.text)&&(f+=o.lineHeight*(i.text.length-1))):f+=l.top;const{titleX:d,titleY:p,maxWidth:_,rotation:b}=Y4(this,f,e,u);$a(t,i.text,0,0,o,{color:i.color,maxWidth:_,rotation:b,textAlign:G4(u,e,r),textBaseline:"middle",translation:[d,p]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Ct(t.grid&&t.grid.z,-1),r=Ct(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==eo.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let o,l;for(o=0,l=e.length;o<l;++o){const u=e[o];u[i]===this.id&&(!t||u.type===t)&&r.push(u)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Ge(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class wf{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;W4(e)&&(i=this.register(e));const r=this.items,o=t.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in r||(r[o]=t,K4(t,l,i),this.override&&_e.override(t.id,t.overrides)),l}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in _e[r]&&(delete _e[r][i],this.override&&delete Qa[i])}}function K4(n,t,e){const i=gu(Object.create(null),[e?_e.get(e):{},_e.get(t),n.defaults]);_e.set(t,i),n.defaultRoutes&&X4(t,n.defaultRoutes),n.descriptors&&_e.describe(t,n.descriptors)}function X4(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),o=[n].concat(i).join("."),l=t[e].split("."),u=l.pop(),f=l.join(".");_e.route(o,r,f,u)})}function W4(n){return"id"in n&&"defaults"in n}class Q4{constructor(){this.controllers=new wf(Ti,"datasets",!0),this.elements=new wf(Si,"elements"),this.plugins=new wf(Object,"plugins"),this.scales=new wf(eo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const o=i||this._getRegistryForType(r);i||o.isForType(r)||o===this.plugins&&r.id?this._exec(t,o,r):ie(r,l=>{const u=i||this._getRegistryForType(l);this._exec(t,u,l)})})}_exec(t,e,i){const r=T_(t);ce(i["before"+r],[],i),e[t](i),ce(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var Xi=new Q4;class $4{constructor(){this._init=void 0}notify(t,e,i,r){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const o=r?this._descriptors(t).filter(r):this._descriptors(t),l=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),l}_notify(t,e,i,r){r=r||{};for(const o of t){const l=o.plugin,u=l[i],f=[e,r,o.options];if(ce(u,f,l)===!1&&r.cancelable)return!1}return!0}invalidate(){Vt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=Ct(i.options&&i.options.plugins,{}),o=J4(i);return r===!1&&!e?[]:tL(t,o,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(o,l)=>o.filter(u=>!l.some(f=>u.plugin.id===f.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function J4(n){const t={},e=[],i=Object.keys(Xi.plugins.items);for(let o=0;o<i.length;o++)e.push(Xi.getPlugin(i[o]));const r=n.plugins||[];for(let o=0;o<r.length;o++){const l=r[o];e.indexOf(l)===-1&&(e.push(l),t[l.id]=!0)}return{plugins:e,localIds:t}}function Z4(n,t){return!t&&n===!1?null:n===!0?{}:n}function tL(n,{plugins:t,localIds:e},i,r){const o=[],l=n.getContext();for(const u of t){const f=u.id,d=Z4(i[f],r);d!==null&&o.push({plugin:u,options:eL(n.config,{plugin:u,local:e[f]},d,l)})}return o}function eL(n,{plugin:t,local:e},i,r){const o=n.pluginScopeKeys(t),l=n.getOptionScopes(i,o);return e&&t.defaults&&l.push(t.defaults),n.createResolver(l,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function hy(n,t){const e=_e.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function nL(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function iL(n,t){return n===t?"_index_":"_value_"}function RE(n){if(n==="x"||n==="y"||n==="r")return n}function sL(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function fy(n,...t){if(RE(n))return n;for(const e of t){const i=e.axis||sL(e.position)||n.length>1&&RE(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function CE(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function rL(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return CE(n,"x",e[0])||CE(n,"y",e[0])}return{}}function aL(n,t){const e=Qa[n.type]||{scales:{}},i=t.scales||{},r=hy(n.type,t),o=Object.create(null);return Object.keys(i).forEach(l=>{const u=i[l];if(!Ht(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const f=fy(l,u,rL(l,n),_e.scales[u.type]),d=iL(f,r),p=e.scales||{};o[l]=Jc(Object.create(null),[{axis:f},u,p[f],p[d]])}),n.data.datasets.forEach(l=>{const u=l.type||n.type,f=l.indexAxis||hy(u,t),p=(Qa[u]||{}).scales||{};Object.keys(p).forEach(_=>{const b=nL(_,f),E=l[b+"AxisID"]||b;o[E]=o[E]||Object.create(null),Jc(o[E],[{axis:b},i[E],p[_]])})}),Object.keys(o).forEach(l=>{const u=o[l];Jc(u,[_e.scales[u.type],_e.scale])}),o}function b1(n){const t=n.options||(n.options={});t.plugins=Ct(t.plugins,{}),t.scales=aL(n,t)}function v1(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function oL(n){return n=n||{},n.data=v1(n.data),b1(n),n}const IE=new Map,x1=new Set;function Rf(n,t){let e=IE.get(n);return e||(e=t(),IE.set(n,e),x1.add(e)),e}const Oc=(n,t,e)=>{const i=Yr(t,e);i!==void 0&&n.add(i)};class lL{constructor(t){this._config=oL(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=v1(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),b1(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Rf(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Rf(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Rf(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Rf(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:o}=this,l=this._cachedScopes(t,i),u=l.get(e);if(u)return u;const f=new Set;e.forEach(p=>{t&&(f.add(t),p.forEach(_=>Oc(f,t,_))),p.forEach(_=>Oc(f,r,_)),p.forEach(_=>Oc(f,Qa[o]||{},_)),p.forEach(_=>Oc(f,_e,_)),p.forEach(_=>Oc(f,ly,_))});const d=Array.from(f);return d.length===0&&d.push(Object.create(null)),x1.has(e)&&l.set(e,d),d}chartOptionScopes(){const{options:t,type:e}=this;return[t,Qa[e]||{},_e.datasets[e]||{},{type:e},_e,ly]}resolveNamedOptions(t,e,i,r=[""]){const o={$shared:!0},{resolver:l,subPrefixes:u}=DE(this._resolverCache,t,r);let f=l;if(uL(l,e)){o.$shared=!1,i=Kr(i)?i():i;const d=this.createResolver(t,i,u);f=gl(l,i,d)}for(const d of e)o[d]=f[d];return o}createResolver(t,e,i=[""],r){const{resolver:o}=DE(this._resolverCache,t,i);return Ht(e)?gl(o,e,void 0,r):o}}function DE(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let o=i.get(r);return o||(o={resolver:C_(t,e),subPrefixes:e.filter(u=>!u.toLowerCase().includes("hover"))},i.set(r,o)),o}const cL=n=>Ht(n)&&Object.getOwnPropertyNames(n).some(t=>Kr(n[t]));function uL(n,t){const{isScriptable:e,isIndexable:i}=Zw(n);for(const r of t){const o=e(r),l=i(r),u=(l||o)&&n[r];if(o&&(Kr(u)||cL(u))||l&&ye(u))return!0}return!1}var hL="4.5.1";const fL=["top","bottom","left","right","chartArea"];function ME(n,t){return n==="top"||n==="bottom"||fL.indexOf(n)===-1&&t==="x"}function NE(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function OE(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),ce(e&&e.onComplete,[n],t)}function dL(n){const t=n.chart,e=t.options.animation;ce(e&&e.onProgress,[n],t)}function T1(n){return M_()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Kf={},kE=n=>{const t=T1(n);return Object.values(Kf).filter(e=>e.canvas===t).pop()};function gL(n,t,e){const i=Object.keys(n);for(const r of i){const o=+r;if(o>=t){const l=n[r];delete n[r],(e>0||o>t)&&(n[o+e]=l)}}}function mL(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}class xn{static register(...t){Xi.add(...t),PE()}static unregister(...t){Xi.remove(...t),PE()}constructor(t,e){const i=this.config=new lL(e),r=T1(t),o=kE(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||O4(r)),this.platform.updateConfig(i);const u=this.platform.acquireContext(r,l.aspectRatio),f=u&&u.canvas,d=f&&f.height,p=f&&f.width;if(this.id=pP(),this.ctx=u,this.canvas=f,this.width=p,this.height=d,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new $4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=OP(_=>this.update(_),l.resizeDelay||0),this._dataChanges=[],Kf[this.id]=this,!u||!f){console.error("Failed to create chart: can't acquire context from the given item");return}As.listen(this,"complete",OE),As.listen(this,"progress",dL),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:o}=this;return Vt(t)?e&&o?o:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Xi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():iE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return tE(this.canvas,this.ctx),this}stop(){return As.stop(this),this}resize(t,e){As.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(r,t,e,o),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),f=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,iE(this,u,!0)&&(this.notifyPlugins("resize",{size:l}),ce(i.onResize,[this,l],this),this.attached&&this._doResize(f)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};ie(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((l,u)=>(l[u]=!1,l),{});let o=[];e&&(o=o.concat(Object.keys(e).map(l=>{const u=e[l],f=fy(l,u),d=f==="r",p=f==="x";return{options:u,dposition:d?"chartArea":p?"bottom":"left",dtype:d?"radialLinear":p?"category":"linear"}}))),ie(o,l=>{const u=l.options,f=u.id,d=fy(f,u),p=Ct(u.type,l.dtype);(u.position===void 0||ME(u.position,d)!==ME(l.dposition))&&(u.position=l.dposition),r[f]=!0;let _=null;if(f in i&&i[f].type===p)_=i[f];else{const b=Xi.getScale(p);_=new b({id:f,type:p,ctx:this.ctx,chart:this}),i[_.id]=_}_.init(u,t)}),ie(r,(l,u)=>{l||delete i[u]}),ie(i,l=>{mn.configure(this,l,l.options),mn.addBox(this,l)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,o)=>r.index-o.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(NE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const o=e[i];let l=this.getDatasetMeta(i);const u=o.type||this.config.type;if(l.type&&l.type!==u&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=u,l.indexAxis=o.indexAxis||hy(u,this.options),l.order=o.order||0,l.index=i,l.label=""+o.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const f=Xi.getController(u),{datasetElementType:d,dataElementType:p}=_e.datasets[u];Object.assign(f,{dataElementType:Xi.getElement(p),datasetElementType:d&&Xi.getElement(d)}),l.controller=new f(this,i),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){ie(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let d=0,p=this.data.datasets.length;d<p;d++){const{controller:_}=this.getDatasetMeta(d),b=!r&&o.indexOf(_)===-1;_.buildOrUpdateElements(b),l=Math.max(+_.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),r||ie(o,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(NE("z","_idx"));const{_active:u,_lastEvent:f}=this;f?this._eventHandler(f,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){ie(this.scales,t=>{mn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!GT(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:o}of e){const l=i==="_removeElements"?-o:o;gL(t,r,l)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(l=>l[0]===o).map((l,u)=>u+","+l.splice(1).join(","))),r=i(0);for(let o=1;o<e;o++)if(!GT(r,i(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;mn.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],ie(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Kr(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(As.has(this)?this.attached&&!As.running(this)&&As.start(this):(this.draw(),OE({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,o;for(r=0,o=e.length;r<o;++r){const l=e[r];(!t||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=u1(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Qd(e,r),t.controller.draw(),r&&$d(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Ns(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const o=f4.modes[e];return typeof o=="function"?o(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(o=>o&&o._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Qr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",o=this.getDatasetMeta(t),l=o.controller._resolveAnimations(void 0,r);mu(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),l.update(o,{visible:i}),this.update(u=>u.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),As.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),tE(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Kf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,l)=>{e.addEventListener(this,o,l),t[o]=l},r=(o,l,u)=>{o.offsetX=l,o.offsetY=u,this._eventHandler(o)};ie(this.options.events,o=>i(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(f,d)=>{e.addEventListener(this,f,d),t[f]=d},r=(f,d)=>{t[f]&&(e.removeEventListener(this,f,d),delete t[f])},o=(f,d)=>{this.canvas&&this.resize(f,d)};let l;const u=()=>{r("attach",u),this.attached=!0,this.resize(),i("resize",o),i("detach",l)};l=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),i("attach",u)},e.isAttached(this.canvas)?u():l()}unbindEvents(){ie(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ie(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let o,l,u,f;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),u=0,f=t.length;u<f;++u){l=t[u];const d=l&&this.getDatasetMeta(l.datasetIndex).controller;d&&d[r+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:l})=>{const u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[l],index:l}});!_d(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,o=(f,d)=>f.filter(p=>!d.some(_=>p.datasetIndex===_.datasetIndex&&p.index===_.index)),l=o(e,t),u=i?t:o(t,e);l.length&&this.updateHoverStyle(l,r.mode,!1),u.length&&r.mode&&this.updateHoverStyle(u,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=l=>(l.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:o}=this,l=e,u=this._getActiveElements(t,r,i,l),f=TP(t),d=mL(t,this._lastEvent,i,f);i&&(this._lastEvent=null,ce(o.onHover,[t,u,this],this),f&&ce(o.onClick,[t,u,this],this));const p=!_d(u,r);return(p||e)&&(this._active=u,this._updateHoverStyles(u,r,e)),this._lastEvent=d,p}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,r)}}ct(xn,"defaults",_e),ct(xn,"instances",Kf),ct(xn,"overrides",Qa),ct(xn,"registry",Xi),ct(xn,"version",hL),ct(xn,"getChart",kE);function PE(){return ie(xn.instances,n=>n._plugins.invalidate())}function pL(n,t,e){const{startAngle:i,x:r,y:o,outerRadius:l,innerRadius:u,options:f}=t,{borderWidth:d,borderJoinStyle:p}=f,_=Math.min(d/l,dn(i-e));if(n.beginPath(),n.arc(r,o,l-d/2,i+_/2,e-_/2),u>0){const b=Math.min(d/u,dn(i-e));n.arc(r,o,u+d/2,e-b/2,i+b/2,!0)}else{const b=Math.min(d/2,l*dn(i-e));if(p==="round")n.arc(r,o,b,e-Wt/2,i+Wt/2,!0);else if(p==="bevel"){const E=2*b*b,w=-E*Math.cos(e+Wt/2)+r,A=-E*Math.sin(e+Wt/2)+o,R=E*Math.cos(i+Wt/2)+r,O=E*Math.sin(i+Wt/2)+o;n.lineTo(w,A),n.lineTo(R,O)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function yL(n,t,e){const{startAngle:i,pixelMargin:r,x:o,y:l,outerRadius:u,innerRadius:f}=t;let d=r/u;n.beginPath(),n.arc(o,l,u,i-d,e+d),f>r?(d=r/f,n.arc(o,l,f,e+d,i-d,!0)):n.arc(o,l,r,e+Ie,i-Ie),n.closePath(),n.clip()}function _L(n){return R_(n,["outerStart","outerEnd","innerStart","innerEnd"])}function bL(n,t,e,i){const r=_L(n.options.borderRadius),o=(e-t)/2,l=Math.min(o,i*t/2),u=f=>{const d=(e-Math.min(o,f))*i/2;return Je(f,0,Math.min(o,d))};return{outerStart:u(r.outerStart),outerEnd:u(r.outerEnd),innerStart:Je(r.innerStart,0,l),innerEnd:Je(r.innerEnd,0,l)}}function Xo(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Sd(n,t,e,i,r,o){const{x:l,y:u,startAngle:f,pixelMargin:d,innerRadius:p}=t,_=Math.max(t.outerRadius+i+e-d,0),b=p>0?p+i+e+d:0;let E=0;const w=r-f;if(i){const At=p>0?p-i:0,$=_>0?_-i:0,at=(At+$)/2,dt=at!==0?w*at/(at+i):w;E=(w-dt)/2}const A=Math.max(.001,w*_-e/Wt)/_,R=(w-A)/2,O=f+R+E,q=r-R-E,{outerStart:j,outerEnd:B,innerStart:U,innerEnd:Y}=bL(t,b,_,q-O),I=_-j,D=_-B,N=O+j/I,V=q-B/D,k=b+U,z=b+Y,P=O+U/k,Ot=q-Y/z;if(n.beginPath(),o){const At=(N+V)/2;if(n.arc(l,u,_,N,At),n.arc(l,u,_,At,V),B>0){const xt=Xo(D,V,l,u);n.arc(xt.x,xt.y,B,V,q+Ie)}const $=Xo(z,q,l,u);if(n.lineTo($.x,$.y),Y>0){const xt=Xo(z,Ot,l,u);n.arc(xt.x,xt.y,Y,q+Ie,Ot+Math.PI)}const at=(q-Y/b+(O+U/b))/2;if(n.arc(l,u,b,q-Y/b,at,!0),n.arc(l,u,b,at,O+U/b,!0),U>0){const xt=Xo(k,P,l,u);n.arc(xt.x,xt.y,U,P+Math.PI,O-Ie)}const dt=Xo(I,O,l,u);if(n.lineTo(dt.x,dt.y),j>0){const xt=Xo(I,N,l,u);n.arc(xt.x,xt.y,j,O-Ie,N)}}else{n.moveTo(l,u);const At=Math.cos(N)*_+l,$=Math.sin(N)*_+u;n.lineTo(At,$);const at=Math.cos(V)*_+l,dt=Math.sin(V)*_+u;n.lineTo(at,dt)}n.closePath()}function vL(n,t,e,i,r){const{fullCircles:o,startAngle:l,circumference:u}=t;let f=t.endAngle;if(o){Sd(n,t,e,i,f,r);for(let d=0;d<o;++d)n.fill();isNaN(u)||(f=l+(u%de||de))}return Sd(n,t,e,i,f,r),n.fill(),f}function xL(n,t,e,i,r){const{fullCircles:o,startAngle:l,circumference:u,options:f}=t,{borderWidth:d,borderJoinStyle:p,borderDash:_,borderDashOffset:b,borderRadius:E}=f,w=f.borderAlign==="inner";if(!d)return;n.setLineDash(_||[]),n.lineDashOffset=b,w?(n.lineWidth=d*2,n.lineJoin=p||"round"):(n.lineWidth=d,n.lineJoin=p||"bevel");let A=t.endAngle;if(o){Sd(n,t,e,i,A,r);for(let R=0;R<o;++R)n.stroke();isNaN(u)||(A=l+(u%de||de))}w&&yL(n,t,A),f.selfJoin&&A-l>=Wt&&E===0&&p!=="miter"&&pL(n,t,A),o||(Sd(n,t,e,i,A,r),n.stroke())}class Hc extends Si{constructor(e){super();ct(this,"circumference");ct(this,"endAngle");ct(this,"fullCircles");ct(this,"innerRadius");ct(this,"outerRadius");ct(this,"pixelMargin");ct(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,r){const o=this.getProps(["x","y"],r),{angle:l,distance:u}=Hw(o,{x:e,y:i}),{startAngle:f,endAngle:d,innerRadius:p,outerRadius:_,circumference:b}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),E=(this.options.spacing+this.options.borderWidth)/2,w=Ct(b,d-f),A=pu(l,f,d)&&f!==d,R=w>=de||A,O=Ds(u,p+E,_+E);return R&&O}getCenterPoint(e){const{x:i,y:r,startAngle:o,endAngle:l,innerRadius:u,outerRadius:f}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:p}=this.options,_=(o+l)/2,b=(u+f+p+d)/2;return{x:i+Math.cos(_)*b,y:r+Math.sin(_)*b}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:r}=this,o=(i.offset||0)/4,l=(i.spacing||0)/2,u=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>de?Math.floor(r/de):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const f=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(f)*o,Math.sin(f)*o);const d=1-Math.sin(Math.min(Wt,r||0)),p=o*d;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,vL(e,this,p,l,u),xL(e,this,p,l,u),e.restore()}}ct(Hc,"id","arc"),ct(Hc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ct(Hc,"defaultRoutes",{backgroundColor:"backgroundColor"}),ct(Hc,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function E1(n,t,e=t){n.lineCap=Ct(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Ct(e.borderDash,t.borderDash)),n.lineDashOffset=Ct(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Ct(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Ct(e.borderWidth,t.borderWidth),n.strokeStyle=Ct(e.borderColor,t.borderColor)}function TL(n,t,e){n.lineTo(e.x,e.y)}function EL(n){return n.stepped?GP:n.tension||n.cubicInterpolationMode==="monotone"?YP:TL}function S1(n,t,e={}){const i=n.length,{start:r=0,end:o=i-1}=e,{start:l,end:u}=t,f=Math.max(r,l),d=Math.min(o,u),p=r<l&&o<l||r>u&&o>u;return{count:i,start:f,loop:t.loop,ilen:d<f&&!p?i+d-f:d-f}}function SL(n,t,e,i){const{points:r,options:o}=t,{count:l,start:u,loop:f,ilen:d}=S1(r,e,i),p=EL(o);let{move:_=!0,reverse:b}=i||{},E,w,A;for(E=0;E<=d;++E)w=r[(u+(b?d-E:E))%l],!w.skip&&(_?(n.moveTo(w.x,w.y),_=!1):p(n,A,w,b,o.stepped),A=w);return f&&(w=r[(u+(b?d:0))%l],p(n,A,w,b,o.stepped)),!!f}function AL(n,t,e,i){const r=t.points,{count:o,start:l,ilen:u}=S1(r,e,i),{move:f=!0,reverse:d}=i||{};let p=0,_=0,b,E,w,A,R,O;const q=B=>(l+(d?u-B:B))%o,j=()=>{A!==R&&(n.lineTo(p,R),n.lineTo(p,A),n.lineTo(p,O))};for(f&&(E=r[q(0)],n.moveTo(E.x,E.y)),b=0;b<=u;++b){if(E=r[q(b)],E.skip)continue;const B=E.x,U=E.y,Y=B|0;Y===w?(U<A?A=U:U>R&&(R=U),p=(_*p+B)/++_):(j(),n.lineTo(B,U),w=Y,_=0,A=R=U),O=U}j()}function dy(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?AL:SL}function wL(n){return n.stepped?SV:n.tension||n.cubicInterpolationMode==="monotone"?AV:Pa}function RL(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),E1(n,t.options),n.stroke(r)}function CL(n,t,e,i){const{segments:r,options:o}=t,l=dy(t);for(const u of r)E1(n,o,u.style),n.beginPath(),l(n,t,u,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const IL=typeof Path2D=="function";function DL(n,t,e,i){IL&&!t.options.segment?RL(n,t,e,i):CL(n,t,e,i)}class Nr extends Si{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;pV(this._points,i,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=MV(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,r=t[e],o=this.points,l=c1(this,{property:e,start:r,end:r});if(!l.length)return;const u=[],f=wL(i);let d,p;for(d=0,p=l.length;d<p;++d){const{start:_,end:b}=l[d],E=o[_],w=o[b];if(E===w){u.push(E);continue}const A=Math.abs((r-E[e])/(w[e]-E[e])),R=f(E,w,A,i.stepped);R[e]=t[e],u.push(R)}return u.length===1?u[0]:u}pathSegment(t,e,i){return dy(this)(t,this,e,i)}path(t,e,i){const r=this.segments,o=dy(this);let l=this._loop;e=e||0,i=i||this.points.length-e;for(const u of r)l&=o(t,this,u,{start:e,end:e+i-1});return!!l}draw(t,e,i,r){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),DL(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ct(Nr,"id","line"),ct(Nr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ct(Nr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ct(Nr,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function VE(n,t,e,i){const r=n.options,{[e]:o}=n.getProps([e],i);return Math.abs(t-o)<r.radius+r.hitRadius}class Xf extends Si{constructor(e){super();ct(this,"parsed");ct(this,"skip");ct(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,r){const o=this.options,{x:l,y:u}=this.getProps(["x","y"],r);return Math.pow(e-l,2)+Math.pow(i-u,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,i){return VE(this,e,"x",i)}inYRange(e,i){return VE(this,e,"y",i)}getCenterPoint(e){const{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const r=i&&e.borderWidth||0;return(i+r)*2}draw(e,i){const r=this.options;this.skip||r.radius<.1||!Ns(this,i,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,cy(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}ct(Xf,"id","point"),ct(Xf,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ct(Xf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function A1(n,t){const{x:e,y:i,base:r,width:o,height:l}=n.getProps(["x","y","base","width","height"],t);let u,f,d,p,_;return n.horizontal?(_=l/2,u=Math.min(e,r),f=Math.max(e,r),d=i-_,p=i+_):(_=o/2,u=e-_,f=e+_,d=Math.min(i,r),p=Math.max(i,r)),{left:u,top:d,right:f,bottom:p}}function Or(n,t,e,i){return n?0:Je(t,e,i)}function ML(n,t,e){const i=n.options.borderWidth,r=n.borderSkipped,o=Jw(i);return{t:Or(r.top,o.top,0,e),r:Or(r.right,o.right,0,t),b:Or(r.bottom,o.bottom,0,e),l:Or(r.left,o.left,0,t)}}function NL(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,o=Ba(r),l=Math.min(t,e),u=n.borderSkipped,f=i||Ht(r);return{topLeft:Or(!f||u.top||u.left,o.topLeft,0,l),topRight:Or(!f||u.top||u.right,o.topRight,0,l),bottomLeft:Or(!f||u.bottom||u.left,o.bottomLeft,0,l),bottomRight:Or(!f||u.bottom||u.right,o.bottomRight,0,l)}}function OL(n){const t=A1(n),e=t.right-t.left,i=t.bottom-t.top,r=ML(n,e/2,i/2),o=NL(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:o},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function Ip(n,t,e,i){const r=t===null,o=e===null,u=n&&!(r&&o)&&A1(n,i);return u&&(r||Ds(t,u.left,u.right))&&(o||Ds(e,u.top,u.bottom))}function kL(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function PL(n,t){n.rect(t.x,t.y,t.w,t.h)}function Dp(n,t,e={}){const i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0,o=(n.x+n.w!==e.x+e.w?t:0)-i,l=(n.y+n.h!==e.y+e.h?t:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+o,h:n.h+l,radius:n.radius}}class Wf extends Si{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:o,outer:l}=OL(this),u=kL(l.radius)?yu:PL;t.save(),(l.w!==o.w||l.h!==o.h)&&(t.beginPath(),u(t,Dp(l,e,o)),t.clip(),u(t,Dp(o,-e,l)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),u(t,Dp(o,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return Ip(this,t,e,i)}inXRange(t,e){return Ip(this,t,null,e)}inYRange(t,e){return Ip(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+r)/2:e,y:o?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}ct(Wf,"id","bar"),ct(Wf,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ct(Wf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var VL=Object.freeze({__proto__:null,ArcElement:Hc,BarElement:Wf,LineElement:Nr,PointElement:Xf});const gy=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],LE=gy.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function w1(n){return gy[n%gy.length]}function R1(n){return LE[n%LE.length]}function LL(n,t){return n.borderColor=w1(t),n.backgroundColor=R1(t),++t}function jL(n,t){return n.backgroundColor=n.data.map(()=>w1(t++)),t}function zL(n,t){return n.backgroundColor=n.data.map(()=>R1(t++)),t}function UL(n){let t=0;return(e,i)=>{const r=n.getDatasetMeta(i).controller;r instanceof La?t=jL(e,t):r instanceof nu?t=zL(e,t):r&&(t=LL(e,t))}}function jE(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function BL(n){return n&&(n.borderColor||n.backgroundColor)}function FL(){return _e.borderColor!=="rgba(0,0,0,0.1)"||_e.backgroundColor!=="rgba(0,0,0,0.1)"}var HL={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:i},options:r}=n.config,{elements:o}=r,l=jE(i)||BL(r)||o&&jE(o)||FL();if(!e.forceOverride&&l)return;const u=UL(n);i.forEach(u)}};function qL(n,t,e,i,r){const o=r.samples||i;if(o>=e)return n.slice(t,t+e);const l=[],u=(e-2)/(o-2);let f=0;const d=t+e-1;let p=t,_,b,E,w,A;for(l[f++]=n[p],_=0;_<o-2;_++){let R=0,O=0,q;const j=Math.floor((_+1)*u)+1+t,B=Math.min(Math.floor((_+2)*u)+1,e)+t,U=B-j;for(q=j;q<B;q++)R+=n[q].x,O+=n[q].y;R/=U,O/=U;const Y=Math.floor(_*u)+1+t,I=Math.min(Math.floor((_+1)*u)+1,e)+t,{x:D,y:N}=n[p];for(E=w=-1,q=Y;q<I;q++)w=.5*Math.abs((D-R)*(n[q].y-N)-(D-n[q].x)*(O-N)),w>E&&(E=w,b=n[q],A=q);l[f++]=b,p=A}return l[f++]=n[d],l}function GL(n,t,e,i){let r=0,o=0,l,u,f,d,p,_,b,E,w,A;const R=[],O=t+e-1,q=n[t].x,B=n[O].x-q;for(l=t;l<t+e;++l){u=n[l],f=(u.x-q)/B*i,d=u.y;const U=f|0;if(U===p)d<w?(w=d,_=l):d>A&&(A=d,b=l),r=(o*r+u.x)/++o;else{const Y=l-1;if(!Vt(_)&&!Vt(b)){const I=Math.min(_,b),D=Math.max(_,b);I!==E&&I!==Y&&R.push({...n[I],x:r}),D!==E&&D!==Y&&R.push({...n[D],x:r})}l>0&&Y!==E&&R.push(n[Y]),R.push(u),p=U,o=0,w=A=d,_=b=E=l}}return R}function C1(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function zE(n){n.data.datasets.forEach(t=>{C1(t)})}function YL(n,t){const e=t.length;let i=0,r;const{iScale:o}=n,{min:l,max:u,minDefined:f,maxDefined:d}=o.getUserBounds();return f&&(i=Je(Ms(t,o.axis,l).lo,0,e-1)),d?r=Je(Ms(t,o.axis,u).hi+1,i,e)-i:r=e-i,{start:i,count:r}}var KL={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){zE(n);return}const i=n.width;n.data.datasets.forEach((r,o)=>{const{_data:l,indexAxis:u}=r,f=n.getDatasetMeta(o),d=l||r.data;if(Bc([u,n.options.indexAxis])==="y"||!f.controller.supportsDecimation)return;const p=n.scales[f.xAxisID];if(p.type!=="linear"&&p.type!=="time"||n.options.parsing)return;let{start:_,count:b}=YL(f,d);const E=e.threshold||4*i;if(b<=E){C1(r);return}Vt(l)&&(r._data=d,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(A){this._data=A}}));let w;switch(e.algorithm){case"lttb":w=qL(d,_,b,i,e);break;case"min-max":w=GL(d,_,b,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=w})},destroy(n){zE(n)}};function XL(n,t,e){const i=n.segments,r=n.points,o=t.points,l=[];for(const u of i){let{start:f,end:d}=u;d=tg(f,d,r);const p=my(e,r[f],r[d],u.loop);if(!t.segments){l.push({source:u,target:p,start:r[f],end:r[d]});continue}const _=c1(t,p);for(const b of _){const E=my(e,o[b.start],o[b.end],b.loop),w=l1(u,r,E);for(const A of w)l.push({source:A,target:b,start:{[e]:UE(p,E,"start",Math.max)},end:{[e]:UE(p,E,"end",Math.min)}})}}return l}function my(n,t,e,i){if(i)return;let r=t[n],o=e[n];return n==="angle"&&(r=dn(r),o=dn(o)),{property:n,start:r,end:o}}function WL(n,t){const{x:e=null,y:i=null}=n||{},r=t.points,o=[];return t.segments.forEach(({start:l,end:u})=>{u=tg(l,u,r);const f=r[l],d=r[u];i!==null?(o.push({x:f.x,y:i}),o.push({x:d.x,y:i})):e!==null&&(o.push({x:e,y:f.y}),o.push({x:e,y:d.y}))}),o}function tg(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function UE(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function I1(n,t){let e=[],i=!1;return ye(n)?(i=!0,e=n):e=WL(n,t),e.length?new Nr({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function BE(n){return n&&n.fill!==!1}function QL(n,t,e){let r=n[t].fill;const o=[t];let l;if(!e)return r;for(;r!==!1&&o.indexOf(r)===-1;){if(!Te(r))return r;if(l=n[r],!l)return!1;if(l.visible)return r;o.push(r),r=l.fill}return!1}function $L(n,t,e){const i=e3(n);if(Ht(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Te(r)&&Math.floor(r)===r?JL(i[0],t,r,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function JL(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function ZL(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:Ht(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function t3(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:Ht(n)?i=n.value:i=t.getBaseValue(),i}function e3(n){const t=n.options,e=t.fill;let i=Ct(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function n3(n){const{scale:t,index:e,line:i}=n,r=[],o=i.segments,l=i.points,u=i3(t,e);u.push(I1({x:null,y:t.bottom},i));for(let f=0;f<o.length;f++){const d=o[f];for(let p=d.start;p<=d.end;p++)s3(r,l[p],u)}return new Nr({points:r,options:{}})}function i3(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const o=i[r];if(o.index===t)break;o.hidden||e.unshift(o.dataset)}return e}function s3(n,t,e){const i=[];for(let r=0;r<e.length;r++){const o=e[r],{first:l,last:u,point:f}=r3(o,t,"x");if(!(!f||l&&u)){if(l)i.unshift(f);else if(n.push(f),!u)break}}n.push(...i)}function r3(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const r=i[e],o=n.segments,l=n.points;let u=!1,f=!1;for(let d=0;d<o.length;d++){const p=o[d],_=l[p.start][e],b=l[p.end][e];if(Ds(r,_,b)){u=r===_,f=r===b;break}}return{first:u,last:f,point:i}}class D1{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:r,y:o,radius:l}=this;return e=e||{start:0,end:de},t.arc(r,o,l,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:r}=this,o=t.angle;return{x:e+Math.cos(o)*r,y:i+Math.sin(o)*r,angle:o}}}function a3(n){const{chart:t,fill:e,line:i}=n;if(Te(e))return o3(t,e);if(e==="stack")return n3(n);if(e==="shape")return!0;const r=l3(n);return r instanceof D1?r:I1(r,i)}function o3(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function l3(n){return(n.scale||{}).getPointPositionForValue?u3(n):c3(n)}function c3(n){const{scale:t={},fill:e}=n,i=ZL(e,t);if(Te(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function u3(n){const{scale:t,fill:e}=n,i=t.options,r=t.getLabels().length,o=i.reverse?t.max:t.min,l=t3(e,t,o),u=[];if(i.grid.circular){const f=t.getPointPositionForValue(0,o);return new D1({x:f.x,y:f.y,radius:t.getDistanceFromCenterForValue(l)})}for(let f=0;f<r;++f)u.push(t.getPointPositionForValue(f,l));return u}function Mp(n,t,e){const i=a3(t),{chart:r,index:o,line:l,scale:u,axis:f}=t,d=l.options,p=d.fill,_=d.backgroundColor,{above:b=_,below:E=_}=p||{},w=r.getDatasetMeta(o),A=u1(r,w);i&&l.points.length&&(Qd(n,e),h3(n,{line:l,target:i,above:b,below:E,area:e,scale:u,axis:f,clip:A}),$d(n))}function h3(n,t){const{line:e,target:i,above:r,below:o,area:l,scale:u,clip:f}=t,d=e._loop?"angle":t.axis;n.save();let p=o;o!==r&&(d==="x"?(FE(n,i,l.top),Np(n,{line:e,target:i,color:r,scale:u,property:d,clip:f}),n.restore(),n.save(),FE(n,i,l.bottom)):d==="y"&&(HE(n,i,l.left),Np(n,{line:e,target:i,color:o,scale:u,property:d,clip:f}),n.restore(),n.save(),HE(n,i,l.right),p=r)),Np(n,{line:e,target:i,color:p,scale:u,property:d,clip:f}),n.restore()}function FE(n,t,e){const{segments:i,points:r}=t;let o=!0,l=!1;n.beginPath();for(const u of i){const{start:f,end:d}=u,p=r[f],_=r[tg(f,d,r)];o?(n.moveTo(p.x,p.y),o=!1):(n.lineTo(p.x,e),n.lineTo(p.x,p.y)),l=!!t.pathSegment(n,u,{move:l}),l?n.closePath():n.lineTo(_.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function HE(n,t,e){const{segments:i,points:r}=t;let o=!0,l=!1;n.beginPath();for(const u of i){const{start:f,end:d}=u,p=r[f],_=r[tg(f,d,r)];o?(n.moveTo(p.x,p.y),o=!1):(n.lineTo(e,p.y),n.lineTo(p.x,p.y)),l=!!t.pathSegment(n,u,{move:l}),l?n.closePath():n.lineTo(e,_.y)}n.lineTo(e,t.first().y),n.closePath(),n.clip()}function Np(n,t){const{line:e,target:i,property:r,color:o,scale:l,clip:u}=t,f=XL(e,i,r);for(const{source:d,target:p,start:_,end:b}of f){const{style:{backgroundColor:E=o}={}}=d,w=i!==!0;n.save(),n.fillStyle=E,f3(n,l,u,w&&my(r,_,b)),n.beginPath();const A=!!e.pathSegment(n,d);let R;if(w){A?n.closePath():qE(n,i,b,r);const O=!!i.pathSegment(n,p,{move:A,reverse:!0});R=A&&O,R||qE(n,i,_,r)}n.closePath(),n.fill(R?"evenodd":"nonzero"),n.restore()}}function f3(n,t,e,i){const r=t.chart.chartArea,{property:o,start:l,end:u}=i||{};if(o==="x"||o==="y"){let f,d,p,_;o==="x"?(f=l,d=r.top,p=u,_=r.bottom):(f=r.left,d=l,p=r.right,_=u),n.beginPath(),e&&(f=Math.max(f,e.left),p=Math.min(p,e.right),d=Math.max(d,e.top),_=Math.min(_,e.bottom)),n.rect(f,d,p-f,_-d),n.clip()}}function qE(n,t,e,i){const r=t.interpolate(e,i);r&&n.lineTo(r.x,r.y)}var d3={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,r=[];let o,l,u,f;for(l=0;l<i;++l)o=n.getDatasetMeta(l),u=o.dataset,f=null,u&&u.options&&u instanceof Nr&&(f={visible:n.isDatasetVisible(l),index:l,fill:$L(u,l,i),chart:n,axis:o.controller.options.indexAxis,scale:o.vScale,line:u}),o.$filler=f,r.push(f);for(l=0;l<i;++l)f=r[l],!(!f||f.fill===!1)&&(f.fill=QL(r,l,e.propagate))},beforeDraw(n,t,e){const i=e.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),o=n.chartArea;for(let l=r.length-1;l>=0;--l){const u=r[l].$filler;u&&(u.line.updateControlPoints(o,u.axis),i&&u.fill&&Mp(n.ctx,u,o))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const o=i[r].$filler;BE(o)&&Mp(n.ctx,o,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!BE(i)||e.drawTime!=="beforeDatasetDraw"||Mp(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const GE=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},g3=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class YE extends Si{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=ce(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=Ge(i.font),o=r.size,l=this._computeTitleHeight(),{boxWidth:u,itemHeight:f}=GE(i,o);let d,p;e.font=r.string,this.isHorizontal()?(d=this.maxWidth,p=this._fitRows(l,o,u,f)+10):(p=this.maxHeight,d=this._fitCols(l,r,u,f)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(p,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:o,maxWidth:l,options:{labels:{padding:u}}}=this,f=this.legendHitBoxes=[],d=this.lineWidths=[0],p=r+u;let _=t;o.textAlign="left",o.textBaseline="middle";let b=-1,E=-p;return this.legendItems.forEach((w,A)=>{const R=i+e/2+o.measureText(w.text).width;(A===0||d[d.length-1]+R+2*u>l)&&(_+=p,d[d.length-(A>0?0:1)]=0,E+=p,b++),f[A]={left:0,top:E,row:b,width:R,height:r},d[d.length-1]+=R+u}),_}_fitCols(t,e,i,r){const{ctx:o,maxHeight:l,options:{labels:{padding:u}}}=this,f=this.legendHitBoxes=[],d=this.columnSizes=[],p=l-t;let _=u,b=0,E=0,w=0,A=0;return this.legendItems.forEach((R,O)=>{const{itemWidth:q,itemHeight:j}=m3(i,e,o,R,r);O>0&&E+j+2*u>p&&(_+=b+u,d.push({width:b,height:E}),w+=b+u,A++,b=E=0),f[O]={left:w,top:E,col:A,width:q,height:j},b=Math.max(b,q),E+=j+u}),_+=b,d.push({width:b,height:E}),_}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:o}}=this,l=sl(o,this.left,this.width);if(this.isHorizontal()){let u=0,f=hn(i,this.left+r,this.right-this.lineWidths[u]);for(const d of e)u!==d.row&&(u=d.row,f=hn(i,this.left+r,this.right-this.lineWidths[u])),d.top+=this.top+t+r,d.left=l.leftForLtr(l.x(f),d.width),f+=d.width+r}else{let u=0,f=hn(i,this.top+t+r,this.bottom-this.columnSizes[u].height);for(const d of e)d.col!==u&&(u=d.col,f=hn(i,this.top+t+r,this.bottom-this.columnSizes[u].height)),d.top=f,d.left+=this.left+r,d.left=l.leftForLtr(l.x(d.left),d.width),f+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Qd(t,this),this._draw(),$d(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:o,labels:l}=t,u=_e.color,f=sl(t.rtl,this.left,this.width),d=Ge(l.font),{padding:p}=l,_=d.size,b=_/2;let E;this.drawTitle(),r.textAlign=f.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:w,boxHeight:A,itemHeight:R}=GE(l,_),O=function(Y,I,D){if(isNaN(w)||w<=0||isNaN(A)||A<0)return;r.save();const N=Ct(D.lineWidth,1);if(r.fillStyle=Ct(D.fillStyle,u),r.lineCap=Ct(D.lineCap,"butt"),r.lineDashOffset=Ct(D.lineDashOffset,0),r.lineJoin=Ct(D.lineJoin,"miter"),r.lineWidth=N,r.strokeStyle=Ct(D.strokeStyle,u),r.setLineDash(Ct(D.lineDash,[])),l.usePointStyle){const V={radius:A*Math.SQRT2/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:N},k=f.xPlus(Y,w/2),z=I+b;$w(r,V,k,z,l.pointStyleWidth&&w)}else{const V=I+Math.max((_-A)/2,0),k=f.leftForLtr(Y,w),z=Ba(D.borderRadius);r.beginPath(),Object.values(z).some(P=>P!==0)?yu(r,{x:k,y:V,w,h:A,radius:z}):r.rect(k,V,w,A),r.fill(),N!==0&&r.stroke()}r.restore()},q=function(Y,I,D){$a(r,D.text,Y,I+R/2,d,{strikethrough:D.hidden,textAlign:f.textAlign(D.textAlign)})},j=this.isHorizontal(),B=this._computeTitleHeight();j?E={x:hn(o,this.left+p,this.right-i[0]),y:this.top+p+B,line:0}:E={x:this.left+p,y:hn(o,this.top+B+p,this.bottom-e[0].height),line:0},r1(this.ctx,t.textDirection);const U=R+p;this.legendItems.forEach((Y,I)=>{r.strokeStyle=Y.fontColor,r.fillStyle=Y.fontColor;const D=r.measureText(Y.text).width,N=f.textAlign(Y.textAlign||(Y.textAlign=l.textAlign)),V=w+b+D;let k=E.x,z=E.y;f.setWidth(this.width),j?I>0&&k+V+p>this.right&&(z=E.y+=U,E.line++,k=E.x=hn(o,this.left+p,this.right-i[E.line])):I>0&&z+U>this.bottom&&(k=E.x=k+e[E.line].width+p,E.line++,z=E.y=hn(o,this.top+B+p,this.bottom-e[E.line].height));const P=f.x(k);if(O(P,z,Y),k=kP(N,k+w+b,j?k+V:this.right,t.rtl),q(f.x(k),z,Y),j)E.x+=V+p;else if(typeof Y.text!="string"){const Ot=d.lineHeight;E.y+=M1(Y,Ot)+p}else E.y+=U}),a1(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Ge(e.font),r=yn(e.padding);if(!e.display)return;const o=sl(t.rtl,this.left,this.width),l=this.ctx,u=e.position,f=i.size/2,d=r.top+f;let p,_=this.left,b=this.width;if(this.isHorizontal())b=Math.max(...this.lineWidths),p=this.top+d,_=hn(t.align,_,this.right-b);else{const w=this.columnSizes.reduce((A,R)=>Math.max(A,R.height),0);p=d+hn(t.align,this.top,this.bottom-w-t.labels.padding-this._computeTitleHeight())}const E=hn(u,_,_+b);l.textAlign=o.textAlign(A_(u)),l.textBaseline="middle",l.strokeStyle=e.color,l.fillStyle=e.color,l.font=i.string,$a(l,e.text,E,p,i)}_computeTitleHeight(){const t=this.options.title,e=Ge(t.font),i=yn(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,o;if(Ds(t,this.left,this.right)&&Ds(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],Ds(t,r.left,r.left+r.width)&&Ds(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!_3(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,o=g3(r,i);r&&!o&&ce(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!o&&ce(e.onHover,[t,i,this],this)}else i&&ce(e.onClick,[t,i,this],this)}}function m3(n,t,e,i,r){const o=p3(i,n,t,e),l=y3(r,i,t.lineHeight);return{itemWidth:o,itemHeight:l}}function p3(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((o,l)=>o.length>l.length?o:l)),t+e.size/2+i.measureText(r).width}function y3(n,t,e){let i=n;return typeof t.text!="string"&&(i=M1(t,e)),i}function M1(n,t){const e=n.text?n.text.length:0;return t*e}function _3(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var b3={id:"legend",_element:YE,start(n,t,e){const i=n.legend=new YE({ctx:n.ctx,options:e,chart:n});mn.configure(n,i,e),mn.addBox(n,i)},stop(n){mn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;mn.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:o,useBorderRadius:l,borderRadius:u}}=n.legend.options;return n._getSortedDatasetMetas().map(f=>{const d=f.controller.getStyle(e?0:void 0),p=yn(d.borderWidth);return{text:t[f.index].label,fillStyle:d.backgroundColor,fontColor:o,hidden:!f.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:d.borderColor,pointStyle:i||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:l&&(u||d.borderRadius),datasetIndex:f.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class k_ extends Si{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const r=ye(i.text)?i.text.length:1;this._padding=yn(i.padding);const o=r*Ge(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:r,right:o,options:l}=this,u=l.align;let f=0,d,p,_;return this.isHorizontal()?(p=hn(u,i,o),_=e+t,d=o-i):(l.position==="left"?(p=i+t,_=hn(u,r,e),f=Wt*-.5):(p=o-t,_=hn(u,e,r),f=Wt*.5),d=r-e),{titleX:p,titleY:_,maxWidth:d,rotation:f}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Ge(e.font),o=i.lineHeight/2+this._padding.top,{titleX:l,titleY:u,maxWidth:f,rotation:d}=this._drawArgs(o);$a(t,e.text,0,0,i,{color:e.color,maxWidth:f,rotation:d,textAlign:A_(e.align),textBaseline:"middle",translation:[l,u]})}}function v3(n,t){const e=new k_({ctx:n.ctx,options:t,chart:n});mn.configure(n,e,t),mn.addBox(n,e),n.titleBlock=e}var x3={id:"title",_element:k_,start(n,t,e){v3(n,e)},stop(n){const t=n.titleBlock;mn.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;mn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Cf=new WeakMap;var T3={id:"subtitle",start(n,t,e){const i=new k_({ctx:n.ctx,options:e,chart:n});mn.configure(n,i,e),mn.addBox(n,i),Cf.set(n,i)},stop(n){mn.removeBox(n,Cf.get(n)),Cf.delete(n)},beforeUpdate(n,t,e){const i=Cf.get(n);mn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qc={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,o=0;for(t=0,e=n.length;t<e;++t){const u=n[t].element;if(u&&u.hasValue()){const f=u.tooltipPosition();i.add(f.x),r+=f.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((u,f)=>u+f)/i.size,y:r/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,o,l,u;for(o=0,l=n.length;o<l;++o){const f=n[o].element;if(f&&f.hasValue()){const d=f.getCenterPoint(),p=oy(t,d);p<r&&(r=p,u=f)}}if(u){const f=u.tooltipPosition();e=f.x,i=f.y}return{x:e,y:i}}};function Ki(n,t){return t&&(ye(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function ws(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function E3(n,t){const{element:e,datasetIndex:i,index:r}=t,o=n.getDatasetMeta(i).controller,{label:l,value:u}=o.getLabelAndValue(r);return{chart:n,label:l,parsed:o.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:u,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function KE(n,t){const e=n.chart.ctx,{body:i,footer:r,title:o}=n,{boxWidth:l,boxHeight:u}=t,f=Ge(t.bodyFont),d=Ge(t.titleFont),p=Ge(t.footerFont),_=o.length,b=r.length,E=i.length,w=yn(t.padding);let A=w.height,R=0,O=i.reduce((B,U)=>B+U.before.length+U.lines.length+U.after.length,0);if(O+=n.beforeBody.length+n.afterBody.length,_&&(A+=_*d.lineHeight+(_-1)*t.titleSpacing+t.titleMarginBottom),O){const B=t.displayColors?Math.max(u,f.lineHeight):f.lineHeight;A+=E*B+(O-E)*f.lineHeight+(O-1)*t.bodySpacing}b&&(A+=t.footerMarginTop+b*p.lineHeight+(b-1)*t.footerSpacing);let q=0;const j=function(B){R=Math.max(R,e.measureText(B).width+q)};return e.save(),e.font=d.string,ie(n.title,j),e.font=f.string,ie(n.beforeBody.concat(n.afterBody),j),q=t.displayColors?l+2+t.boxPadding:0,ie(i,B=>{ie(B.before,j),ie(B.lines,j),ie(B.after,j)}),q=0,e.font=p.string,ie(n.footer,j),e.restore(),R+=w.width,{width:R,height:A}}function S3(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function A3(n,t,e,i){const{x:r,width:o}=i,l=e.caretSize+e.caretPadding;if(n==="left"&&r+o+l>t.width||n==="right"&&r-o-l<0)return!0}function w3(n,t,e,i){const{x:r,width:o}=e,{width:l,chartArea:{left:u,right:f}}=n;let d="center";return i==="center"?d=r<=(u+f)/2?"left":"right":r<=o/2?d="left":r>=l-o/2&&(d="right"),A3(d,n,t,e)&&(d="center"),d}function XE(n,t,e){const i=e.yAlign||t.yAlign||S3(n,e);return{xAlign:e.xAlign||t.xAlign||w3(n,t,e,i),yAlign:i}}function R3(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function C3(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function WE(n,t,e,i){const{caretSize:r,caretPadding:o,cornerRadius:l}=n,{xAlign:u,yAlign:f}=e,d=r+o,{topLeft:p,topRight:_,bottomLeft:b,bottomRight:E}=Ba(l);let w=R3(t,u);const A=C3(t,f,d);return f==="center"?u==="left"?w+=d:u==="right"&&(w-=d):u==="left"?w-=Math.max(p,b)+r:u==="right"&&(w+=Math.max(_,E)+r),{x:Je(w,0,i.width-t.width),y:Je(A,0,i.height-t.height)}}function If(n,t,e){const i=yn(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function QE(n){return Ki([],ws(n))}function I3(n,t,e){return Qr(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function $E(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const N1={beforeTitle:Ss,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Ss,beforeBody:Ss,beforeLabel:Ss,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Vt(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Ss,afterBody:Ss,beforeFooter:Ss,footer:Ss,afterFooter:Ss};function In(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?N1[t].call(e,i):r}class py extends Si{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,o=new h1(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=I3(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=In(i,"beforeTitle",this,t),o=In(i,"title",this,t),l=In(i,"afterTitle",this,t);let u=[];return u=Ki(u,ws(r)),u=Ki(u,ws(o)),u=Ki(u,ws(l)),u}getBeforeBody(t,e){return QE(In(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return ie(t,o=>{const l={before:[],lines:[],after:[]},u=$E(i,o);Ki(l.before,ws(In(u,"beforeLabel",this,o))),Ki(l.lines,In(u,"label",this,o)),Ki(l.after,ws(In(u,"afterLabel",this,o))),r.push(l)}),r}getAfterBody(t,e){return QE(In(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=In(i,"beforeFooter",this,t),o=In(i,"footer",this,t),l=In(i,"afterFooter",this,t);let u=[];return u=Ki(u,ws(r)),u=Ki(u,ws(o)),u=Ki(u,ws(l)),u}_createItems(t){const e=this._active,i=this.chart.data,r=[],o=[],l=[];let u=[],f,d;for(f=0,d=e.length;f<d;++f)u.push(E3(this.chart,e[f]));return t.filter&&(u=u.filter((p,_,b)=>t.filter(p,_,b,i))),t.itemSort&&(u=u.sort((p,_)=>t.itemSort(p,_,i))),ie(u,p=>{const _=$E(t.callbacks,p);r.push(In(_,"labelColor",this,p)),o.push(In(_,"labelPointStyle",this,p)),l.push(In(_,"labelTextColor",this,p))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=u,u}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let o,l=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const u=qc[i.position].call(this,r,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const f=this._size=KE(this,i),d=Object.assign({},u,f),p=XE(this.chart,i,d),_=WE(i,d,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,o={opacity:1,x:_.x,y:_.y,width:f.width,height:f.height,caretX:u.x,caretY:u.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const o=this.getCaretPosition(t,i,r);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:o}=this,{caretSize:l,cornerRadius:u}=i,{topLeft:f,topRight:d,bottomLeft:p,bottomRight:_}=Ba(u),{x:b,y:E}=t,{width:w,height:A}=e;let R,O,q,j,B,U;return o==="center"?(B=E+A/2,r==="left"?(R=b,O=R-l,j=B+l,U=B-l):(R=b+w,O=R+l,j=B-l,U=B+l),q=R):(r==="left"?O=b+Math.max(f,p)+l:r==="right"?O=b+w-Math.max(d,_)-l:O=this.caretX,o==="top"?(j=E,B=j-l,R=O-l,q=O+l):(j=E+A,B=j+l,R=O+l,q=O-l),U=j),{x1:R,x2:O,x3:q,y1:j,y2:B,y3:U}}drawTitle(t,e,i){const r=this.title,o=r.length;let l,u,f;if(o){const d=sl(i.rtl,this.x,this.width);for(t.x=If(this,i.titleAlign,i),e.textAlign=d.textAlign(i.titleAlign),e.textBaseline="middle",l=Ge(i.titleFont),u=i.titleSpacing,e.fillStyle=i.titleColor,e.font=l.string,f=0;f<o;++f)e.fillText(r[f],d.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+u,f+1===o&&(t.y+=i.titleMarginBottom-u)}}_drawColorBox(t,e,i,r,o){const l=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:f,boxWidth:d}=o,p=Ge(o.bodyFont),_=If(this,"left",o),b=r.x(_),E=f<p.lineHeight?(p.lineHeight-f)/2:0,w=e.y+E;if(o.usePointStyle){const A={radius:Math.min(d,f)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},R=r.leftForLtr(b,d)+d/2,O=w+f/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,cy(t,A,R,O),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,cy(t,A,R,O)}else{t.lineWidth=Ht(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const A=r.leftForLtr(b,d),R=r.leftForLtr(r.xPlus(b,1),d-2),O=Ba(l.borderRadius);Object.values(O).some(q=>q!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,yu(t,{x:A,y:w,w:d,h:f,radius:O}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),yu(t,{x:R,y:w+1,w:d-2,h:f-2,radius:O}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(A,w,d,f),t.strokeRect(A,w,d,f),t.fillStyle=l.backgroundColor,t.fillRect(R,w+1,d-2,f-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:o,bodyAlign:l,displayColors:u,boxHeight:f,boxWidth:d,boxPadding:p}=i,_=Ge(i.bodyFont);let b=_.lineHeight,E=0;const w=sl(i.rtl,this.x,this.width),A=function(D){e.fillText(D,w.x(t.x+E),t.y+b/2),t.y+=b+o},R=w.textAlign(l);let O,q,j,B,U,Y,I;for(e.textAlign=l,e.textBaseline="middle",e.font=_.string,t.x=If(this,R,i),e.fillStyle=i.bodyColor,ie(this.beforeBody,A),E=u&&R!=="right"?l==="center"?d/2+p:d+2+p:0,B=0,Y=r.length;B<Y;++B){for(O=r[B],q=this.labelTextColors[B],e.fillStyle=q,ie(O.before,A),j=O.lines,u&&j.length&&(this._drawColorBox(e,t,B,w,i),b=Math.max(_.lineHeight,f)),U=0,I=j.length;U<I;++U)A(j[U]),b=_.lineHeight;ie(O.after,A)}E=0,b=_.lineHeight,ie(this.afterBody,A),t.y-=o}drawFooter(t,e,i){const r=this.footer,o=r.length;let l,u;if(o){const f=sl(i.rtl,this.x,this.width);for(t.x=If(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=f.textAlign(i.footerAlign),e.textBaseline="middle",l=Ge(i.footerFont),e.fillStyle=i.footerColor,e.font=l.string,u=0;u<o;++u)e.fillText(r[u],f.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:o,yAlign:l}=this,{x:u,y:f}=t,{width:d,height:p}=i,{topLeft:_,topRight:b,bottomLeft:E,bottomRight:w}=Ba(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(u+_,f),l==="top"&&this.drawCaret(t,e,i,r),e.lineTo(u+d-b,f),e.quadraticCurveTo(u+d,f,u+d,f+b),l==="center"&&o==="right"&&this.drawCaret(t,e,i,r),e.lineTo(u+d,f+p-w),e.quadraticCurveTo(u+d,f+p,u+d-w,f+p),l==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(u+E,f+p),e.quadraticCurveTo(u,f+p,u,f+p-E),l==="center"&&o==="left"&&this.drawCaret(t,e,i,r),e.lineTo(u,f+_),e.quadraticCurveTo(u,f,u+_,f),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,o=i&&i.y;if(r||o){const l=qc[t.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=KE(this,t),f=Object.assign({},l,this._size),d=XE(e,t,f),p=WE(t,f,d,e);(r._to!==p.x||o._to!==p.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=yn(e.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&u&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,r,e),r1(t,e.textDirection),o.y+=l.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),a1(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:u,index:f})=>{const d=this.chart.getDatasetMeta(u);if(!d)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:d.data[f],index:f}}),o=!_d(i,r),l=this._positionChanged(r,e);(o||l)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],l=this._getActiveElements(t,o,e,i),u=this._positionChanged(l,t),f=e||!_d(l,o)||u;return f&&(this._active=l,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),f}_getActiveElements(t,e,i,r){const o=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const l=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&l.reverse(),l}_positionChanged(t,e){const{caretX:i,caretY:r,options:o}=this,l=qc[o.position].call(this,t,e);return l!==!1&&(i!==l.x||r!==l.y)}}ct(py,"positioners",qc);var D3={id:"tooltip",_element:py,positioners:qc,afterInit(n,t,e){e&&(n.tooltip=new py({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:N1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},M3=Object.freeze({__proto__:null,Colors:HL,Decimation:KL,Filler:d3,Legend:b3,SubTitle:T3,Title:x3,Tooltip:D3});const N3=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function O3(n,t,e,i){const r=n.indexOf(t);if(r===-1)return N3(n,t,e,i);const o=n.lastIndexOf(t);return r!==o?e:r}const k3=(n,t)=>n===null?null:Je(Math.round(n),0,t);function JE(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class yy extends eo{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:r,label:o}of e)i[r]===o&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Vt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:O3(i,t,Ct(e,t),this._addedLabels),k3(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,r=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=t;l<=e;l++)r.push({value:l});return r}getLabelForValue(t){return JE.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ct(yy,"id","category"),ct(yy,"defaults",{ticks:{callback:JE}});function P3(n,t){const e=[],{bounds:r,step:o,min:l,max:u,precision:f,count:d,maxTicks:p,maxDigits:_,includeBounds:b}=n,E=o||1,w=p-1,{min:A,max:R}=t,O=!Vt(l),q=!Vt(u),j=!Vt(d),B=(R-A)/(_+1);let U=KT((R-A)/w/E)*E,Y,I,D,N;if(U<1e-14&&!O&&!q)return[{value:A},{value:R}];N=Math.ceil(R/U)-Math.floor(A/U),N>w&&(U=KT(N*U/w/E)*E),Vt(f)||(Y=Math.pow(10,f),U=Math.ceil(U*Y)/Y),r==="ticks"?(I=Math.floor(A/U)*U,D=Math.ceil(R/U)*U):(I=A,D=R),O&&q&&o&&RP((u-l)/o,U/1e3)?(N=Math.round(Math.min((u-l)/U,p)),U=(u-l)/N,I=l,D=u):j?(I=O?l:I,D=q?u:D,N=d-1,U=(D-I)/N):(N=(D-I)/U,Zc(N,Math.round(N),U/1e3)?N=Math.round(N):N=Math.ceil(N));const V=Math.max(XT(U),XT(I));Y=Math.pow(10,Vt(f)?V:f),I=Math.round(I*Y)/Y,D=Math.round(D*Y)/Y;let k=0;for(O&&(b&&I!==l?(e.push({value:l}),I<l&&k++,Zc(Math.round((I+k*U)*Y)/Y,l,ZE(l,B,n))&&k++):I<l&&k++);k<N;++k){const z=Math.round((I+k*U)*Y)/Y;if(q&&z>u)break;e.push({value:z})}return q&&b&&D!==u?e.length&&Zc(e[e.length-1].value,u,ZE(u,B,n))?e[e.length-1].value=u:e.push({value:u}):(!q||D===u)&&e.push({value:D}),e}function ZE(n,t,{horizontal:e,minRotation:i}){const r=xi(i),o=(e?Math.sin(r):Math.cos(r))||.001,l=.75*t*(""+n).length;return Math.min(t/o,l)}class Ad extends eo{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Vt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:o}=this;const l=f=>r=e?r:f,u=f=>o=i?o:f;if(t){const f=ns(r),d=ns(o);f<0&&d<0?u(0):f>0&&d>0&&l(0)}if(r===o){let f=o===0?1:Math.abs(o*.05);u(o+f),t||l(r-f)}this.min=r,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,l=P3(r,o);return t.bounds==="ticks"&&Fw(l,this,"value"),t.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Pu(t,this.chart.options.locale,this.options.ticks.format)}}class _y extends Ad{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Te(t)?t:0,this.max=Te(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=xi(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ct(_y,"id","linear"),ct(_y,"defaults",{ticks:{callback:Wd.formatters.numeric}});const bu=n=>Math.floor(Dr(n)),Ma=(n,t)=>Math.pow(10,bu(n)+t);function tS(n){return n/Math.pow(10,bu(n))===1}function eS(n,t,e){const i=Math.pow(10,e),r=Math.floor(n/i);return Math.ceil(t/i)-r}function V3(n,t){const e=t-n;let i=bu(e);for(;eS(n,t,i)>10;)i++;for(;eS(n,t,i)<10;)i--;return Math.min(i,bu(n))}function L3(n,{min:t,max:e}){t=Hn(n.min,t);const i=[],r=bu(t);let o=V3(t,e),l=o<0?Math.pow(10,Math.abs(o)):1;const u=Math.pow(10,o),f=r>o?Math.pow(10,r):0,d=Math.round((t-f)*l)/l,p=Math.floor((t-f)/u/10)*u*10;let _=Math.floor((d-p)/Math.pow(10,o)),b=Hn(n.min,Math.round((f+p+_*Math.pow(10,o))*l)/l);for(;b<e;)i.push({value:b,major:tS(b),significand:_}),_>=10?_=_<15?15:20:_++,_>=20&&(o++,_=2,l=o>=0?1:l),b=Math.round((f+p+_*Math.pow(10,o))*l)/l;const E=Hn(n.max,b);return i.push({value:E,major:tS(E),significand:_}),i}class by extends eo{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Ad.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return Te(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Te(t)?Math.max(0,t):null,this.max=Te(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Te(this._userMin)&&(this.min=t===Ma(this.min,0)?Ma(this.min,-1):Ma(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,r=this.max;const o=u=>i=t?i:u,l=u=>r=e?r:u;i===r&&(i<=0?(o(1),l(10)):(o(Ma(i,-1)),l(Ma(r,1)))),i<=0&&o(Ma(r,-1)),r<=0&&l(Ma(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=L3(e,this);return t.bounds==="ticks"&&Fw(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Pu(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Dr(t),this._valueRange=Dr(this.max)-Dr(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Dr(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}ct(by,"id","logarithmic"),ct(by,"defaults",{ticks:{callback:Wd.formatters.logarithmic,major:{enabled:!0}}});function vy(n){const t=n.ticks;if(t.display&&n.display){const e=yn(t.backdropPadding);return Ct(t.font&&t.font.size,_e.font.size)+e.height}return 0}function j3(n,t,e){return e=ye(e)?e:[e],{w:qP(n,t.string,e),h:e.length*t.lineHeight}}function nS(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function z3(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],o=n._pointLabels.length,l=n.options.pointLabels,u=l.centerPointLabels?Wt/o:0;for(let f=0;f<o;f++){const d=l.setContext(n.getPointLabelContext(f));r[f]=d.padding;const p=n.getPointPosition(f,n.drawingArea+r[f],u),_=Ge(d.font),b=j3(n.ctx,_,n._pointLabels[f]);i[f]=b;const E=dn(n.getIndexAngle(f)+u),w=Math.round(E_(E)),A=nS(w,p.x,b.w,0,180),R=nS(w,p.y,b.h,90,270);U3(e,t,E,A,R)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=H3(n,i,r)}function U3(n,t,e,i,r){const o=Math.abs(Math.sin(e)),l=Math.abs(Math.cos(e));let u=0,f=0;i.start<t.l?(u=(t.l-i.start)/o,n.l=Math.min(n.l,t.l-u)):i.end>t.r&&(u=(i.end-t.r)/o,n.r=Math.max(n.r,t.r+u)),r.start<t.t?(f=(t.t-r.start)/l,n.t=Math.min(n.t,t.t-f)):r.end>t.b&&(f=(r.end-t.b)/l,n.b=Math.max(n.b,t.b+f))}function B3(n,t,e){const i=n.drawingArea,{extra:r,additionalAngle:o,padding:l,size:u}=e,f=n.getPointPosition(t,i+r+l,o),d=Math.round(E_(dn(f.angle+Ie))),p=Y3(f.y,u.h,d),_=q3(d),b=G3(f.x,u.w,_);return{visible:!0,x:f.x,y:p,textAlign:_,left:b,top:p,right:b+u.w,bottom:p+u.h}}function F3(n,t){if(!t)return!0;const{left:e,top:i,right:r,bottom:o}=n;return!(Ns({x:e,y:i},t)||Ns({x:e,y:o},t)||Ns({x:r,y:i},t)||Ns({x:r,y:o},t))}function H3(n,t,e){const i=[],r=n._pointLabels.length,o=n.options,{centerPointLabels:l,display:u}=o.pointLabels,f={extra:vy(o)/2,additionalAngle:l?Wt/r:0};let d;for(let p=0;p<r;p++){f.padding=e[p],f.size=t[p];const _=B3(n,p,f);i.push(_),u==="auto"&&(_.visible=F3(_,d),_.visible&&(d=_))}return i}function q3(n){return n===0||n===180?"center":n<180?"left":"right"}function G3(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function Y3(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function K3(n,t,e){const{left:i,top:r,right:o,bottom:l}=e,{backdropColor:u}=t;if(!Vt(u)){const f=Ba(t.borderRadius),d=yn(t.backdropPadding);n.fillStyle=u;const p=i-d.left,_=r-d.top,b=o-i+d.width,E=l-r+d.height;Object.values(f).some(w=>w!==0)?(n.beginPath(),yu(n,{x:p,y:_,w:b,h:E,radius:f}),n.fill()):n.fillRect(p,_,b,E)}}function X3(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){const o=n._pointLabelItems[r];if(!o.visible)continue;const l=i.setContext(n.getPointLabelContext(r));K3(e,l,o);const u=Ge(l.font),{x:f,y:d,textAlign:p}=o;$a(e,n._pointLabels[r],f,d+u.lineHeight/2,u,{color:l.color,textAlign:p,textBaseline:"middle"})}}function O1(n,t,e,i){const{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,de);else{let o=n.getPointPosition(0,t);r.moveTo(o.x,o.y);for(let l=1;l<i;l++)o=n.getPointPosition(l,t),r.lineTo(o.x,o.y)}}function W3(n,t,e,i,r){const o=n.ctx,l=t.circular,{color:u,lineWidth:f}=t;!l&&!i||!u||!f||e<0||(o.save(),o.strokeStyle=u,o.lineWidth=f,o.setLineDash(r.dash||[]),o.lineDashOffset=r.dashOffset,o.beginPath(),O1(n,e,l,i),o.closePath(),o.stroke(),o.restore())}function Q3(n,t,e){return Qr(n,{label:e,index:t,type:"pointLabel"})}class Gc extends Ad{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=yn(vy(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Te(t)&&!isNaN(t)?t:0,this.max=Te(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/vy(this.options))}generateTickLabels(t){Ad.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const r=ce(this.options.pointLabels.callback,[e,i],this);return r||r===0?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?z3(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){const e=de/(this._pointLabels.length||1),i=this.options.startAngle||0;return dn(t*e+xi(i))}getDistanceFromCenterForValue(t){if(Vt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Vt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return Q3(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const r=this.getIndexAngle(t)-Ie+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:r,bottom:o}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),O1(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:r,border:o}=e,l=this._pointLabels.length;let u,f,d;if(e.pointLabels.display&&X3(this,l),r.display&&this.ticks.forEach((p,_)=>{if(_!==0||_===0&&this.min<0){f=this.getDistanceFromCenterForValue(p.value);const b=this.getContext(_),E=r.setContext(b),w=o.setContext(b);W3(this,E,f,l,w)}}),i.display){for(t.save(),u=l-1;u>=0;u--){const p=i.setContext(this.getPointLabelContext(u)),{color:_,lineWidth:b}=p;!b||!_||(t.lineWidth=b,t.strokeStyle=_,t.setLineDash(p.borderDash),t.lineDashOffset=p.borderDashOffset,f=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),d=this.getPointPosition(u,f),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(d.x,d.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let o,l;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((u,f)=>{if(f===0&&this.min>=0&&!e.reverse)return;const d=i.setContext(this.getContext(f)),p=Ge(d.font);if(o=this.getDistanceFromCenterForValue(this.ticks[f].value),d.showLabelBackdrop){t.font=p.string,l=t.measureText(u.label).width,t.fillStyle=d.backdropColor;const _=yn(d.backdropPadding);t.fillRect(-l/2-_.left,-o-p.size/2-_.top,l+_.width,p.size+_.height)}$a(t,u.label,0,-o,p,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),t.restore()}drawTitle(){}}ct(Gc,"id","radialLinear"),ct(Gc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Wd.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),ct(Gc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ct(Gc,"descriptors",{angleLines:{_fallback:"grid"}});const eg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Nn=Object.keys(eg);function iS(n,t){return n-t}function sS(n,t){if(Vt(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:o}=n._parseOpts;let l=t;return typeof i=="function"&&(l=i(l)),Te(l)||(l=typeof i=="string"?e.parse(l,i):e.parse(l)),l===null?null:(r&&(l=r==="week"&&(dl(o)||o===!0)?e.startOf(l,"isoWeek",o):e.startOf(l,r)),+l)}function rS(n,t,e,i){const r=Nn.length;for(let o=Nn.indexOf(n);o<r-1;++o){const l=eg[Nn[o]],u=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((e-t)/(u*l.size))<=i)return Nn[o]}return Nn[r-1]}function $3(n,t,e,i,r){for(let o=Nn.length-1;o>=Nn.indexOf(e);o--){const l=Nn[o];if(eg[l].common&&n._adapter.diff(r,i,l)>=t-1)return l}return Nn[e?Nn.indexOf(e):0]}function J3(n){for(let t=Nn.indexOf(n)+1,e=Nn.length;t<e;++t)if(eg[Nn[t]].common)return Nn[t]}function aS(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=S_(e,t),o=e[i]>=t?e[i]:e[r];n[o]=!0}}function Z3(n,t,e,i){const r=n._adapter,o=+r.startOf(t[0].value,i),l=t[t.length-1].value;let u,f;for(u=o;u<=l;u=+r.add(u,1,i))f=e[u],f>=0&&(t[f].major=!0);return t}function oS(n,t,e){const i=[],r={},o=t.length;let l,u;for(l=0;l<o;++l)u=t[l],r[u]=l,i.push({value:u,major:!1});return o===0||!e?i:Z3(n,i,r,e)}class vu extends eo{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new o4._date(t.adapters.date);r.init(e),Jc(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:sS(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:o,minDefined:l,maxDefined:u}=this.getUserBounds();function f(d){!l&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!u&&!isNaN(d.max)&&(o=Math.max(o,d.max))}(!l||!u)&&(f(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&f(this.getMinMax(!1))),r=Te(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),o=Te(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,l=this.max,u=MP(r,o,l);return this._unit=e.unit||(i.autoSkip?rS(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):$3(this,u.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:J3(this._unit),this.initOffsets(r),t.reverse&&u.reverse(),oS(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,o;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;e=Je(e,0,l),i=Je(i,0,l),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,o=r.time,l=o.unit||rS(o.minUnit,e,i,this._getLabelCapacity(e)),u=Ct(r.ticks.stepSize,1),f=l==="week"?o.isoWeekday:!1,d=dl(f)||f===!0,p={};let _=e,b,E;if(d&&(_=+t.startOf(_,"isoWeek",f)),_=+t.startOf(_,d?"day":l),t.diff(i,e,l)>1e5*u)throw new Error(e+" and "+i+" are too far apart with stepSize of "+u+" "+l);const w=r.ticks.source==="data"&&this.getDataTimestamps();for(b=_,E=0;b<i;b=+t.add(b,u,l),E++)aS(p,b,w);return(b===i||r.bounds==="ticks"||E===1)&&aS(p,b,w),Object.keys(p).sort(iS).map(A=>+A)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,o=this._unit,l=e||r[o];return this._adapter.format(t,l)}_tickFormatFunction(t,e,i,r){const o=this.options,l=o.ticks.callback;if(l)return ce(l,[t,e,i],this);const u=o.time.displayFormats,f=this._unit,d=this._majorUnit,p=f&&u[f],_=d&&u[d],b=i[e],E=d&&_&&b&&b.major;return this._adapter.format(t,r||(E?_:p))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=xi(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(r),l=Math.sin(r),u=this._resolveTickFontOptions(0).size;return{w:i*o+u*l,h:i*l+u*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,oS(this,[t],this._majorUnit),r),l=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(sS(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Gw(t.sort(iS))}}ct(vu,"id","time"),ct(vu,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Df(n,t,e){let i=0,r=n.length-1,o,l,u,f;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=Ms(n,"pos",t)),{pos:o,time:u}=n[i],{pos:l,time:f}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=Ms(n,"time",t)),{time:o,pos:u}=n[i],{time:l,pos:f}=n[r]);const d=l-o;return d?u+(f-u)*(t-o)/d:u}class xy extends vu{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Df(e,this.min),this._tableRange=Df(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],o=[];let l,u,f,d,p;for(l=0,u=t.length;l<u;++l)d=t[l],d>=e&&d<=i&&r.push(d);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(l=0,u=r.length;l<u;++l)p=r[l+1],f=r[l-1],d=r[l],Math.round((p+f)/2)!==d&&o.push({time:d,pos:l/(u-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,o)=>r-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Df(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Df(this._table,i*this._tableRange+this._minPos,!0)}}ct(xy,"id","timeseries"),ct(xy,"defaults",vu.defaults);var t6=Object.freeze({__proto__:null,CategoryScale:yy,LinearScale:_y,LogarithmicScale:by,RadialLinearScale:Gc,TimeScale:vu,TimeSeriesScale:xy});const ng=[a4,VL,M3,t6];xn.register(...ng);const e6=({data:n})=>{const t=ht.useRef(null),e=ht.useRef(null);return ht.useEffect(()=>{if(t.current){e.current&&e.current.destroy();const i=t.current.getContext("2d");i&&(e.current=new xn(i,{type:"pie",data:{labels:Object.keys(n),datasets:[{data:Object.values(n),backgroundColor:["#f59e0b","#10a5e8","#ef4444"],borderColor:"#fff",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}}))}return()=>{e.current&&e.current.destroy()}},[n]),S.jsx("canvas",{ref:t})};xn.register(...ng);const n6=({data:n})=>{const t=ht.useRef(null),e=ht.useRef(null);return ht.useEffect(()=>{if(t.current){e.current&&e.current.destroy();const i=t.current.getContext("2d");if(i){const r=Object.keys(n),o=r.map(u=>n[u].target),l=r.map(u=>n[u].actual);e.current=new xn(i,{type:"bar",data:{labels:r,datasets:[{label:"Target (Rs)",data:o,backgroundColor:"#10a5e8",barThickness:20},{label:"Actual (Rs)",data:l,backgroundColor:"#10b981",barThickness:20}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{stacked:!1},y:{stacked:!1,beginAtZero:!0,ticks:{callback:function(u){if(typeof u=="number"){if(u>=1e6)return u/1e6+"M";if(u>=1e3)return u/1e3+"K"}return u}}}},plugins:{tooltip:{callbacks:{label:function(u){let f=u.dataset.label||"";return f&&(f+=": "),u.parsed.y!==null&&(f+=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(u.parsed.y)),f}}}}}})}}return()=>{e.current&&e.current.destroy()}},[n]),S.jsx("canvas",{ref:t})};xn.register(...ng);const i6=({data:n})=>{const t=ht.useRef(null),e=ht.useRef(null);return ht.useEffect(()=>{if(!t.current)return;e.current&&e.current.destroy();const i=t.current.getContext("2d");if(!i)return;const r=Object.keys(n),o=r.map(u=>n[u].target),l=r.map(u=>n[u].actual);return e.current=new xn(i,{type:"bar",data:{labels:r,datasets:[{label:"Target ()",data:o,backgroundColor:"#10a5e8",barThickness:22},{label:"Actual ()",data:l,backgroundColor:"#10b981",barThickness:22}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{callback(u){if(typeof u=="number"){if(u>=1e6)return u/1e6+"M";if(u>=1e3)return u/1e3+"K"}return u}}}},plugins:{tooltip:{callbacks:{label(u){return`${u.dataset.label}: ${u.parsed.y.toLocaleString("en-IN")}`}}}}}}),()=>{e.current&&e.current.destroy()}},[n]),S.jsx("canvas",{ref:t,style:{width:"100%",height:"100%"}})};xn.register(...ng);const s6=({data:n})=>{const t=ht.useRef(null),e=ht.useRef(null);return ht.useEffect(()=>{if(!t.current)return;e.current&&e.current.destroy();const i=t.current.getContext("2d");if(!i)return;const r=Object.keys(n),l=Array.from(new Set(Object.values(n).flatMap(u=>Object.keys(u)))).map((u,f)=>({label:u,data:r.map(d=>n[d][u]||0),backgroundColor:`hsl(${f*55%360}, 70%, 55%)`,stack:"units"}));return e.current=new xn(i,{type:"bar",data:{labels:r,datasets:l},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{stacked:!0},y:{beginAtZero:!0,stacked:!0,ticks:{callback(u){if(typeof u=="number"){if(u>=1e6)return u/1e6+"M";if(u>=1e3)return u/1e3+"K"}return u}}}}}}),()=>{e.current&&e.current.destroy()}},[n]),S.jsx("canvas",{ref:t,style:{width:"100%",height:"100%"}})},Na=({title:n,value:t,valueClass:e="text-secondary",prefix:i="",suffix:r=""})=>S.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[S.jsx("p",{className:"text-sm font-medium text-gray-500 truncate",children:n}),S.jsxs("p",{className:`mt-1 text-2xl md:text-3xl font-bold ${e}`,children:[i,t,r]})]}),lS=({userProfile:n,plans:t})=>{const[e,i]=ht.useState("auto"),[r,o]=ht.useState(""),[l,u]=ht.useState(""),[f,d]=ht.useState(""),[p,_]=ht.useState(""),b=ht.useMemo(()=>__(t,n),[t,n]),E=R=>R?typeof R.toDate=="function"?R.toDate():new Date(R):new Date,w=ht.useMemo(()=>b.filter(R=>!(r&&R.salespersonName!==r||l&&R.branch!==l||f&&E(R.startDate).getFullYear().toString()!==f||p&&(E(R.startDate).getMonth()+1).toString()!==p)),[b,r,l,f,p]),A=ht.useMemo(()=>{let R=0,O=0;const q={Pending:0,"Visit Done":0,"Not Visit":0},j={},B={},U={};return w.forEach(Y=>{Y.customers.forEach(I=>q[I.visitStatus]++),Y.unitTargets.forEach(I=>{R+=I.target||0,j[I.unit]=j[I.unit]||{target:0,actual:0},j[I.unit].target+=I.target||0,B[Y.branch]||(B[Y.branch]={target:0,actual:0}),B[Y.branch].target+=I.target||0}),Y.unitActuals.forEach(I=>{O+=I.actual||0,j[I.unit]=j[I.unit]||{target:0,actual:0},j[I.unit].actual+=I.actual||0,B[Y.branch].actual+=I.actual||0,U[Y.branch]||(U[Y.branch]={}),U[Y.branch][I.unit]=(U[Y.branch][I.unit]||0)+I.actual})}),{totalTarget:R,totalActual:O,achievement:R>0?O/R*100:0,visitStatusCounts:q,unitData:j,branchPerformance:B,unitByBranch:U,salesPersonCount:new Set(w.map(Y=>Y.salespersonId)).size,branchCount:new Set(w.map(Y=>Y.branch)).size,customerCount:new Set(w.flatMap(Y=>Y.customers.map(I=>I.name.trim()))).size}},[w]);return S.jsxs("div",{className:"space-y-4 md:space-y-6",children:[S.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[S.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"Sales Dashboard"}),S.jsxs("div",{className:"flex gap-2 items-center flex-wrap w-full md:w-auto justify-start md:justify-end",children:[S.jsxs("div",{className:"bg-white p-2 md:p-3 rounded-lg shadow-sm border flex-1 min-w-[150px] md:min-w-[200px]",children:[S.jsx("label",{className:"text-xs text-gray-700 block",children:"Employee"}),S.jsxs("select",{value:r,onChange:R=>o(R.target.value),className:"w-full px-2 py-1 border rounded-md text-sm",children:[S.jsx("option",{value:"",children:"All"}),Array.from(new Set(b.map(R=>R.salespersonName))).map(R=>S.jsx("option",{children:R},R))]})]}),((n==null?void 0:n.role)==="Master"||(n==null?void 0:n.role)==="Branch Head")&&S.jsxs("div",{className:"bg-white p-2 md:p-3 rounded-lg shadow-sm border flex-1 min-w-[150px] md:min-w-[180px]",children:[S.jsx("label",{className:"text-xs text-gray-700 block",children:"Branch"}),S.jsxs("select",{value:l,onChange:R=>u(R.target.value),className:"w-full px-2 py-1 border rounded-md text-sm",children:[S.jsx("option",{value:"",children:"All"}),Array.from(new Set(b.map(R=>R.branch))).map(R=>S.jsx("option",{children:R},R))]})]}),S.jsxs("div",{className:"bg-white p-2 md:p-3 rounded-lg shadow-sm border flex-1 min-w-[120px] md:min-w-[150px]",children:[S.jsx("label",{className:"text-xs text-gray-700 block",children:"Year"}),S.jsxs("select",{value:f,onChange:R=>d(R.target.value),className:"w-full px-2 py-1 border rounded-md text-sm",children:[S.jsx("option",{value:"",children:"Any"}),Array.from(new Set(b.map(R=>E(R.startDate).getFullYear().toString()))).map(R=>S.jsx("option",{children:R},R))]})]}),S.jsxs("div",{className:"bg-white p-2 md:p-3 rounded-lg shadow-sm border flex-1 min-w-[120px] md:min-w-[150px]",children:[S.jsx("label",{className:"text-xs text-gray-700 block",children:"Month"}),S.jsxs("select",{value:p,onChange:R=>_(R.target.value),className:"w-full px-2 py-1 border rounded-md text-sm",children:[S.jsx("option",{value:"",children:"Any"}),[...Array(12)].map((R,O)=>S.jsx("option",{children:O+1},O+1))]})]}),S.jsxs("div",{className:"bg-white p-2 md:p-3 rounded-lg shadow-sm border flex-1 min-w-[150px] md:min-w-[180px]",children:[S.jsx("label",{className:"text-xs text-gray-700 block",children:"Display Unit"}),S.jsxs("select",{value:e,onChange:R=>i(R.target.value),className:"w-full px-2 py-1 border rounded-md text-sm",children:[S.jsx("option",{value:"auto",children:"Auto"}),S.jsx("option",{value:"K",children:"Thousands (K)"}),S.jsx("option",{value:"M",children:"Millions (M)"})]})]})]})]}),S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-5",children:[S.jsx(Na,{title:"Total Target",value:zT(A.totalTarget,e),prefix:"",valueClass:"text-primary"}),S.jsx(Na,{title:"Total Actual",value:zT(A.totalActual,e),prefix:"",valueClass:"text-green-600"}),S.jsx(Na,{title:"Achievement",value:A.achievement.toFixed(2),suffix:"%",valueClass:A.achievement>=100?"text-green-600":"text-red-500"}),S.jsx(Na,{title:"Visits Done",value:A.visitStatusCounts["Visit Done"]})]}),S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4",children:[S.jsx(Na,{title:"Sales Persons",value:A.salesPersonCount}),S.jsx(Na,{title:"Active Branches",value:A.branchCount}),S.jsx(Na,{title:"Unique Customers",value:A.customerCount})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[S.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-xl shadow-lg",children:[S.jsx("h3",{className:"text-base md:text-lg font-semibold mb-4",children:"Visit Status Summary"}),S.jsx("div",{className:"h-64 md:h-80",children:S.jsx(e6,{data:A.visitStatusCounts})})]}),S.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-xl shadow-lg lg:col-span-2",children:[S.jsx("h3",{className:"text-base md:text-lg font-semibold mb-4",children:"Target Vs Actual  Unit Wise"}),S.jsx("div",{className:"h-64 md:h-80",children:S.jsx(n6,{data:A.unitData})})]})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[S.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-xl shadow-lg",children:[S.jsx("h3",{className:"text-base md:text-lg font-semibold mb-4",children:"Target vs Actual  Branch Wise"}),S.jsx("div",{className:"h-64 md:h-80",children:S.jsx(i6,{data:A.branchPerformance})})]}),S.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-xl shadow-lg",children:[S.jsx("h3",{className:"text-base md:text-lg font-semibold mb-4",children:"Unit by Branch  Stacked Bar Chart"}),S.jsx("div",{className:"h-64 md:h-80",children:S.jsx(s6,{data:A.unitByBranch})})]})]})]})},r6=({userProfile:n,setPage:t})=>{const e=new Date().toISOString().split("T")[0],[i,r]=ht.useState(e),[o,l]=ht.useState(""),[u,f]=ht.useState([]),[d,p]=ht.useState(()=>Vw.map(U=>({unit:U,target:0}))),[_,b]=ht.useState(""),[E,w]=ht.useState(!1),A=ht.useRef(null);ht.useEffect(()=>{A.current&&A.current.focus()},[u.length]);const R=()=>{_.trim()?(f(U=>[...U,{name:_.trim(),visitStatus:"Pending",remark:""}]),b("")):f(U=>[...U,{name:"",visitStatus:"Pending",remark:""}])},O=(U,Y)=>{const I=[...u];I[U].name=Y,f(I)},q=U=>{u.length>1?f(Y=>Y.filter((I,D)=>D!==U)):f([{name:""}])},j=(U,Y)=>{const I=[...d],D=I.findIndex(N=>N.unit===U);D>-1&&(I[D].target=parseInt(Y,10)||0,p(I))},B=async U=>{if(U.preventDefault(),!n||!i||!o){alert("Please fill in all required fields.");return}const Y=u.filter(D=>D.name&&D.name.trim()!=="");if(Y.length===0){alert("Please add at least one customer.");return}w(!0);const I={salespersonId:n.uid,salespersonName:n.fullName,branch:n.branch,startDate:Jt.fromDate(new Date(i)),endDate:Jt.fromDate(new Date(o)),status:"Planned",customers:JSON.stringify(Y.map(D=>({...D,visitStatus:"Pending",remark:""}))),unitTargets:JSON.stringify(d),unitActuals:JSON.stringify([]),createdAt:Jt.now(),updatedAt:Jt.now()};try{await Vk(kw(),I),alert("New Sales Plan submitted successfully!"),t("Actual")}catch(D){console.error("Plan submission failed:",D),alert("Failed to submit plan. Please try again.")}finally{w(!1)}};return E?S.jsx(Ou,{}):n?S.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-6 sm:p-8 rounded-xl shadow-2xl",children:[S.jsx("h1",{className:"text-3xl font-extrabold text-primary mb-6 border-b pb-4",children:"Create New Sales Plan"}),S.jsxs("form",{onSubmit:B,className:"space-y-8",children:[S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm bg-gray-50 p-4 rounded-lg shadow-inner",children:[S.jsxs("div",{children:[S.jsx("span",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Employee Name"}),S.jsx("p",{className:"font-semibold text-secondary",children:n.fullName})]}),S.jsxs("div",{children:[S.jsx("span",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Branch"}),S.jsx("p",{className:"font-semibold text-secondary",children:n.branch})]}),S.jsxs("div",{children:[S.jsx("span",{className:"block text-xs font-medium text-gray-700 mb-1",children:"User Role"}),S.jsx("p",{className:"font-semibold text-secondary",children:n.role})]})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),S.jsx("input",{type:"date",required:!0,value:i,onChange:U=>r(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-primary focus:border-primary"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),S.jsx("input",{type:"date",required:!0,min:i,value:o,onChange:U=>l(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-primary focus:border-primary"})]})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx("h3",{className:"text-xl font-semibold text-secondary",children:"Customer Visit Plan"}),S.jsxs("div",{className:"flex items-center gap-2 border-b pb-4",children:[S.jsx("input",{type:"text",placeholder:"Customer Name",value:_,onChange:U=>b(U.target.value),className:"flex-grow px-3 py-2 border border-gray-300 rounded-md text-sm"}),S.jsx("button",{type:"button",onClick:R,className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition",children:"+ Add Customer"})]}),S.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:u.map((U,Y)=>S.jsxs("div",{className:"flex items-center gap-2 p-2 border border-gray-100 rounded bg-white",children:[S.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[Y+1,"."]}),S.jsx("input",{type:"text",value:U.name||"",onChange:I=>O(Y,I.target.value),placeholder:"Enter customer name",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-primary focus:border-primary",ref:Y===u.length-1?A:null}),S.jsx("button",{type:"button",onClick:()=>q(Y),className:"text-red-500 hover:text-red-700 p-1",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z"})})})]},Y))})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx("h3",{className:"text-xl font-semibold text-secondary text-center",children:"Unit Target Planning (Value in Rs.)"}),S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-xl overflow-hidden shadow-md",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Unit"}),S.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Target"})]})}),S.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(U=>S.jsxs("tr",{children:[S.jsx("td",{className:"px-4 py-2 text-sm font-medium text-secondary text-center",children:U.unit}),S.jsx("td",{className:"px-4 py-2 text-sm text-center",children:S.jsx("input",{type:"number",min:"0",value:U.target===0?"":U.target,onChange:Y=>j(U.unit,Y.target.value),placeholder:"0",className:"p-1 border border-gray-300 rounded-md text-sm text-right w-40 mx-auto"})})]},U.unit))})]})})]}),S.jsx("div",{className:"pt-6",children:S.jsx("button",{type:"submit",className:`w-full py-3 px-4 text-lg font-medium rounded-full text-white bg-yellow-500 
                                    hover:bg-yellow-600 shadow-xl transition`,children:E?"Submitting...":"Submit Plan"})})]})]}):S.jsx("p",{children:"Loading user profile..."})},a6=({userProfile:n,plans:t})=>{const[e,i]=ht.useState(null),[r,o]=ht.useState(!1),[l,u]=ht.useState(""),[f,d]=ht.useState(""),[p,_]=ht.useState(""),[b,E]=ht.useState(""),w=ht.useMemo(()=>__(t,n),[t,n]),A=B=>B?typeof B.toDate=="function"?B.toDate():new Date(B):new Date,R=ht.useMemo(()=>w.filter(B=>B.status==="Planned"&&(!l||B.salespersonName===l)&&(!f||B.branch===f)&&(!p||A(B.startDate).getFullYear().toString()===p)&&(!b||(A(B.startDate).getMonth()+1).toString()===b)),[w,l,f,p,b]),O=B=>{const U=JSON.parse(JSON.stringify(B));(!U.unitActuals||U.unitActuals.length===0)&&(U.unitActuals=U.unitTargets.map(Y=>({...Y,actual:0}))),i(U)},q=async(B,U,Y,I)=>{B.preventDefault(),o(!0);const D={unitActuals:Y,customers:I,updatedAt:Jt.now()},N=Y.reduce((k,z)=>k+(z.actual||0),0),V=I.length>0&&I.every(k=>k.visitStatus!=="Pending");(N>0||V)&&(D.status="Completed");try{const k=Wa(Ps,`artifacts/order-target-planning/public/data/plans/${U.id}`);await Pk(k,{unitActuals:JSON.stringify(Y),customers:JSON.stringify(I),updatedAt:D.updatedAt,status:D.status||U.status}),alert("Actuals saved successfully!"),i(null)}catch(k){console.error("Actual submission failed:",k),alert("Failed to save actuals.")}finally{o(!1)}},j=async B=>{if(window.confirm("Are you sure you want to permanently delete this plan?")){o(!0);try{const U=Wa(Ps,`artifacts/order-target-planning/public/data/plans/${B}`);await p_(U),alert("Plan deleted successfully.")}catch(U){console.error("Deletion failed:",U),alert("Failed to delete plan.")}finally{o(!1)}}};return r?S.jsx(Ou,{}):e?S.jsx(o6,{plan:e,onBack:()=>i(null),onSubmit:q}):S.jsxs("div",{className:"space-y-6",children:[S.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:["Pending Actualization (",R.length,")"]}),S.jsx("div",{className:"flex items-center justify-between",children:S.jsxs("div",{className:"flex gap-3",children:[S.jsxs("div",{className:"bg-white p-2 rounded border",children:[S.jsx("label",{className:"block text-xs text-gray-600",children:"Employee"}),S.jsxs("select",{value:l,onChange:B=>u(B.target.value),className:"text-sm",children:[S.jsx("option",{value:"",children:"All"}),Array.from(new Set(w.map(B=>B.salespersonName))).map(B=>S.jsx("option",{value:B,children:B},B))]})]}),n&&(n.role==="Master"||n.role==="Branch Head")&&S.jsxs("div",{className:"bg-white p-2 rounded border",children:[S.jsx("label",{className:"block text-xs text-gray-600",children:"Branch"}),S.jsxs("select",{value:f,onChange:B=>d(B.target.value),className:"text-sm",children:[S.jsx("option",{value:"",children:"All"}),Array.from(new Set(w.map(B=>B.branch))).map(B=>S.jsx("option",{value:B,children:B},B))]})]}),S.jsxs("div",{className:"bg-white p-2 rounded border",children:[S.jsx("label",{className:"block text-xs text-gray-600",children:"Year"}),S.jsxs("select",{value:p,onChange:B=>_(B.target.value),className:"text-sm",children:[S.jsx("option",{value:"",children:"Any"}),Array.from(new Set(w.map(B=>A(B.startDate).getFullYear().toString()))).map(B=>S.jsx("option",{value:B,children:B},B))]})]}),S.jsxs("div",{className:"bg-white p-2 rounded border",children:[S.jsx("label",{className:"block text-xs text-gray-600",children:"Month"}),S.jsxs("select",{value:b,onChange:B=>E(B.target.value),className:"text-sm",children:[S.jsx("option",{value:"",children:"Any"}),[...Array(12)].map((B,U)=>S.jsx("option",{value:(U+1).toString(),children:U+1},U+1))]})]})]})}),S.jsx("div",{className:"overflow-x-auto bg-white rounded-xl shadow-2xl",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Branch"}),S.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Plan Date"}),S.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Employee"}),S.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),S.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.length>0?R.map(B=>S.jsxs("tr",{children:[S.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:B.branch}),S.jsxs("td",{className:"px-6 py-4 text-sm text-gray-700",children:[fl(B.startDate)," - ",fl(B.endDate)]}),S.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:B.salespersonName}),S.jsxs("td",{className:"px-6 py-4 text-sm",children:[S.jsx("button",{onClick:()=>O(B),className:"text-blue-600 hover:text-blue-800 font-medium mr-4",children:"Update Actual"}),S.jsx("button",{onClick:()=>j(B.id),className:"text-red-500 hover:text-red-700 font-medium",children:"Delete"})]})]},B.id)):S.jsx("tr",{children:S.jsx("td",{colSpan:4,className:"text-center py-8 text-gray-500",children:"No plans pending actualization."})})})]})})]})},o6=({plan:n,onBack:t,onSubmit:e})=>{const[i,r]=ht.useState(n.unitActuals),[o,l]=ht.useState(n.customers),u=()=>{l(d=>[...d,{name:"",visitStatus:"Pending",remark:""}])},f=(d,p)=>{const _=[...i],b=_.findIndex(E=>E.unit===d);b!==-1&&(_[b].actual=parseInt(p,10)||0,r(_))};return S.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-6 sm:p-8 rounded-xl shadow-2xl",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[S.jsxs("h2",{className:"text-2xl font-extrabold text-primary",children:["Actualizing Plan: ",n.salespersonName]}),S.jsx("button",{onClick:t,className:"text-sm text-gray-500 hover:text-secondary",children:" Back"})]}),S.jsxs("form",{onSubmit:d=>e(d,n,i,o),className:"space-y-8",children:[S.jsxs("div",{className:"space-y-4",children:[S.jsx("h3",{className:"text-xl font-semibold text-secondary",children:"Customer Visit Actuals"}),S.jsx("div",{className:"flex justify-end mb-2",children:S.jsx("button",{type:"button",onClick:u,className:"px-3 py-1 rounded-md text-sm",style:{backgroundColor:"#3b82f6",color:"white",fontWeight:"600",border:"1px solid #3b82f6",display:"inline-block",cursor:"pointer"},children:"+ Add Customer"})}),S.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:o.map((d,p)=>S.jsx("div",{className:"p-3 border border-gray-200 rounded-lg bg-gray-50 space-y-2",children:S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[S.jsx("input",{value:d.name,onChange:_=>{const b=[...o];b[p].name=_.target.value,l(b)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm",placeholder:"Name"}),S.jsxs("select",{value:d.visitStatus,onChange:_=>{const b=[...o];b[p].visitStatus=_.target.value,l(b)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm",children:[S.jsx("option",{value:"Pending",children:"Pending"}),S.jsx("option",{value:"Visit Done",children:"Visit Done"}),S.jsx("option",{value:"Not Visit",children:"Not Visit"})]}),S.jsx("input",{value:d.remark,onChange:_=>{const b=[...o];b[p].remark=_.target.value,l(b)},className:"px-2 py-1 border border-gray-300 rounded-md text-sm",placeholder:"Remark"})]})},p))})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx("h3",{className:"text-xl font-semibold text-secondary",children:"Unit Actuals (Rs.)"}),S.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-xl overflow-hidden shadow-md",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium",children:"Unit"}),S.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium",children:"Target"}),S.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium",children:"Actual"})]})}),S.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(d=>S.jsxs("tr",{children:[S.jsx("td",{className:"px-4 py-2 text-sm",children:d.unit}),S.jsx("td",{className:"px-4 py-2 text-sm text-right",children:d.target}),S.jsx("td",{className:"px-4 py-2 text-sm text-right",children:S.jsx("input",{type:"number",value:d.actual||"",onChange:p=>f(d.unit,p.target.value),className:"w-full p-1 border border-gray-300 rounded-md text-sm text-right"})})]},d.unit))})]})]}),S.jsx("div",{className:"pt-6",children:S.jsx("button",{type:"submit",className:"w-full py-3 px-4 rounded-full text-lg font-medium shadow-xl",style:{backgroundColor:"#3b82f6",color:"white",fontWeight:"600",border:"1px solid #3b82f6",display:"block",cursor:"pointer"},children:"Save and Complete"})})]})]})},l6=({isOpen:n,onClose:t,title:e,children:i})=>n?S.jsx("div",{className:"fixed z-50 inset-0 overflow-y-auto bg-black/50 flex items-center justify-center p-4","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onClick:t,children:S.jsxs("div",{className:"relative bg-white rounded-lg shadow-2xl w-full max-w-2xl max-h-[85vh] overflow-auto",onClick:r=>r.stopPropagation(),children:[S.jsxs("div",{className:"sticky top-0 bg-white px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[S.jsx("h3",{className:"text-lg leading-6 font-bold text-gray-900",id:"modal-title",children:e}),S.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 text-2xl leading-none font-bold",children:""})]}),S.jsx("div",{className:"px-6 py-4",children:i}),S.jsx("div",{className:"bg-gray-50 px-6 py-3 border-t border-gray-200 flex justify-end",children:S.jsx("button",{type:"button",onClick:t,className:"inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-700 focus:outline-none text-sm",children:"Close"})})]})}):null,c6=({userProfile:n,plans:t})=>{const[e,i]=ht.useState(null),[r,o]=ht.useState(!1),[l,u]=ht.useState(""),[f,d]=ht.useState(""),[p,_]=ht.useState(""),[b,E]=ht.useState(""),w=ht.useMemo(()=>__(t,n),[t,n]),A=j=>j?typeof j.toDate=="function"?j.toDate():typeof j=="object"&&"seconds"in j?new Date(j.seconds*1e3):new Date(j):new Date,R=ht.useMemo(()=>w.filter(j=>!(j.status!=="Completed"||l&&j.salespersonName!==l||f&&j.branch!==f||p&&A(j.startDate).getFullYear().toString()!==p||b&&(A(j.startDate).getMonth()+1).toString()!==b)),[w,l,f,p,b]),O=(n==null?void 0:n.role)==="Master"||(n==null?void 0:n.role)==="Branch Head",q=async j=>{if(window.confirm(`Are you sure you want to delete this report for ${j.salespersonName}? This action cannot be undone.`)){o(!0);try{await Bk(j.id),alert("Report deleted successfully.")}catch(B){console.error("Error deleting plan:",B),alert("Failed to delete report. Please try again.")}finally{o(!1)}}};return S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[S.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:["Completed Reports (",R.length,")"]}),S.jsxs("div",{className:"flex gap-3 items-center",children:[S.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border",children:[S.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Employee"}),S.jsxs("select",{value:l,onChange:j=>u(j.target.value),className:"w-48 px-2 py-1 border border-gray-300 rounded-md text-sm",children:[S.jsx("option",{value:"",children:"All Employees"}),Array.from(new Set(w.map(j=>j.salespersonName))).map(j=>S.jsx("option",{value:j,children:j},j))]})]}),n&&(n.role==="Master"||n.role==="Branch Head")&&S.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border",children:[S.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Branch"}),S.jsxs("select",{value:f,onChange:j=>d(j.target.value),className:"w-40 px-2 py-1 border border-gray-300 rounded-md text-sm",children:[S.jsx("option",{value:"",children:"All Branches"}),Array.from(new Set(w.map(j=>j.branch))).map(j=>S.jsx("option",{value:j,children:j},j))]})]}),S.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border",children:[S.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Year"}),S.jsxs("select",{value:p,onChange:j=>_(j.target.value),className:"w-28 px-2 py-1 border border-gray-300 rounded-md text-sm",children:[S.jsx("option",{value:"",children:"Any Year"}),Array.from(new Set(w.map(j=>A(j.startDate).getFullYear().toString()))).map(j=>S.jsx("option",{value:j,children:j},j))]})]}),S.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border",children:[S.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Month"}),S.jsxs("select",{value:b,onChange:j=>E(j.target.value),className:"w-28 px-2 py-1 border border-gray-300 rounded-md text-sm",children:[S.jsx("option",{value:"",children:"Any Month"}),[...Array(12)].map((j,B)=>S.jsx("option",{value:(B+1).toString(),children:B+1},B+1))]})]}),O&&S.jsxs("button",{onClick:()=>Kk(R),className:"flex items-center bg-primary text-white py-2 px-4 rounded-lg text-sm hover:bg-blue-700 transition shadow-md",children:[S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:[S.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),S.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.022 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),"Download CSV"]})]})]}),S.jsx("div",{className:"overflow-x-auto bg-white rounded-xl shadow-2xl",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Branch"}),S.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),S.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Plan Date"}),S.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Target"}),S.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actual"}),S.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Achieved (%)"}),S.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),O&&S.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Delete"})]})}),S.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.length>0?R.map(j=>{const B=j.unitTargets.reduce((I,D)=>I+D.target,0),U=j.unitActuals.reduce((I,D)=>I+D.actual,0),Y=B>0?U/B*100:0;return S.jsxs("tr",{children:[S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.branch}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-secondary",children:j.salespersonName}),S.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[fl(j.startDate)," - ",fl(j.endDate)]}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:B.toLocaleString("en-IN")}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-semibold text-right",children:U.toLocaleString("en-IN")}),S.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-semibold text-right ${Y>=100?"text-green-600":"text-red-600"}`,children:[Y.toFixed(2),"%"]}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:S.jsx("button",{onClick:()=>i(j),className:"text-primary hover:text-blue-700 font-medium",children:"View Details"})}),O&&S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:S.jsx("button",{onClick:()=>q(j),disabled:r,className:"text-red-600 hover:text-red-800 font-medium disabled:opacity-50",children:"Delete"})})]},j.id)}):S.jsx("tr",{children:S.jsx("td",{colSpan:O?8:7,className:"text-center py-8 text-gray-500",children:"No completed reports found."})})})]})}),e&&S.jsx(u6,{plan:e,onClose:()=>i(null)})]})},u6=({plan:n,onClose:t})=>{const e=n.unitTargets.reduce((o,l)=>o+l.target,0),i=n.unitActuals.reduce((o,l)=>o+l.actual,0),r=e>0?i/e*100:0;return S.jsx(l6,{isOpen:!!n,onClose:t,title:`Report: ${n.salespersonName}`,children:S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm bg-gray-50 p-4 rounded-lg shadow-inner",children:[S.jsxs("p",{children:[S.jsx("strong",{children:"Total Target:"})," ",S.jsxs("span",{className:"text-secondary font-semibold",children:["",e.toLocaleString("en-IN")]})]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Total Actual:"})," ",S.jsxs("span",{className:"text-primary font-semibold",children:["",i.toLocaleString("en-IN")]})]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Achievement:"})," ",S.jsxs("span",{className:`${r>=100?"text-green-600":"text-red-600"} font-semibold`,children:[r.toFixed(2),"%"]})]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Status:"})," ",S.jsx("span",{className:"text-green-600 font-semibold",children:n.status})]})]}),S.jsx("h4",{className:"text-lg font-semibold text-secondary mt-4 border-b pb-2",children:"Unit Performance"}),S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"}),S.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Target"}),S.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Actual"}),S.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Achieved (%)"})]})}),S.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.unitActuals.map(o=>{const l=o.target>0?o.actual/o.target*100:0;return S.jsxs("tr",{children:[S.jsx("td",{className:"px-4 py-2 text-sm font-medium text-secondary",children:o.unit}),S.jsx("td",{className:"px-4 py-2 text-sm text-gray-500 text-right",children:o.target.toLocaleString("en-IN")}),S.jsx("td",{className:"px-4 py-2 text-sm text-primary text-right",children:o.actual.toLocaleString("en-IN")}),S.jsxs("td",{className:`px-4 py-2 text-sm font-semibold text-right ${l>=100?"text-green-600":"text-red-600"}`,children:[l.toFixed(2),"%"]})]},o.unit)})})]})}),S.jsx("h4",{className:"text-lg font-semibold text-secondary mt-6 border-b pb-2",children:"Customer Visit Details"}),S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),S.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Status"}),S.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Remark"})]})}),S.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.customers.map((o,l)=>S.jsxs("tr",{children:[S.jsx("td",{className:"px-4 py-2 text-sm font-medium text-secondary",children:o.name}),S.jsx("td",{className:"px-4 py-2 text-sm text-center font-semibold",children:o.visitStatus}),S.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:o.remark||"N/A"})]},l))})]})})]})})},h6=({userProfile:n})=>{const[t,e]=ht.useState([]),[i,r]=ht.useState(!0),[o,l]=ht.useState(null),[u,f]=ht.useState(""),[d,p]=ht.useState("");ht.useEffect(()=>{const A=async()=>{try{const R=await Fk();e(R)}catch(R){console.error("Error fetching users:",R),alert("Failed to load team members. Please try again.")}finally{r(!1)}};(n==null?void 0:n.role)==="Master"?A():r(!1)},[n]);const _=async(A,R)=>{if(window.confirm(`Are you sure you want to delete ${R}? They will no longer be able to login, but their data will remain in the system.`)){l(A);try{await Hk(A),e(O=>O.filter(q=>q.id!==A)),alert(`${R} has been removed from the team.`)}catch(O){console.error("Error deleting user:",O),alert("Failed to delete team member. Please try again.")}finally{l(null)}}},b=uS.useMemo(()=>t.filter(A=>!(u&&A.role!==u||d&&A.branch!==d)),[t,u,d]);if((n==null?void 0:n.role)!=="Master")return S.jsx("div",{className:"min-h-screen flex items-center justify-center",children:S.jsxs("div",{className:"text-center",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Access Denied"}),S.jsx("p",{className:"text-gray-600",children:"Only Master users can access the Teams management page."})]})});if(i)return S.jsx(Ou,{fullScreen:!0});const E=Array.from(new Set(t.map(A=>A.role))),w=Array.from(new Set(t.map(A=>A.branch)));return S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4",children:[S.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:["Team Management (",b.length,")"]}),S.jsxs("div",{className:"flex gap-3 items-center flex-wrap",children:[S.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border",children:[S.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Role"}),S.jsxs("select",{value:u,onChange:A=>f(A.target.value),className:"w-48 px-2 py-1 border border-gray-300 rounded-md text-sm",children:[S.jsx("option",{value:"",children:"All Roles"}),E.map(A=>S.jsx("option",{value:A,children:A},A))]})]}),S.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border",children:[S.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Branch"}),S.jsxs("select",{value:d,onChange:A=>p(A.target.value),className:"w-48 px-2 py-1 border border-gray-300 rounded-md text-sm",children:[S.jsx("option",{value:"",children:"All Branches"}),w.map(A=>S.jsx("option",{value:A,children:A},A))]})]})]})]}),S.jsx("div",{className:"overflow-x-auto bg-white rounded-xl shadow-2xl",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),S.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),S.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),S.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Branch / Location"}),S.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User ID"}),S.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),S.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.length>0?b.map(A=>{var R;return S.jsxs("tr",{className:"hover:bg-gray-50",children:[S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-secondary",children:A.fullName}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:A.email}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:S.jsx("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:A.role})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:A.branch}),S.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(R=A.id)==null?void 0:R.substring(0,8),"..."]}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:A.id!==(n==null?void 0:n.uid)?S.jsx("button",{onClick:()=>_(A.id,A.fullName),disabled:o===A.id,className:"text-red-600 hover:text-red-800 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:o===A.id?"Deleting...":"Delete"}):S.jsx("span",{className:"text-gray-400 text-xs",children:"(You)"})})]},A.id)}):S.jsx("tr",{children:S.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-500",children:"No team members found."})})})]})}),S.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:S.jsxs("p",{className:"text-sm text-blue-800",children:[S.jsx("strong",{children:"Note:"})," When you delete a team member, they will no longer be able to login to the application. However, their existing plans and data will remain in the system for historical records."]})})]})},f6=({userProfile:n,onMenuClick:t})=>{const e=async()=>{try{await fD(yd)}catch(i){console.error("Logout failed:",i)}};return S.jsx("header",{className:"bg-white shadow-md sticky top-0 z-30",children:S.jsxs("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8 py-3 flex justify-between items-center",children:[S.jsxs("div",{className:"flex items-center",children:[S.jsx("button",{onClick:t,className:"md:hidden mr-3 text-gray-500 hover:text-gray-700",children:S.jsx("svg",{className:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),S.jsx("img",{className:"h-10 w-auto rounded-lg",src:y_,alt:fu,onError:i=>i.currentTarget.src="https://placehold.co/40x40/10a5e8/ffffff?text=G"}),S.jsx("h1",{className:"ml-3 text-xl font-bold text-secondary hidden sm:block",children:fu})]}),S.jsxs("div",{className:"text-right",children:[S.jsxs("p",{className:"text-sm font-medium text-secondary",children:[n.fullName," (",S.jsx("span",{className:"text-primary",children:n.role}),")"]}),S.jsxs("p",{className:"text-xs text-gray-500",children:[n.branch," | User ID: ",n.uid.substring(0,8),"..."]}),S.jsx("button",{onClick:e,className:"mt-1 text-xs text-red-500 hover:text-red-700 transition",children:"Sign Out"})]})]})})},d6=({currentPage:n,setPage:t,userProfile:e,isOpen:i,setIsOpen:r})=>{const o=({page:u,label:f})=>S.jsx("button",{onClick:()=>{t(u),r(!1)},className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${n===u?"bg-primary/10 text-primary":"text-gray-600 hover:bg-gray-100"}`,children:f}),l=S.jsxs("div",{className:"p-4 space-y-4",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx("img",{src:y_,className:"h-10 w-10 rounded",alt:"Company Logo",onError:u=>u.currentTarget.src="https://placehold.co/40x40/10a5e8/ffffff?text=G"}),S.jsxs("div",{children:[S.jsx("div",{className:"text-sm font-semibold text-secondary",children:fu}),S.jsx("div",{className:"text-xs text-gray-500",children:e.fullName})]})]}),S.jsxs("nav",{className:"mt-4 space-y-1",children:[S.jsx(o,{page:"Dashboard",label:"Dashboard"}),S.jsx(o,{page:"NewPlan",label:"Create Plan"}),S.jsx(o,{page:"Actual",label:"Pending (Actual)"}),S.jsx(o,{page:"Report",label:"Dataset / Report"}),e.role==="Master"&&S.jsx(o,{page:"Teams",label:"Teams"})]}),S.jsxs("div",{className:"absolute bottom-4 left-4 right-4 text-xs text-gray-500",children:[S.jsx("p",{className:"font-semibold text-sm",children:"Ginza Industries Ltd."}),S.jsx("p",{className:"mt-1",children:"Quality textile components."})]})]});return S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:`fixed inset-0 z-40 md:hidden transition-opacity ${i?"opacity-100":"opacity-0 pointer-events-none"}`,children:[S.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>r(!1)}),S.jsx("div",{className:`relative flex flex-col w-64 h-full bg-white border-r border-gray-100 transform ${i?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:l})]}),S.jsx("aside",{className:"hidden md:block w-64 bg-white border-r border-gray-100 min-h-[calc(100vh-65px)] sticky top-[65px]",children:l})]})},g6=()=>{const[n,t]=ht.useState("Dashboard"),[e,i]=ht.useState(null),[r,o]=ht.useState(null),[l,u]=ht.useState([]),[f,d]=ht.useState(!0),[p,_]=ht.useState(!1),[b,E]=ht.useState(!1),w=ht.useCallback(async R=>{try{const O=Pw(R),q=await Ok(O);q.exists()?o(q.data()):o(null)}catch(O){console.error("Error fetching user profile:",O),o(null)}},[]);ht.useEffect(()=>{const R=hD(yd,async O=>{i(O),O?await w(O.uid):o(null),_(!0),d(!1)});return()=>R()},[w]),ht.useEffect(()=>{if(!r){u([]);return}const R=kw(),O=Lk(R,q=>{const j=[];q.forEach(B=>{const U=B.data();try{j.push({id:B.id,...U,customers:typeof U.customers=="string"?JSON.parse(U.customers):U.customers||[],unitTargets:typeof U.unitTargets=="string"?JSON.parse(U.unitTargets):U.unitTargets||[],unitActuals:typeof U.unitActuals=="string"?JSON.parse(U.unitActuals):U.unitActuals||[]})}catch(Y){console.error("Failed to parse plan data:",Y,U)}}),u(j.sort((B,U)=>{var Y,I;return(((Y=U.createdAt)==null?void 0:Y.toMillis())||0)-(((I=B.createdAt)==null?void 0:I.toMillis())||0)}))},q=>{console.error("Error fetching plans:",q)});return()=>O()},[r]);const A=()=>{switch(n){case"Dashboard":return S.jsx(lS,{userProfile:r,plans:l});case"NewPlan":return S.jsx(r6,{userProfile:r,setPage:t});case"Actual":return S.jsx(a6,{userProfile:r,plans:l});case"Report":return S.jsx(c6,{userProfile:r,plans:l});case"Teams":return S.jsx(h6,{userProfile:r});default:return S.jsx(lS,{userProfile:r,plans:l})}};return f||!p?S.jsx(Ou,{fullScreen:!0}):!e||!r?S.jsx(Gk,{}):S.jsxs("div",{className:"min-h-screen bg-bg-light",children:[S.jsx(f6,{userProfile:r,onMenuClick:()=>E(!b)}),S.jsxs("div",{className:"flex",children:[S.jsx(d6,{currentPage:n,setPage:t,userProfile:r,isOpen:b,setIsOpen:E}),S.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 transition-all duration-300",children:A()})]})]})},k1=document.getElementById("root");if(!k1)throw new Error("Could not find root element to mount to");const m6=EC.createRoot(k1);m6.render(S.jsx(uS.StrictMode,{children:S.jsx(g6,{})}));
